/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{604:function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},605:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},606:function(t,e,r){var n=r(616);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},607:function(t,e,r){var n=r(615).default,o=r(625);t.exports=function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)},t.exports.__esModule=!0,t.exports.default=t.exports},608:function(t,e,r){"use strict";var n=r(743),o=r(744);t.exports={errors:n,formatters:o}},612:function(t,e){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},616:function(t,e){function r(e,p){return t.exports=r=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t},t.exports.__esModule=!0,t.exports.default=t.exports,r(e,p)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},617:function(t,e,r){var n=r(745),o=r(693),h=r(760),c=r(74),l=r(6),d=function(t,e){var r=[];return e.forEach((function(param){if("object"==typeof param.components){if("tuple"!==param.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var e="",n=param.type.indexOf("[");n>=0&&(e=param.type.substring(n));var o=d(t,param.components);Array.isArray(o)&&t?r.push("tuple("+o.join(",")+")"+e):t?r.push("("+o+")"):r.push("("+o.join(",")+")"+e)}else r.push(param.type)})),r},f=function(t){if(!o.isHexStrict(t))throw new Error("The parameter must be a valid HEX string.");var e="",i=0,r=t.length;for("0x"===t.substring(0,2)&&(i=2);i<r;i+=2){var code=parseInt(t.substr(i,2),16);e+=String.fromCharCode(code)}return e},m=function(t){if(!t)return"0x00";for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i).toString(16);e+=r.length<2?"0"+r:r}return"0x"+e},v=function(t){if(t=t?t.toLowerCase():"ether",!n.unitMap[t])throw new Error('This unit "'+t+"\" doesn't exist, please use the one of the following units"+JSON.stringify(n.unitMap,null,2));return t};t.exports={_fireError:function(t,e,r,n,o){return!t||"object"!=typeof t||t instanceof Error||!t.data||((t.data&&"object"==typeof t.data||Array.isArray(t.data))&&(t.data=JSON.stringify(t.data,null,2)),t=t.message+"\n"+t.data),"string"==typeof t&&(t=new Error(t)),"function"==typeof n&&n(t,o),"function"==typeof r&&((e&&"function"==typeof e.listeners&&e.listeners("error").length||"function"==typeof n)&&e.catch((function(){})),setTimeout((function(){r(t)}),1)),e&&"function"==typeof e.emit&&setTimeout((function(){e.emit("error",t,o),e.removeAllListeners()}),1),e},_jsonInterfaceMethodToString:function(t){return t&&"object"==typeof t&&t.name&&-1!==t.name.indexOf("(")?t.name:t.name+"("+d(!1,t.inputs).join(",")+")"},_flattenTypes:d,randomHex:function(t){return"0x"+c(t).toString("hex")},BN:o.BN,isBN:o.isBN,isBigNumber:o.isBigNumber,isHex:o.isHex,isHexStrict:o.isHexStrict,sha3:o.sha3,sha3Raw:o.sha3Raw,keccak256:o.sha3,soliditySha3:h.soliditySha3,soliditySha3Raw:h.soliditySha3Raw,encodePacked:h.encodePacked,isAddress:o.isAddress,checkAddressChecksum:o.checkAddressChecksum,toChecksumAddress:function(address){if(void 0===address)return"";if(!/^(0x)?[0-9a-f]{40}$/i.test(address))throw new Error('Given address "'+address+'" is not a valid Ethereum address.');address=address.toLowerCase().replace(/^0x/i,"");for(var t=o.sha3(address).replace(/^0x/i,""),e="0x",i=0;i<address.length;i++)parseInt(t[i],16)>7?e+=address[i].toUpperCase():e+=address[i];return e},toHex:o.toHex,toBN:o.toBN,bytesToHex:o.bytesToHex,hexToBytes:o.hexToBytes,hexToNumberString:o.hexToNumberString,hexToNumber:o.hexToNumber,toDecimal:o.hexToNumber,numberToHex:o.numberToHex,fromDecimal:o.numberToHex,hexToUtf8:o.hexToUtf8,hexToString:o.hexToUtf8,toUtf8:o.hexToUtf8,stripHexPrefix:o.stripHexPrefix,utf8ToHex:o.utf8ToHex,stringToHex:o.utf8ToHex,fromUtf8:o.utf8ToHex,hexToAscii:f,toAscii:f,asciiToHex:m,fromAscii:m,unitMap:n.unitMap,toWei:function(t,e){if(e=v(e),!o.isBN(t)&&"string"!=typeof t)throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return o.isBN(t)?n.toWei(t,e):n.toWei(t,e).toString(10)},fromWei:function(t,e){if(e=v(e),!o.isBN(t)&&"string"!=typeof t)throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return o.isBN(t)?n.fromWei(t,e):n.fromWei(t,e).toString(10)},padLeft:o.leftPad,leftPad:o.leftPad,padRight:o.rightPad,rightPad:o.rightPad,toTwosComplement:o.toTwosComplement,isBloom:o.isBloom,isUserEthereumAddressInBloom:o.isUserEthereumAddressInBloom,isContractAddressInBloom:o.isContractAddressInBloom,isTopic:o.isTopic,isTopicInBloom:o.isTopicInBloom,isInBloom:o.isInBloom,compareBlockNumbers:function(a,b){if(a==b)return 0;if("genesis"!=a&&"earliest"!=a&&0!=a||"genesis"!=b&&"earliest"!=b&&0!=b){if("genesis"==a||"earliest"==a)return-1;if("genesis"==b||"earliest"==b)return 1;if("latest"==a)return"pending"==b?-1:1;if("latest"===b)return"pending"==a?1:-1;if("pending"==a)return 1;if("pending"==b)return-1;{let t=new l(a),e=new l(b);return t.lt(e)?-1:t.eq(e)?0:1}}return 0},toNumber:o.toNumber}},623:function(t,e){function r(t,e,r,n,o,h,c){try{var l=t[h](c),d=l.value}catch(t){return void r(t)}l.done?e(d):Promise.resolve(d).then(n,o)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,h){var c=t.apply(e,n);function l(t){r(c,o,h,l,d,"next",t)}function d(t){r(c,o,h,l,d,"throw",t)}l(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},624:function(t,e,r){t.exports=r(72)},625:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},635:function(t,e,r){"use strict";var n=r(766),o=r(767);function h(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=O,e.resolve=function(source,t){return O(source,!1,!0).resolve(t)},e.resolveObject=function(source,t){return source?O(source,!1,!0).resolveObject(t):t},e.format=function(t){o.isString(t)&&(t=O(t));return t instanceof h?t.format():h.prototype.format.call(t)},e.Url=h;var c=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),m=["'"].concat(f),v=["%","/","?",";","#"].concat(m),y=["/","?","#"],w=/^[+a-z0-9A-Z_-]{0,63}$/,M=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=r(768);function O(t,e,r){if(t&&o.isObject(t)&&t instanceof h)return t;var u=new h;return u.parse(t,e,r),u}h.prototype.parse=function(t,e,r){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t.indexOf("?"),l=-1!==h&&h<t.indexOf("#")?"?":"#",f=t.split(l);f[0]=f[0].replace(/\\/g,"/");var O=t=f.join(l);if(O=O.trim(),!r&&1===t.split("#").length){var A=d.exec(O);if(A)return this.path=O,this.href=O,this.pathname=A[1],A[2]?(this.search=A[2],this.query=e?E.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var S=c.exec(O);if(S){var j=(S=S[0]).toLowerCase();this.protocol=j,O=O.substr(S.length)}if(r||S||O.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===O.substr(0,2);!C||S&&x[S]||(O=O.substr(2),this.slashes=!0)}if(!x[S]&&(C||S&&!k[S])){for(var T,P,N=-1,i=0;i<y.length;i++){-1!==(I=O.indexOf(y[i]))&&(-1===N||I<N)&&(N=I)}-1!==(P=-1===N?O.lastIndexOf("@"):O.lastIndexOf("@",N))&&(T=O.slice(0,P),O=O.slice(P+1),this.auth=decodeURIComponent(T)),N=-1;for(i=0;i<v.length;i++){var I;-1!==(I=O.indexOf(v[i]))&&(-1===N||I<N)&&(N=I)}-1===N&&(N=O.length),this.host=O.slice(0,N),O=O.slice(N),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var B=this.hostname.split(/\./),L=(i=0,B.length);i<L;i++){var F=B[i];if(F&&!F.match(w)){for(var D="",H=0,U=F.length;H<U;H++)F.charCodeAt(H)>127?D+="x":D+=F[H];if(!D.match(w)){var V=B.slice(0,i),z=B.slice(i+1),W=F.match(M);W&&(V.push(W[1]),z.unshift(W[2])),z.length&&(O="/"+z.join(".")+O),this.hostname=V.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=n.toASCII(this.hostname));var p=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+p,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==O[0]&&(O="/"+O))}if(!_[j])for(i=0,L=m.length;i<L;i++){var Z=m[i];if(-1!==O.indexOf(Z)){var K=encodeURIComponent(Z);K===Z&&(K=escape(Z)),O=O.split(Z).join(K)}}var J=O.indexOf("#");-1!==J&&(this.hash=O.substr(J),O=O.slice(0,J));var X=O.indexOf("?");if(-1!==X?(this.search=O.substr(X),this.query=O.substr(X+1),e&&(this.query=E.parse(this.query)),O=O.slice(0,X)):e&&(this.search="",this.query={}),O&&(this.pathname=O),k[j]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){p=this.pathname||"";var s=this.search||"";this.path=p+s}return this.href=this.format(),this},h.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",h=!1,c="";this.host?h=t+this.host:this.hostname&&(h=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(c=E.stringify(this.query));var l=this.search||c&&"?"+c||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||k[e])&&!1!==h?(h="//"+(h||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):h||(h=""),n&&"#"!==n.charAt(0)&&(n="#"+n),l&&"?"!==l.charAt(0)&&(l="?"+l),e+h+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(l=l.replace("#","%23"))+n},h.prototype.resolve=function(t){return this.resolveObject(O(t,!1,!0)).format()},h.prototype.resolveObject=function(t){if(o.isString(t)){var e=new h;e.parse(t,!1,!0),t=e}for(var r=new h,n=Object.keys(this),c=0;c<n.length;c++){var l=n[c];r[l]=this[l]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var d=Object.keys(t),f=0;f<d.length;f++){var m=d[f];"protocol"!==m&&(r[m]=t[m])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!k[t.protocol]){for(var v=Object.keys(t),y=0;y<v.length;y++){var w=v[y];r[w]=t[w]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||x[t.protocol])r.pathname=t.pathname;else{for(var M=(t.pathname||"").split("/");M.length&&!(t.host=M.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==M[0]&&M.unshift(""),M.length<2&&M.unshift(""),r.pathname=M.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",s=r.search||"";r.path=p+s}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),E=t.host||t.pathname&&"/"===t.pathname.charAt(0),O=E||_||r.host&&t.pathname,A=O,S=r.pathname&&r.pathname.split("/")||[],j=(M=t.pathname&&t.pathname.split("/")||[],r.protocol&&!k[r.protocol]);if(j&&(r.hostname="",r.port=null,r.host&&(""===S[0]?S[0]=r.host:S.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===M[0]?M[0]=t.host:M.unshift(t.host)),t.host=null),O=O&&(""===M[0]||""===S[0])),E)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,S=M;else if(M.length)S||(S=[]),S.pop(),S=S.concat(M),r.search=t.search,r.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(j)r.hostname=r.host=S.shift(),(N=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=N.shift(),r.host=r.hostname=N.shift());return r.search=t.search,r.query=t.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!S.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var C=S.slice(-1)[0],T=(r.host||t.host||S.length>1)&&("."===C||".."===C)||""===C,P=0,i=S.length;i>=0;i--)"."===(C=S[i])?S.splice(i,1):".."===C?(S.splice(i,1),P++):P&&(S.splice(i,1),P--);if(!O&&!A)for(;P--;P)S.unshift("..");!O||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),T&&"/"!==S.join("/").substr(-1)&&S.push("");var N,I=""===S[0]||S[0]&&"/"===S[0].charAt(0);j&&(r.hostname=r.host=I?"":S.length?S.shift():"",(N=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=N.shift(),r.host=r.hostname=N.shift()));return(O=O||r.host&&S.length)&&!I&&S.unshift(""),S.length?r.pathname=S.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},h.prototype.parseHost=function(){var t=this.host,e=l.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},658:function(t,e){t.exports=function(t){if("string"!=typeof t)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return"0x"===t.slice(0,2)}},668:function(t,e,r){var n=r(658);t.exports=function(t){return"string"!=typeof t?t:n(t)?t.slice(2):t}},672:function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function h(){}function c(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function l(t,e,r,n,h){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new c(r,n||t,h),d=o?o+e:e;return t._events[d]?t._events[d].fn?t._events[d]=[t._events[d],l]:t._events[d].push(l):(t._events[d]=l,t._eventsCount++),t}function d(t,e){0==--t._eventsCount?t._events=new h:delete t._events[e]}function f(){this._events=new h,this._eventsCount=0}Object.create&&(h.prototype=Object.create(null),(new h).__proto__||(o=!1)),f.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},f.prototype.listeners=function(t){var e=o?o+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,n=r.length,h=new Array(n);i<n;i++)h[i]=r[i].fn;return h},f.prototype.listenerCount=function(t){var e=o?o+t:t,r=this._events[e];return r?r.fn?1:r.length:0},f.prototype.emit=function(t,e,r,n,h,c){var l=o?o+t:t;if(!this._events[l])return!1;var d,i,f=this._events[l],m=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),m){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,r),!0;case 4:return f.fn.call(f.context,e,r,n),!0;case 5:return f.fn.call(f.context,e,r,n,h),!0;case 6:return f.fn.call(f.context,e,r,n,h,c),!0}for(i=1,d=new Array(m-1);i<m;i++)d[i-1]=arguments[i];f.fn.apply(f.context,d)}else{var v,y=f.length;for(i=0;i<y;i++)switch(f[i].once&&this.removeListener(t,f[i].fn,void 0,!0),m){case 1:f[i].fn.call(f[i].context);break;case 2:f[i].fn.call(f[i].context,e);break;case 3:f[i].fn.call(f[i].context,e,r);break;case 4:f[i].fn.call(f[i].context,e,r,n);break;default:if(!d)for(v=1,d=new Array(m-1);v<m;v++)d[v-1]=arguments[v];f[i].fn.apply(f[i].context,d)}}return!0},f.prototype.on=function(t,e,r){return l(this,t,e,r,!1)},f.prototype.once=function(t,e,r){return l(this,t,e,r,!0)},f.prototype.removeListener=function(t,e,r,n){var h=o?o+t:t;if(!this._events[h])return this;if(!e)return d(this,h),this;var c=this._events[h];if(c.fn)c.fn!==e||n&&!c.once||r&&c.context!==r||d(this,h);else{for(var i=0,l=[],f=c.length;i<f;i++)(c[i].fn!==e||n&&!c[i].once||r&&c[i].context!==r)&&l.push(c[i]);l.length?this._events[h]=1===l.length?l[0]:l:d(this,h)}return this},f.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&d(this,e)):(this._events=new h,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,t.exports=f},673:function(t,e,r){(function(t){var n=r(778),o=r(698),h=r(699),c=r(780),l=r(635),d=e;d.request=function(e,r){e="string"==typeof e?l.parse(e):h(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",c=e.protocol||o,d=e.hostname||e.host,f=e.port,path=e.path||"/";d&&-1!==d.indexOf(":")&&(d="["+d+"]"),e.url=(d?c+"//"+d:"")+(f?":"+f:"")+path,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var m=new n(e);return r&&m.on("response",r),m},d.get=function(t,e){var r=d.request(t,e);return r.end(),r},d.ClientRequest=n,d.IncomingMessage=o.IncomingMessage,d.Agent=function(){},d.Agent.defaultMaxSockets=4,d.globalAgent=new d.Agent,d.STATUS_CODES=c,d.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(18))},674:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.listeners={}}return t.prototype.addEventListener=function(t,e){t=t.toLowerCase(),this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e.handleEvent||e)},t.prototype.removeEventListener=function(t,e){if(t=t.toLowerCase(),this.listeners[t]){var r=this.listeners[t].indexOf(e.handleEvent||e);r<0||this.listeners[t].splice(r,1)}},t.prototype.dispatchEvent=function(t){var e=t.type.toLowerCase();if(t.target=this,this.listeners[e])for(var r=0,n=this.listeners[e];r<n.length;r++){n[r].call(this,t)}var o=this["on"+e];return o&&o.call(this,t),!0},t}();e.XMLHttpRequestEventTarget=n},675:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ObservableStore=void 0;const o=n(r(810));class h extends o.default{constructor(t){super(),this._state=t||{}}getState(){return this._getState()}putState(t){this._putState(t),this.emit("update",t)}updateState(t){if(t&&"object"==typeof t){const e=this.getState();this.putState(Object.assign(Object.assign({},e),t))}else this.putState(t)}subscribe(t){this.on("update",t)}unsubscribe(t){this.removeListener("update",t)}_getState(){return this._state}_putState(t){this._state=t}}e.ObservableStore=h},676:function(t,e,r){"use strict";t.exports=function t(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var e,i,r;if(Array.isArray(a)){if((e=a.length)!=b.length)return!1;for(i=e;0!=i--;)if(!t(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((e=(r=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=e;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,r[i]))return!1;for(i=e;0!=i--;){var n=r[i];if(!t(a[n],b[n]))return!1}return!0}return a!=a&&b!=b}},677:function(t,e,r){"use strict";const n=t=>null!==t&&"object"==typeof t&&"function"==typeof t.pipe;n.writable=t=>n(t)&&!1!==t.writable&&"function"==typeof t._write&&"object"==typeof t._writableState,n.readable=t=>n(t)&&!1!==t.readable&&"function"==typeof t._read&&"object"==typeof t._readableState,n.duplex=t=>n.writable(t)&&n.readable(t),n.transform=t=>n.duplex(t)&&"function"==typeof t._transform,t.exports=n},692:function(t,e,r){var n=r(747),o=r(668);t.exports=function(t){if("string"==typeof t||"number"==typeof t){var e=new n(1),r=String(t).toLowerCase().trim(),h="0x"===r.substr(0,2)||"-0x"===r.substr(0,3),c=o(r);if("-"===c.substr(0,1)&&(c=o(c.slice(1)),e=new n(-1,10)),!(c=""===c?"0":c).match(/^-?[0-9]+$/)&&c.match(/^[0-9A-Fa-f]+$/)||c.match(/^[a-fA-F]+$/)||!0===h&&c.match(/^[0-9A-Fa-f]+$/))return new n(c,16).mul(e);if((c.match(/^-?[0-9]+$/)||""===c)&&!1===h)return new n(c,10).mul(e)}else if("object"==typeof t&&t.toString&&!t.pop&&!t.push&&t.toString(10).match(/^-?[0-9]+$/)&&(t.mul||t.dividedToIntegerBy))return new n(t.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(t)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")}},693:function(t,e,r){(function(e){var n=r(6),o=r(692),h=r(748),c=r(609),l=r(758),d=function(object){return n.isBN(object)},f=function(object){return object&&object.constructor&&"BigNumber"===object.constructor.name},m=function(t){try{return o.apply(null,arguments)}catch(e){throw new Error(e+' Given value: "'+t+'"')}},v=function(address){return!!/^(0x)?[0-9a-f]{40}$/i.test(address)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(address)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(address))||y(address))},y=function(address){address=address.replace(/^0x/i,"");for(var t=A(address.toLowerCase()).replace(/^0x/i,""),i=0;i<40;i++)if(parseInt(t[i],16)>7&&address[i].toUpperCase()!==address[i]||parseInt(t[i],16)<=7&&address[i].toLowerCase()!==address[i])return!1;return!0},w=function(t){var e="";t=(t=(t=(t=(t=h.encode(t)).replace(/^(?:\u0000)*/,"")).split("").reverse().join("")).replace(/^(?:\u0000)*/,"")).split("").reverse().join("");for(var i=0;i<t.length;i++){var r=t.charCodeAt(i).toString(16);e+=r.length<2?"0"+r:r}return"0x"+e},M=function(t){if(!t)return t;if("string"==typeof t&&!k(t))throw new Error('Given value "'+t+'" is not a valid hex string.');return m(t).toNumber()},_=function(t){if(null==t)return t;if(!isFinite(t)&&!k(t))throw new Error('Given input "'+t+'" is not a number.');var e=m(t),r=e.toString(16);return e.lt(new n(0))?"-0x"+r.substr(1):"0x"+r},x=function(t,r){if(v(t))return r?"address":"0x"+t.toLowerCase().replace(/^0x/i,"");if("boolean"==typeof t)return r?"bool":t?"0x01":"0x00";if(e.isBuffer(t))return"0x"+t.toString("hex");if("object"==typeof t&&t&&!f(t)&&!d(t))return r?"string":w(JSON.stringify(t));if("string"==typeof t){if(0===t.indexOf("-0x")||0===t.indexOf("-0X"))return r?"int256":_(t);if(0===t.indexOf("0x")||0===t.indexOf("0X"))return r?"bytes":t;if(!isFinite(t))return r?"string":w(t)}return r?t<0?"int256":"uint256":_(t)},k=function(t){return("string"==typeof t||"number"==typeof t)&&/^(-)?0x[0-9a-f]*$/i.test(t)},E=function(t){return("string"==typeof t||"number"==typeof t)&&/^(-0x|0x)?[0-9a-f]*$/i.test(t)},O="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",A=function(t){d(t)&&(t=t.toString()),k(t)&&/^0x/i.test(t.toString())?t=c.toBuffer(t):"string"==typeof t&&(t=e.from(t,"utf-8"));var r=c.bufferToHex(c.keccak256(t));return r===O?null:r};A._Hash=c.keccak256;t.exports={BN:n,isBN:d,isBigNumber:f,toBN:m,isAddress:v,isBloom:function(t){return l.isBloom(t)},isUserEthereumAddressInBloom:function(t,e){return l.isUserEthereumAddressInBloom(t,e)},isContractAddressInBloom:function(t,e){return l.isContractAddressInBloom(t,e)},isTopic:function(t){return l.isTopic(t)},isTopicInBloom:function(t,e){return l.isTopicInBloom(t,e)},isInBloom:function(t,e){return l.isInBloom(t,e)},checkAddressChecksum:y,utf8ToHex:w,hexToUtf8:function(t){if(!k(t))throw new Error('The parameter "'+t+'" must be a valid HEX string.');for(var e="",code=0,r=(t=(t=(t=(t=(t=t.replace(/^0x/i,"")).replace(/^(?:00)*/,"")).split("").reverse().join("")).replace(/^(?:00)*/,"")).split("").reverse().join("")).length,i=0;i<r;i+=2)code=parseInt(t.substr(i,2),16),e+=String.fromCharCode(code);return h.decode(e)},hexToNumber:M,hexToNumberString:function(t){if(!t)return t;if("string"==typeof t&&!k(t))throw new Error('Given value "'+t+'" is not a valid hex string.');return m(t).toString(10)},numberToHex:_,toHex:x,hexToBytes:function(t){if(t=t.toString(16),!k(t))throw new Error('Given value "'+t+'" is not a valid hex string.');t=t.replace(/^0x/i,"");for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToHex:function(t){for(var e=[],i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return"0x"+e.join("")},isHex:E,isHexStrict:k,stripHexPrefix:function(t){return 0!==t&&E(t)?t.replace(/^(-)?0x/i,"$1"):t},leftPad:function(t,e,r){var n=/^0x/i.test(t)||"number"==typeof t,o=e-(t=t.toString(16).replace(/^0x/i,"")).length+1>=0?e-t.length+1:0;return(n?"0x":"")+new Array(o).join(r||"0")+t},rightPad:function(t,e,r){var n=/^0x/i.test(t)||"number"==typeof t,o=e-(t=t.toString(16).replace(/^0x/i,"")).length+1>=0?e-t.length+1:0;return(n?"0x":"")+t+new Array(o).join(r||"0")},toTwosComplement:function(t){return"0x"+m(t).toTwos(256).toString(16,64)},sha3:A,sha3Raw:function(t){return null===(t=A(t))?O:t},toNumber:function(t){return"number"==typeof t?t:M(x(t))}}}).call(this,r(16).Buffer)},696:function(t,e,r){"use strict";var n={messageId:0,toPayload:function(t,e){if(!t)throw new Error('JSONRPC method should be specified for params: "'+JSON.stringify(e)+'"!');return n.messageId++,{jsonrpc:"2.0",id:n.messageId,method:t,params:e||[]}},isValidResponse:function(t){return Array.isArray(t)?t.every(e):e(t);function e(t){return!(!t||t.error||"2.0"!==t.jsonrpc||"number"!=typeof t.id&&"string"!=typeof t.id||void 0===t.result)}},toBatchPayload:function(t){return t.map((function(t){return n.toPayload(t.method,t.params)}))}};t.exports=n},697:function(t,e,r){(function(t){e.fetch=l(t.fetch)&&l(t.ReadableStream),e.writableStream=l(t.WritableStream),e.abortController=l(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var r;function n(){if(void 0!==r)return r;if(t.XMLHttpRequest){r=new t.XMLHttpRequest;try{r.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){r=null}}else r=null;return r}function o(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var h=void 0!==t.ArrayBuffer,c=h&&l(t.ArrayBuffer.prototype.slice);function l(t){return"function"==typeof t}e.arraybuffer=e.fetch||h&&o("arraybuffer"),e.msstream=!e.fetch&&c&&o("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&h&&o("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!n()&&l(n().overrideMimeType),e.vbArray=l(t.VBArray),r=null}).call(this,r(18))},698:function(t,e,r){(function(t,n,o){var h=r(697),c=r(7),l=r(190),d=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},f=e.IncomingMessage=function(e,r,c,d){var f=this;if(l.Readable.call(f),f._mode=c,f.headers={},f.rawHeaders=[],f.trailers={},f.rawTrailers=[],f.on("end",(function(){t.nextTick((function(){f.emit("close")}))})),"fetch"===c){if(f._fetchResponse=r,f.url=r.url,f.statusCode=r.status,f.statusMessage=r.statusText,r.headers.forEach((function(header,t){f.headers[t.toLowerCase()]=header,f.rawHeaders.push(t,header)})),h.writableStream){var m=new WritableStream({write:function(t){return new Promise((function(e,r){f._destroyed?r():f.push(new n(t))?e():f._resumeFetch=e}))},close:function(){o.clearTimeout(d),f._destroyed||f.push(null)},abort:function(t){f._destroyed||f.emit("error",t)}});try{return void r.body.pipeTo(m).catch((function(t){o.clearTimeout(d),f._destroyed||f.emit("error",t)}))}catch(t){}}var v=r.body.getReader();!function t(){v.read().then((function(e){if(!f._destroyed){if(e.done)return o.clearTimeout(d),void f.push(null);f.push(new n(e.value)),t()}})).catch((function(t){o.clearTimeout(d),f._destroyed||f.emit("error",t)}))}()}else{if(f._xhr=e,f._pos=0,f.url=e.responseURL,f.statusCode=e.status,f.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(header){var t=header.match(/^([^:]+):\s*(.*)/);if(t){var e=t[1].toLowerCase();"set-cookie"===e?(void 0===f.headers[e]&&(f.headers[e]=[]),f.headers[e].push(t[2])):void 0!==f.headers[e]?f.headers[e]+=", "+t[2]:f.headers[e]=t[2],f.rawHeaders.push(t[1],t[2])}})),f._charset="x-user-defined",!h.overrideMimeType){var y=f.rawHeaders["mime-type"];if(y){var w=y.match(/;\s*charset=([^;])(;|$)/);w&&(f._charset=w[1].toLowerCase())}f._charset||(f._charset="utf-8")}}};c(f,l.Readable),f.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},f.prototype._onXHRProgress=function(){var t=this,e=t._xhr,r=null;switch(t._mode){case"text:vbarray":if(e.readyState!==d.DONE)break;try{r=new o.VBArray(e.responseBody).toArray()}catch(t){}if(null!==r){t.push(new n(r));break}case"text":try{r=e.responseText}catch(e){t._mode="text:vbarray";break}if(r.length>t._pos){var h=r.substr(t._pos);if("x-user-defined"===t._charset){for(var c=new n(h.length),i=0;i<h.length;i++)c[i]=255&h.charCodeAt(i);t.push(c)}else t.push(h,t._charset);t._pos=r.length}break;case"arraybuffer":if(e.readyState!==d.DONE||!e.response)break;r=e.response,t.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=e.response,e.readyState!==d.LOADING||!r)break;t.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=e.response,e.readyState!==d.LOADING)break;var l=new o.MSStreamReader;l.onprogress=function(){l.result.byteLength>t._pos&&(t.push(new n(new Uint8Array(l.result.slice(t._pos)))),t._pos=l.result.byteLength)},l.onload=function(){t.push(null)},l.readAsArrayBuffer(r)}t._xhr.readyState===d.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,r(17),r(16).Buffer,r(18))},699:function(t,e){t.exports=function(){for(var t={},i=0;i<arguments.length;i++){var source=arguments[i];for(var e in source)r.call(source,e)&&(t[e]=source[e])}return t};var r=Object.prototype.hasOwnProperty},700:function(t,e,r){var n=r(673),o=r(635),h=t.exports;for(var c in n)n.hasOwnProperty(c)&&(h[c]=n[c]);function l(t){if("string"==typeof t&&(t=o.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}h.request=function(t,e){return t=l(t),n.request.call(this,t,e)},h.get=function(t,e){return t=l(t),n.get.call(this,t,e)}},701:function(t,e,r){"use strict";var n=r(608).errors,o=r(608).formatters,h=r(617),c=r(702),l=r(703).subscriptions,d=r(21),f=function(t){if(!t.call||!t.name)throw new Error('When creating a method you need to provide at least the "name" and "call" property.');this.name=t.name,this.call=t.call,this.params=t.params||0,this.inputFormatter=t.inputFormatter,this.outputFormatter=t.outputFormatter,this.transformPayload=t.transformPayload,this.extraFormatters=t.extraFormatters,this.abiCoder=t.abiCoder,this.requestManager=t.requestManager,this.accounts=t.accounts,this.defaultBlock=t.defaultBlock||"latest",this.defaultAccount=t.defaultAccount||null,this.transactionBlockTimeout=t.transactionBlockTimeout||50,this.transactionConfirmationBlocks=t.transactionConfirmationBlocks||24,this.transactionPollingTimeout=t.transactionPollingTimeout||750,this.transactionPollingInterval=t.transactionPollingInterval||1e3,this.blockHeaderTimeout=t.blockHeaderTimeout||10,this.defaultCommon=t.defaultCommon,this.defaultChain=t.defaultChain,this.defaultHardfork=t.defaultHardfork,this.handleRevert=t.handleRevert};f.prototype.setRequestManager=function(t,e){this.requestManager=t,e&&(this.accounts=e)},f.prototype.createFunction=function(t,e){var r=this.buildCall();return r.call=this.call,this.setRequestManager(t||this.requestManager,e||this.accounts),r},f.prototype.attachToObject=function(t){var e=this.buildCall();e.call=this.call;var r=this.name.split(".");r.length>1?(t[r[0]]=t[r[0]]||{},t[r[0]][r[1]]=e):t[r[0]]=e},f.prototype.getCall=function(t){return"function"==typeof this.call?this.call(t):this.call},f.prototype.extractCallback=function(t){if("function"==typeof t[t.length-1])return t.pop()},f.prototype.validateArgs=function(t){if(t.length!==this.params)throw n.InvalidNumberOfParams(t.length,this.params,this.name)},f.prototype.formatInput=function(t){var e=this;return this.inputFormatter?this.inputFormatter.map((function(r,n){return r?r.call(e,t[n]):t[n]})):t},f.prototype.formatOutput=function(t){var e=this;return Array.isArray(t)?t.map((function(t){return e.outputFormatter&&t?e.outputFormatter(t):t})):this.outputFormatter&&t?this.outputFormatter(t):t},f.prototype.toPayload=function(t){var e=this.getCall(t),r=this.extractCallback(t),n=this.formatInput(t);this.validateArgs(n);var o={method:e,params:n,callback:r};return this.transformPayload&&(o=this.transformPayload(o)),o},f.prototype._confirmTransaction=function(t,e,r){var m=this,v=!1,y=!0,w=0,M=0,_=null,x=null,k=null,E=r.params[0]&&"object"==typeof r.params[0]&&r.params[0].gas?r.params[0].gas:null,O=!!r.params[0]&&"object"==typeof r.params[0]&&r.params[0].data&&r.params[0].from&&!r.params[0].to,A=O&&r.params[0].data.length>2,S=[new f({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[o.inputBlockNumberFormatter,function(t){return!!t}],outputFormatter:o.outputBlockFormatter}),new f({name:"getTransactionReceipt",call:"eth_getTransactionReceipt",params:1,inputFormatter:[null],outputFormatter:o.outputTransactionReceiptFormatter}),new f({name:"getCode",call:"eth_getCode",params:2,inputFormatter:[o.inputAddressFormatter,o.inputDefaultBlockNumberFormatter]}),new f({name:"getTransactionByHash",call:"eth_getTransactionByHash",params:1,inputFormatter:[null],outputFormatter:o.outputTransactionFormatter}),new l({name:"subscribe",type:"eth",subscriptions:{newBlockHeaders:{subscriptionName:"newHeads",params:0,outputFormatter:o.outputBlockFormatter}}})],j={};S.forEach((t=>{t.attachToObject(j),t.requestManager=m.requestManager}));var C=function(l,f,S,C,sub){if(!S)return sub||(sub={unsubscribe:function(){clearInterval(_),clearTimeout(x)}}),(l?c.resolve(l):j.getTransactionReceipt(e)).catch((function(e){sub.unsubscribe(),v=!0,h._fireError({message:"Failed to check for transaction receipt:",data:e},t.eventEmitter,t.reject)})).then((async function(e){if(!e||!e.blockHash)throw new Error("Receipt missing or blockHash null");if(m.extraFormatters&&m.extraFormatters.receiptFormatter&&(e=m.extraFormatters.receiptFormatter(e)),t.eventEmitter.listeners("confirmation").length>0){var r;if(void 0===l||0!==M){var n=await j.getBlockByNumber("latest"),o=n?n.hash:null;f?k?(r=await j.getBlockByNumber(k.number+1))&&(k=r,t.eventEmitter.emit("confirmation",M,e,o)):(r=await j.getBlockByNumber(e.blockNumber),k=r,t.eventEmitter.emit("confirmation",M,e,o)):t.eventEmitter.emit("confirmation",M,e,o)}(f&&r||!f)&&M++,y=!1,M===m.transactionConfirmationBlocks+1&&(sub.unsubscribe(),t.eventEmitter.removeAllListeners())}return e})).then((async function(e){if(O&&!v){if(!e.contractAddress)return y&&(sub.unsubscribe(),v=!0),void h._fireError(n.NoContractAddressFoundError(e),t.eventEmitter,t.reject,null,e);var code;try{code=await j.getCode(e.contractAddress)}catch(t){}if(!code)return;!0===e.status&&A||code.length>2?(t.eventEmitter.emit("receipt",e),m.extraFormatters&&m.extraFormatters.contractDeployFormatter?t.resolve(m.extraFormatters.contractDeployFormatter(e)):t.resolve(e),y&&t.eventEmitter.removeAllListeners()):h._fireError(n.ContractCodeNotStoredError(e),t.eventEmitter,t.reject,null,e),y&&sub.unsubscribe(),v=!0}return e})).then((async function(e){if(!O&&!v){if(e.outOfGas||E&&E===e.gasUsed||!0!==e.status&&"0x1"!==e.status&&void 0!==e.status)if(JSON.stringify(e,null,2),!1===e.status||"0x0"===e.status)try{var c=null;if(!m.handleRevert||"eth_sendTransaction"!==m.call&&"eth_sendRawTransaction"!==m.call)throw!1;var l=r.params[0];if("eth_sendRawTransaction"===m.call){var f=r.params[0],w=d.parse(f);l=o.inputTransactionFormatter({data:w.data,to:w.to,from:w.from,gas:w.gasLimit.toHexString(),gasPrice:w.gasPrice.toHexString(),value:w.value.toHexString()})}if(!(c=await m.getRevertReason(l,e.blockNumber)))throw!1;h._fireError(n.TransactionRevertInstructionError(c.reason,c.signature,e),t.eventEmitter,t.reject,null,e)}catch(r){h._fireError(n.TransactionRevertedWithoutReasonError(e),t.eventEmitter,t.reject,null,e)}else h._fireError(n.TransactionOutOfGasError(e),t.eventEmitter,t.reject,null,e);else t.eventEmitter.emit("receipt",e),t.resolve(e),y&&t.eventEmitter.removeAllListeners();y&&sub.unsubscribe(),v=!0}})).catch((function(){w++,f?w-1>=m.transactionPollingTimeout&&(sub.unsubscribe(),v=!0,h._fireError(n.TransactionError("Transaction was not mined within "+m.transactionPollingTimeout+" seconds, please make sure your transaction was properly sent. Be aware that it might still be mined!"),t.eventEmitter,t.reject)):w-1>=m.transactionBlockTimeout&&(sub.unsubscribe(),v=!0,h._fireError(n.TransactionError("Transaction was not mined within "+m.transactionBlockTimeout+" blocks, please make sure your transaction was properly sent. Be aware that it might still be mined!"),t.eventEmitter,t.reject))}));sub.unsubscribe(),v=!0,h._fireError({message:"Failed to subscribe to new newBlockHeaders to confirm the transaction receipts.",data:S},t.eventEmitter,t.reject)},T=function(t){let e=!1;const r=()=>{_=setInterval(C.bind(null,t,!0),m.transactionPollingInterval)};if(!this.requestManager.provider.on)return r();j.subscribe("newBlockHeaders",(function(n,o,sub){if(e=!0,n||!o)return r();C(t,!1,n,0,sub)})),x=setTimeout((()=>{e||r()}),1e3*this.blockHeaderTimeout)}.bind(this);j.getTransactionReceipt(e).then((function(e){e&&e.blockHash?(t.eventEmitter.listeners("confirmation").length>0&&T(e),C(e,!1)):v||T()})).catch((function(){v||T()}))};var m=function(t,e){return"number"==typeof t?e.wallet[t]:t&&"object"==typeof t&&t.address&&t.privateKey?t:e.wallet[t.toLowerCase()]};function v(t,e){return new Promise(((r,n)=>{try{var o=new f({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[function(t){return t?h.toHex(t):"latest"},function(){return!1}]}).createFunction(t.requestManager),c=new f({name:"getGasPrice",call:"eth_gasPrice",params:0}).createFunction(t.requestManager);Promise.all([o(),c()]).then((t=>{const[n,o]=t;if(("0x2"===e.type||void 0===e.type)&&n&&n.baseFeePerGas){let t,o;e.gasPrice?(t=e.gasPrice,o=e.gasPrice,delete e.gasPrice):(t=e.maxPriorityFeePerGas||"0x9502F900",o=e.maxFeePerGas||h.toHex(h.toBN(n.baseFeePerGas).mul(h.toBN(2)).add(h.toBN(t)))),r({maxFeePerGas:o,maxPriorityFeePerGas:t})}else{if(e.maxPriorityFeePerGas||e.maxFeePerGas)throw Error("Network doesn't support eip-1559");r({gasPrice:o})}}))}catch(t){n(t)}}))}f.prototype.buildCall=function(){var t=this,e="eth_sendTransaction"===t.call||"eth_sendRawTransaction"===t.call,r="eth_call"===t.call,o=function(){var o=c(!e),l=t.toPayload(Array.prototype.slice.call(arguments)),d=function(c,d){var f;if(t.handleRevert&&r&&t.abiCoder&&(!c&&t.isRevertReasonString(d)?f=d.substring(10):c&&c.data&&(f=c.data.substring(10)),f)){var m=t.abiCoder.decodeParameter("string","0x"+f),v="Error(String)";return void h._fireError(n.RevertInstructionError(m,v),o.eventEmitter,o.reject,l.callback,{reason:m,signature:v})}try{d=t.formatOutput(d)}catch(t){c=t}if(d instanceof Error&&(c=d),c)return c.error&&(c=c.error),h._fireError(c,o.eventEmitter,o.reject,l.callback);l.callback&&l.callback(null,d),e?(o.eventEmitter.emit("transactionHash",d),t._confirmTransaction(o,d,l)):c||o.resolve(d)},f=function(e){var r={...l,method:"eth_sendRawTransaction",params:[e.rawTransaction]};t.requestManager.send(r,d)},y=function(t,e){var r;if(e&&e.accounts&&e.accounts.wallet&&e.accounts.wallet.length)if("eth_sendTransaction"===t.method){var n=t.params[0];if((r=m(n&&"object"==typeof n?n.from:null,e.accounts))&&r.privateKey)return delete(n=JSON.parse(JSON.stringify(n))).from,e.defaultChain&&!n.chain&&(n.chain=e.defaultChain),e.defaultHardfork&&!n.hardfork&&(n.hardfork=e.defaultHardfork),e.defaultCommon&&!n.common&&(n.common=e.defaultCommon),void e.accounts.signTransaction(n,r.privateKey).then(f).catch((function(t){if("function"==typeof o.eventEmitter.listeners&&o.eventEmitter.listeners("error").length){try{o.eventEmitter.emit("error",t)}catch(t){}o.eventEmitter.removeAllListeners(),o.eventEmitter.catch((function(){}))}o.reject(t)}))}else if("eth_sign"===t.method){var data=t.params[1];if((r=m(t.params[0],e.accounts))&&r.privateKey){var h=e.accounts.sign(data,r.privateKey);return t.callback&&t.callback(null,h.signature),void o.resolve(h.signature)}}return e.requestManager.send(t,d)};return e&&l.params[0]&&"object"==typeof l.params[0]&&void 0===l.params[0].gasPrice&&(void 0===l.params[0].maxPriorityFeePerGas||void 0===l.params[0].maxFeePerGas)?v(t,l.params[0]).then((r=>{void 0!==r.gasPrice?l.params[0].gasPrice=r.gasPrice:void 0!==r.maxPriorityFeePerGas&&void 0!==r.maxFeePerGas&&(l.params[0].maxPriorityFeePerGas=r.maxPriorityFeePerGas,l.params[0].maxFeePerGas=r.maxFeePerGas),e&&setTimeout((()=>{o.eventEmitter.emit("sending",l)}),0),y(l,t)})):(e&&setTimeout((()=>{o.eventEmitter.emit("sending",l)}),0),y(l,t)),e&&setTimeout((()=>{o.eventEmitter.emit("sent",l)}),0),o.eventEmitter};return o.method=t,o.request=this.request.bind(this),o},f.prototype.getRevertReason=function(t,e){var r=this;return new Promise((function(n,o){new f({name:"call",call:"eth_call",params:2,abiCoder:r.abiCoder,handleRevert:!0}).createFunction(r.requestManager)(t,h.numberToHex(e)).then((function(){n(!1)})).catch((function(t){t.reason?n({reason:t.reason,signature:t.signature}):o(t)}))}))},f.prototype.isRevertReasonString=function(data){return"string"==typeof data&&(data.length-2)/2%32==4&&"0x08c379a0"===data.substring(0,10)},f.prototype.request=function(){var t=this.toPayload(Array.prototype.slice.call(arguments));return t.format=this.formatOutput.bind(this),t},t.exports=f},702:function(t,e,r){"use strict";var n=r(672),o=function(t){var e,r,o=new Promise((function(){e=arguments[0],r=arguments[1]}));if(t)return{resolve:e,reject:r,eventEmitter:o};var h=new n;return o._events=h._events,o.emit=h.emit,o.on=h.on,o.once=h.once,o.off=h.off,o.listeners=h.listeners,o.addListener=h.addListener,o.removeListener=h.removeListener,o.removeAllListeners=h.removeAllListeners,{resolve:e,reject:r,eventEmitter:o}};o.resolve=function(t){var e=o(!0);return e.resolve(t),e.eventEmitter},t.exports=o},703:function(t,e,r){"use strict";var n=r(789),o=function(t){this.name=t.name,this.type=t.type,this.subscriptions=t.subscriptions||{},this.requestManager=null};o.prototype.setRequestManager=function(t){this.requestManager=t},o.prototype.attachToObject=function(t){var e=this.buildCall(),r=this.name.split(".");r.length>1?(t[r[0]]=t[r[0]]||{},t[r[0]][r[1]]=e):t[r[0]]=e},o.prototype.buildCall=function(){var t=this;return function(){t.subscriptions[arguments[0]]||console.warn("Subscription "+JSON.stringify(arguments[0])+" doesn't exist. Subscribing anyway.");var e=new n({subscription:t.subscriptions[arguments[0]]||{},requestManager:t.requestManager,type:t.type});return e.subscribe.apply(e,arguments)}},t.exports={subscriptions:o,subscription:n}},704:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r},t.exports.__esModule=!0,t.exports.default=t.exports},731:function(t,e,r){"use strict";r.r(e),r.d(e,"ConstructorFragment",(function(){return j})),r.d(e,"EventFragment",(function(){return E})),r.d(e,"Fragment",(function(){return k})),r.d(e,"FunctionFragment",(function(){return C})),r.d(e,"ParamType",(function(){return _})),r.d(e,"FormatTypes",(function(){return w})),r.d(e,"AbiCoder",(function(){return ht})),r.d(e,"defaultAbiCoder",(function(){return ct})),r.d(e,"Interface",(function(){return bt})),r.d(e,"Indexed",(function(){return vt})),r.d(e,"checkResultErrors",(function(){return L})),r.d(e,"LogDescription",(function(){return mt})),r.d(e,"TransactionDescription",(function(){return gt}));var n=r(27),o=r(1),h=r(2);const c="abi/5.0.7",l=new h.b(c),d={};let f={calldata:!0,memory:!0,storage:!0},m={calldata:!0,memory:!0};function v(t,e){if("bytes"===t||"string"===t){if(f[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&m[e])return!0;return(f[e]||"payable"===e)&&l.throwArgumentError("invalid modifier","name",e),!1}function y(object,t){for(let e in t)Object(o.d)(object,e,t[e])}const w=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),M=new RegExp(/^(.*)\[([0-9]*)\]$/);class _{constructor(t,e){t!==d&&l.throwError("use fromString",h.b.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),y(this,e);let r=this.type.match(M);y(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:_.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=w.sighash),w[t]||l.throwArgumentError("invalid format type","format",t),t===w.json){let e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(e)}let e="";return"array"===this.baseType?(e+=this.arrayChildren.format(t),e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==w.sighash&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join(t===w.full?", ":",")+")"):e+=this.type,t!==w.sighash&&(!0===this.indexed&&(e+=" indexed"),t===w.full&&this.name&&(e+=" "+this.name)),e}static from(t,e){return"string"==typeof t?_.fromString(t,e):_.fromObject(t)}static fromObject(t){return _.isParamType(t)?t:new _(d,{name:t.name||null,type:T(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(_.fromObject):null})}static fromString(t,e){return r=function(param,t){let e=param;function r(i){l.throwArgumentError(`unexpected character at position ${i}`,"param",param)}function n(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}param=param.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},h=o;for(let i=0;i<param.length;i++){let e=param[i];switch(e){case"(":h.state.allowType&&""===h.type?h.type="tuple":h.state.allowParams||r(i),h.state.allowType=!1,h.type=T(h.type),h.components=[n(h)],h=h.components[0];break;case")":delete h.state,"indexed"===h.name&&(t||r(i),h.indexed=!0,h.name=""),v(h.type,h.name)&&(h.name=""),h.type=T(h.type);let o=h;h=h.parent,h||r(i),delete o.parent,h.state.allowParams=!1,h.state.allowName=!0,h.state.allowArray=!0;break;case",":delete h.state,"indexed"===h.name&&(t||r(i),h.indexed=!0,h.name=""),v(h.type,h.name)&&(h.name=""),h.type=T(h.type);let c=n(h.parent);h.parent.components.push(c),delete h.parent,h=c;break;case" ":h.state.allowType&&""!==h.type&&(h.type=T(h.type),delete h.state.allowType,h.state.allowName=!0,h.state.allowParams=!0),h.state.allowName&&""!==h.name&&("indexed"===h.name?(t||r(i),h.indexed&&r(i),h.indexed=!0,h.name=""):v(h.type,h.name)?h.name="":h.state.allowName=!1);break;case"[":h.state.allowArray||r(i),h.type+=e,h.state.allowArray=!1,h.state.allowName=!1,h.state.readArray=!0;break;case"]":h.state.readArray||r(i),h.type+=e,h.state.readArray=!1,h.state.allowArray=!0,h.state.allowName=!0;break;default:h.state.allowType?(h.type+=e,h.state.allowParams=!0,h.state.allowArray=!0):h.state.allowName?(h.name+=e,delete h.state.allowArray):h.state.readArray?h.type+=e:r(i)}}return h.parent&&l.throwArgumentError("unexpected eof","param",param),delete o.state,"indexed"===h.name?(t||r(e.length-7),h.indexed&&r(e.length-7),h.indexed=!0,h.name=""):v(h.type,h.name)&&(h.name=""),o.type=T(o.type),o}(t,!!e),_.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(t){return!(null==t||!t._isParamType)}}function x(t,e){return function(t){t=t.trim();let e=[],r="",n=0;for(let o=0;o<t.length;o++){let h=t[o];","===h&&0===n?(e.push(r),r=""):(r+=h,"("===h?n++:")"===h&&(n--,-1===n&&l.throwArgumentError("unbalanced parenthesis","value",t)))}r&&e.push(r);return e}(t).map((param=>_.fromString(param,e)))}class k{constructor(t,e){t!==d&&l.throwError("use a static from method",h.b.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),y(this,e),this._isFragment=!0,Object.freeze(this)}static from(t){return k.isFragment(t)?t:"string"==typeof t?k.fromString(t):k.fromObject(t)}static fromObject(t){if(k.isFragment(t))return t;switch(t.type){case"function":return C.fromObject(t);case"event":return E.fromObject(t);case"constructor":return j.fromObject(t);case"fallback":case"receive":return null}return l.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?E.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?C.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?j.fromString(t.trim()):l.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!(!t||!t._isFragment)}}class E extends k{format(t){if(t||(t=w.sighash),w[t]||l.throwArgumentError("invalid format type","format",t),t===w.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((input=>JSON.parse(input.format(t))))});let e="";return t!==w.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((input=>input.format(t))).join(t===w.full?", ":",")+") ",t!==w.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}static from(t){return"string"==typeof t?E.fromString(t):E.fromObject(t)}static fromObject(t){if(E.isEventFragment(t))return t;"event"!==t.type&&l.throwArgumentError("invalid event object","value",t);const e={name:N(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(_.fromObject):[],type:"event"};return new E(d,e)}static fromString(t){let e=t.match(I);e||l.throwArgumentError("invalid event string","value",t);let r=!1;return e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":r=!0;break;case"":break;default:l.warn("unknown modifier: "+t)}})),E.fromObject({name:e[1].trim(),anonymous:r,inputs:x(e[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&"event"===t.type}}function O(t,e){e.gas=null;let r=t.split("@");return 1!==r.length?(r.length>2&&l.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||l.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=n.a.from(r[1]),r[0]):t}function A(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function S(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&l.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&l.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||l.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&l.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&l.throwArgumentError("unable to determine stateMutability","value",t),e}class j extends k{format(t){if(t||(t=w.sighash),w[t]||l.throwArgumentError("invalid format type","format",t),t===w.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payble:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((input=>JSON.parse(input.format(t))))});t===w.sighash&&l.throwError("cannot format a constructor for sighash",h.b.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let e="constructor("+this.inputs.map((input=>input.format(t))).join(t===w.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}static from(t){return"string"==typeof t?j.fromString(t):j.fromObject(t)}static fromObject(t){if(j.isConstructorFragment(t))return t;"constructor"!==t.type&&l.throwArgumentError("invalid constructor object","value",t);let e=S(t);e.constant&&l.throwArgumentError("constructor cannot be constant","value",t);const r={name:null,type:t.type,inputs:t.inputs?t.inputs.map(_.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?n.a.from(t.gas):null};return new j(d,r)}static fromString(t){let e={type:"constructor"},r=(t=O(t,e)).match(I);return r&&"constructor"===r[1].trim()||l.throwArgumentError("invalid constructor string","value",t),e.inputs=x(r[2].trim(),!1),A(r[3].trim(),e),j.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&"constructor"===t.type}}class C extends j{format(t){if(t||(t=w.sighash),w[t]||l.throwArgumentError("invalid format type","format",t),t===w.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payble:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((input=>JSON.parse(input.format(t)))),ouputs:this.outputs.map((output=>JSON.parse(output.format(t))))});let e="";return t!==w.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((input=>input.format(t))).join(t===w.full?", ":",")+") ",t!==w.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((output=>output.format(t))).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}static from(t){return"string"==typeof t?C.fromString(t):C.fromObject(t)}static fromObject(t){if(C.isFunctionFragment(t))return t;"function"!==t.type&&l.throwArgumentError("invalid function object","value",t);let e=S(t);const r={type:t.type,name:N(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(_.fromObject):[],outputs:t.outputs?t.outputs.map(_.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?n.a.from(t.gas):null};return new C(d,r)}static fromString(t){let e={type:"function"},r=(t=O(t,e)).split(" returns ");r.length>2&&l.throwArgumentError("invalid function string","value",t);let n=r[0].match(I);if(n||l.throwArgumentError("invalid function signature","value",t),e.name=n[1].trim(),e.name&&N(e.name),e.inputs=x(n[2],!1),A(n[3].trim(),e),r.length>1){let n=r[1].match(I);""==n[1].trim()&&""==n[3].trim()||l.throwArgumentError("unexpected tokens","value",t),e.outputs=x(n[2],!1)}else e.outputs=[];return C.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&"function"===t.type}}function T(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const P=new RegExp("^[A-Za-z_][A-Za-z0-9_]*$");function N(t){return t&&t.match(P)||l.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const I=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");var R=r(0);const B=new h.b(c);function L(t){const e=[],r=function(path,object){if(Array.isArray(object))for(let t in object){const n=path.slice();n.push(t);try{r(n,object[t])}catch(t){e.push({path:n,error:t})}}};return r([],t),e}class F{constructor(t,e,r,n){this.name=t,this.type=e,this.localName=r,this.dynamic=n}_throwError(t,e){B.throwArgumentError(t,this.localName,e)}}class D{constructor(t){Object(o.d)(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return Object(R.c)(this._data)}get length(){return this._dataLength}_writeData(data){return this._data.push(data),this._dataLength+=data.length,data.length}appendWriter(t){return this._writeData(Object(R.b)(t._data))}writeBytes(t){let e=Object(R.a)(t);const r=e.length%this.wordSize;return r&&(e=Object(R.b)([e,this._padding.slice(r)])),this._writeData(e)}_getValue(t){let e=Object(R.a)(n.a.from(t));return e.length>this.wordSize&&B.throwError("value out-of-bounds",h.b.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=Object(R.b)([this._padding.slice(e.length%this.wordSize),e])),e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,e=>{this._data[t]=this._getValue(e)}}}class H{constructor(data,t,e,r){Object(o.d)(this,"_data",Object(R.a)(data)),Object(o.d)(this,"wordSize",t||32),Object(o.d)(this,"_coerceFunc",e),Object(o.d)(this,"allowLoose",r),this._offset=0}get data(){return Object(R.i)(this._data)}get consumed(){return this._offset}static coerce(t,e){let r=t.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(e=e.toNumber()),e}coerce(t,e){return this._coerceFunc?this._coerceFunc(t,e):H.coerce(t,e)}_peekBytes(t,e,r){let n=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+e<=this._data.length?n=e:B.throwError("data out-of-bounds",h.b.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(t){return new H(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let r=this._peekBytes(0,t,!!e);return this._offset+=r.length,r.slice(0,t)}readValue(){return n.a.from(this.readBytes(this.wordSize))}}var U=r(11);class V extends F{constructor(t){super("address","address",t,!1)}encode(t,e){try{Object(U.a)(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)}decode(t){return Object(U.a)(Object(R.h)(t.readValue().toHexString(),20))}}class z extends F{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const W=new h.b(c);function G(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map((e=>{const n=e.localName;return n||W.throwError("cannot encode object for signature with missing names",h.b.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]&&W.throwError("cannot encode object for signature with duplicate names",h.b.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]=!0,r[n]}))}else W.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&W.throwArgumentError("types/value length mismatch","tuple",r);let o=new D(t.wordSize),c=new D(t.wordSize),l=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=c.length;t.encode(c,r);let n=o.writeUpdatableValue();l.push((t=>{n(t+e)}))}else t.encode(o,r)})),l.forEach((t=>{t(o.length)}));let d=t.appendWriter(o);return d+=t.appendWriter(c),d}function Z(t,e){let r=[],n=t.subReader(0);e.forEach((e=>{let o=null;if(e.dynamic){let r=t.readValue(),c=n.subReader(r.toNumber());try{o=e.decode(c)}catch(t){if(t.code===h.b.errors.BUFFER_OVERRUN)throw t;o=t,o.baseType=e.name,o.name=e.localName,o.type=e.type}}else try{o=e.decode(t)}catch(t){if(t.code===h.b.errors.BUFFER_OVERRUN)throw t;o=t,o.baseType=e.name,o.name=e.localName,o.type=e.type}null!=o&&r.push(o)}));const o=e.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});e.forEach(((t,e)=>{let n=t.localName;if(!n||1!==o[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const h=r[e];h instanceof Error?Object.defineProperty(r,n,{get:()=>{throw h}}):r[n]=h}));for(let i=0;i<r.length;i++){const t=r[i];t instanceof Error&&Object.defineProperty(r,i,{get:()=>{throw t}})}return Object.freeze(r)}class K extends F{constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),this.coder=t,this.length=e}encode(t,e){Array.isArray(e)||this._throwError("expected array value",e);let r=this.length;-1===r&&(r=e.length,t.writeValue(e.length)),W.checkArgumentCount(e.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let i=0;i<e.length;i++)n.push(this.coder);return G(t,n,e)}decode(t){let e=this.length;-1===e&&(e=t.readValue().toNumber());let r=[];for(let i=0;i<e;i++)r.push(new z(this.coder));return t.coerce(this.name,Z(t,r))}}class J extends F{constructor(t){super("bool","bool",t,!1)}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class X extends F{constructor(t,e){super(t,t,e,!0)}encode(t,e){e=Object(R.a)(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class $ extends X{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,Object(R.i)(super.decode(t)))}}class Y extends F{constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),this.size=t}encode(t,e){let data=Object(R.a)(e);return data.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(data)}decode(t){return t.coerce(this.name,Object(R.i)(t.readBytes(this.size)))}}class Q extends F{constructor(t){super("null","",t,!1)}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}var tt=r(68);class et extends F{constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),this.size=t,this.signed=e}encode(t,e){let r=n.a.from(e),o=tt.b.mask(8*t.wordSize);if(this.signed){let t=o.mask(8*this.size-1);(r.gt(t)||r.lt(t.add(tt.e).mul(tt.d)))&&this._throwError("value out-of-bounds",e)}else(r.lt(tt.h)||r.gt(o.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(r)}decode(t){let e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}var nt=r(64);class it extends X{constructor(t){super("string",t)}encode(t,e){return super.encode(t,Object(nt.f)(e))}decode(t){return Object(nt.h)(super.decode(t))}}class ot extends F{constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)}));super("tuple","tuple("+n.join(",")+")",e,r),this.coders=t}encode(t,e){return G(t,this.coders,e)}decode(t){return t.coerce(this.name,Z(t,this.coders))}}const st=new h.b(c),at=new RegExp(/^bytes([0-9]*)$/),ut=new RegExp(/^(u?int)([0-9]*)$/);class ht{constructor(t){st.checkNew(new.target,ht),Object(o.d)(this,"coerceFunc",t||null)}_getCoder(param){switch(param.baseType){case"address":return new V(param.name);case"bool":return new J(param.name);case"string":return new it(param.name);case"bytes":return new $(param.name);case"array":return new K(this._getCoder(param.arrayChildren),param.arrayLength,param.name);case"tuple":return new ot((param.components||[]).map((component=>this._getCoder(component))),param.name);case"":return new Q(param.name)}let t=param.type.match(ut);if(t){let e=parseInt(t[2]||"256");return(0===e||e>256||e%8!=0)&&st.throwArgumentError("invalid "+t[1]+" bit length","param",param),new et(e/8,"int"===t[1],param.name)}if(t=param.type.match(at),t){let e=parseInt(t[1]);return(0===e||e>32)&&st.throwArgumentError("invalid bytes length","param",param),new Y(e,param.name)}return st.throwArgumentError("invalid type","type",param.type)}_getWordSize(){return 32}_getReader(data,t){return new H(data,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new D(this._getWordSize())}encode(t,e){t.length!==e.length&&st.throwError("types/values length mismatch",h.b.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const r=t.map((t=>this._getCoder(_.from(t)))),n=new ot(r,"_"),o=this._getWriter();return n.encode(o,e),o.data}decode(t,data,e){const r=t.map((t=>this._getCoder(_.from(t))));return new ot(r,"_").decode(this._getReader(Object(R.a)(data),e))}}const ct=new ht;var lt=r(96),ft=r(12);const pt=new h.b(c);class mt extends o.a{}class gt extends o.a{}class vt extends o.a{static isIndexed(t){return!(!t||!t._isIndexed)}}function yt(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class bt{constructor(t){pt.checkNew(new.target,bt);let e=[];e="string"==typeof t?JSON.parse(t):t,Object(o.d)(this,"fragments",e.map((t=>k.from(t))).filter((t=>null!=t))),Object(o.d)(this,"_abiCoder",Object(o.e)(new.target,"getAbiCoder")()),Object(o.d)(this,"functions",{}),Object(o.d)(this,"errors",{}),Object(o.d)(this,"events",{}),Object(o.d)(this,"structs",{}),this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":return this.deploy?void pt.warn("duplicate definition - constructor"):void Object(o.d)(this,"deploy",t);case"function":e=this.functions;break;case"event":e=this.events;break;default:return}let r=t.format();e[r]?pt.warn("duplicate definition - "+r):e[r]=t})),this.deploy||Object(o.d)(this,"deploy",j.from({payable:!1,type:"constructor"})),Object(o.d)(this,"_isInterface",!0)}format(t){t||(t=w.full),t===w.sighash&&pt.throwArgumentError("interface does not support formatting sighash","format",t);const e=this.fragments.map((e=>e.format(t)));return t===w.json?JSON.stringify(e.map((t=>JSON.parse(t)))):e}static getAbiCoder(){return ct}static getAddress(address){return Object(U.a)(address)}static getSighash(t){return Object(R.e)(Object(lt.a)(t.format()),0,4)}static getEventTopic(t){return Object(lt.a)(t.format())}getFunction(t){if(Object(R.l)(t)){for(const e in this.functions)if(t===this.getSighash(e))return this.functions[e];pt.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));return 0===r.length?pt.throwArgumentError("no matching function","name",e):r.length>1&&pt.throwArgumentError("multiple matching functions","name",e),this.functions[r[0]]}const e=this.functions[C.fromString(t).format()];return e||pt.throwArgumentError("no matching function","signature",t),e}getEvent(t){if(Object(R.l)(t)){const e=t.toLowerCase();for(const t in this.events)if(e===this.getEventTopic(t))return this.events[t];pt.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.events).filter((t=>t.split("(")[0]===e));return 0===r.length?pt.throwArgumentError("no matching event","name",e):r.length>1&&pt.throwArgumentError("multiple matching events","name",e),this.events[r[0]]}const e=this.events[E.fromString(t).format()];return e||pt.throwArgumentError("no matching event","signature",t),e}getSighash(t){return"string"==typeof t&&(t=this.getFunction(t)),Object(o.e)(this.constructor,"getSighash")(t)}getEventTopic(t){return"string"==typeof t&&(t=this.getEvent(t)),Object(o.e)(this.constructor,"getEventTopic")(t)}_decodeParams(t,data){return this._abiCoder.decode(t,data)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeFunctionData(t,data){"string"==typeof t&&(t=this.getFunction(t));const e=Object(R.a)(data);return Object(R.i)(e.slice(0,4))!==this.getSighash(t)&&pt.throwArgumentError(`data signature does not match function ${t.name}.`,"data",Object(R.i)(e)),this._decodeParams(t.inputs,e.slice(4))}encodeFunctionData(t,e){return"string"==typeof t&&(t=this.getFunction(t)),Object(R.i)(Object(R.b)([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,data){"string"==typeof t&&(t=this.getFunction(t));let e=Object(R.a)(data),r=null,n=null;switch(e.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,e)}catch(t){}break;case 4:"0x08c379a0"===Object(R.i)(e.slice(0,4))&&(n="Error(string)",r=this._abiCoder.decode(["string"],e.slice(4))[0])}return pt.throwError("call revert exception",h.b.errors.CALL_EXCEPTION,{method:t.format(),errorSignature:n,errorArgs:[r],reason:r})}encodeFunctionResult(t,e){return"string"==typeof t&&(t=this.getFunction(t)),Object(R.i)(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){"string"==typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&pt.throwError("too many arguments for "+t.format(),h.b.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});let r=[];t.anonymous||r.push(this.getEventTopic(t));const n=(param,t)=>"string"===param.type?Object(lt.a)(t):"bytes"===param.type?Object(ft.a)(Object(R.i)(t)):("address"===param.type&&this._abiCoder.encode(["address"],[t]),Object(R.h)(Object(R.i)(t),32));for(e.forEach(((e,o)=>{let param=t.inputs[o];param.indexed?null==e?r.push(null):"array"===param.baseType||"tuple"===param.baseType?pt.throwArgumentError("filtering with tuples or arrays not supported","contract."+param.name,e):Array.isArray(e)?r.push(e.map((t=>n(param,t)))):r.push(n(param,e)):null!=e&&pt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+param.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){"string"==typeof t&&(t=this.getEvent(t));const r=[],n=[],o=[];return t.anonymous||r.push(this.getEventTopic(t)),e.length!==t.inputs.length&&pt.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach(((param,t)=>{const h=e[t];if(param.indexed)if("string"===param.type)r.push(Object(lt.a)(h));else if("bytes"===param.type)r.push(Object(ft.a)(h));else{if("tuple"===param.baseType||"array"===param.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([param.type],[h]))}else n.push(param),o.push(h)})),{data:this._abiCoder.encode(n,o),topics:r}}decodeEventLog(t,data,e){if("string"==typeof t&&(t=this.getEvent(t)),null!=e&&!t.anonymous){let r=this.getEventTopic(t);Object(R.l)(e[0],32)&&e[0].toLowerCase()===r||pt.throwError("fragment/topic mismatch",h.b.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:r,value:e[0]}),e=e.slice(1)}let r=[],n=[],o=[];t.inputs.forEach(((param,t)=>{param.indexed?"string"===param.type||"bytes"===param.type||"tuple"===param.baseType||"array"===param.baseType?(r.push(_.fromObject({type:"bytes32",name:param.name})),o.push(!0)):(r.push(param),o.push(!1)):(n.push(param),o.push(!1))}));let c=null!=e?this._abiCoder.decode(r,Object(R.b)(e)):null,l=this._abiCoder.decode(n,data,!0),d=[],f=0,m=0;t.inputs.forEach(((param,t)=>{if(param.indexed)if(null==c)d[t]=new vt({_isIndexed:!0,hash:null});else if(o[t])d[t]=new vt({_isIndexed:!0,hash:c[m++]});else try{d[t]=c[m++]}catch(e){d[t]=e}else try{d[t]=l[f++]}catch(e){d[t]=e}if(param.name&&null==d[param.name]){const e=d[t];e instanceof Error?Object.defineProperty(d,param.name,{get:()=>{throw yt(`property ${JSON.stringify(param.name)}`,e)}}):d[param.name]=e}}));for(let i=0;i<d.length;i++){const t=d[i];t instanceof Error&&Object.defineProperty(d,i,{get:()=>{throw yt(`index ${i}`,t)}})}return Object.freeze(d)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new gt({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:n.a.from(t.value||"0")}):null}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new mt({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}static isInterface(t){return!(!t||!t._isInterface)}}},734:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return Mt}));var n=r(735),o=r.n(n),h=r(5),c=r.n(h),l=r(737),d=r(191),f=r(34),m=r(791),v=r(69),y=r.n(v),w=r(807),M=r(189),_=r(676),x=r.n(_),k=r(677),E=r(174),O=r.n(E),A=r(83),S=r.n(A),j=r(124),C=r.n(j),T=r(42);const P="google",N="facebook",I="twitch",R="reddit",B="discord",L={[P]:"tkey-google",[N]:"tkey-facebook",[I]:"tkey-twitch",[R]:"tkey-reddit",[B]:"tkey-discord"},F={PRODUCTION:"production",DEVELOPMENT:"development",BINANCE:"binance",TESTING:"testing",LRC:"lrc",BETA:"beta"},D={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"};var H={supportedVerifierList:[P,R,B],paymentProviders:{["rampnetwork"]:{line1:"Debit Card/ Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000€/purchase, 20,000€/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:["GBP","EUR","USD"],validCryptoCurrencies:["ETH","DAI","USDC","BSC_BNB"],includeFees:!0,enforceMax:!1},["moonpay"]:{line1:"Credit / Debit Card / Apple Pay",line2:"4.5% or 5 USD",line3:"2,000€/day, 10,000€/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:["USD","EUR","GBP","AUD","CAD","SGD","RUB"],validCryptoCurrencies:["ETH","DAI","TUSD","USDC","USDT","BNB_BSC","BUSD_BSC"],includeFees:!0,enforceMax:!1},["wyre"]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30¢ or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:["USD","AUD","CAD","GBP","EUR"],validCryptoCurrencies:["ETH","DAI","USDC","USDT"],includeFees:!1,enforceMax:!1},["xanpool"]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ VietelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:["SGD","HKD","MYR","PHP","INR","VND","THB","IDR"],validCryptoCurrencies:["ETH","USDT"],includeFees:!0,sell:!0,enforceMax:!1},["mercuryo"]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000€/day, 25,000€/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:["USD","EUR","RUB","TRY","GBP","UAH"],validCryptoCurrencies:["ETH","DAI","BAT","USDT","OKB"],includeFees:!0,enforceMax:!1},["transak"]:{line1:"Credit/ Debit Card/ <br/>Bank Transfer (sepa/gbp)",line2:"0.99% - 5.5% or 5 USD",line3:"500€/day",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:20,maxOrderValue:500,validCurrencies:["USD","EUR","GBP","AUD","CAD","SGD"],validCryptoCurrencies:["ETH","DAI","USDC","USDT"],includeFees:!0,enforceMax:!1}},api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}},prodTorusUrl:"",localStorageKeyPrefix:"torus-"};const U=t=>new Promise(((e,r)=>{null!=window.document.body?Promise.resolve(t()).then(e).catch(r):window.document.addEventListener("DOMContentLoaded",(()=>{Promise.resolve(t()).then(e).catch(r)}))})),V=html=>{const template=window.document.createElement("template"),t=html.trim();return template.innerHTML=t,template.content.firstChild},z=(t,e,r)=>{const n=o=>{r(o),t.removeListener(e,n)};t.on(e,n)};async function W(){return new Promise((t=>{"loading"!==document.readyState?t():function(t,e,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),h=3;h<n;h++)o[h-3]=arguments[h];const c=()=>{r(...o),t.removeEventListener(e,c)};t.addEventListener(e,c)}(document,"DOMContentLoaded",t)}))}var G=S.a.getLogger("torus-embed"),Z={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>"Torus: The Torus Ethereum provider does not support synchronous methods like ".concat(t," without a callback parameter."),invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(t,e)=>"Invalid options. Received: { maxEventListeners: ".concat(t,", shouldSendMetadata: ").concat(e," }"),invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>"'args.logger' must include required method '".concat(t,"'.")},info:{connected:t=>'Torus: Connected to chain with ID "'.concat(t,'".')},warnings:{enableDeprecation:'Torus: ""ethereum.enable()" is deprecated and may be removed in the future. Please use "ethereum.send("eth_requestAccounts")" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',sendDeprecation:'Torus: "ethereum.send(...)" is deprecated and may be removed in the future. Please use "ethereum.sendAsync(...)" or "ethereum.request(...)" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',events:{close:'Torus: The event "close" is deprecated and may be removed in the future. Please use "disconnect" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',data:'Torus: The event "data" is deprecated and will be removed in the future.Use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',networkChanged:'Torus: The event "networkChanged" is deprecated and may be removed in the future. Please use "chainChanged" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',notification:'Torus: The event "notification" is deprecated and may be removed in the future. Please use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'},publicConfigStore:'Torus: The property "publicConfigStore" is deprecated and WILL be removed in the future.'}};const{paymentProviders:K}=H;function J(t,e,r){let n='MetaMask: Lost connection to "'.concat(t,'".');null!=e&&e.stack&&(n+="\n".concat(e.stack)),G.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const X=()=>Math.random().toString(36).slice(2),$=async(t,e)=>{let r,n;const o="1.22.2";let h=e.version||o;try{if(("binance"===t||"production"===t)&&!e.version){let t;t=H.prodTorusUrl?{data:H.prodTorusUrl}:await Object(d.b)("".concat(H.api,"/latestversion?name=@toruslabs/torus-embed&version=").concat(o),{},{useAPIKey:!0}),h=t.data,H.prodTorusUrl=t.data}}catch(t){G.error(t,"unable to fetch latest version")}switch(G.info("version used: ",h),t){case"binance":r="https://binance.tor.us/v".concat(h),n="info";break;case"testing":r="https://testing.tor.us",n="debug";break;case"lrc":r="https://lrc.tor.us",n="debug";break;case"beta":r="https://beta.tor.us",n="debug";break;case"development":r="http://localhost:4050",n="debug";break;default:r="https://app.tor.us/v".concat(h),n="error"}return{torusUrl:r,logLevel:n}},Y=()=>{let t=window.navigator.language||"en-US";const e=t.split("-");return t=Object.prototype.hasOwnProperty.call(H.translations,e[0])?e[0]:"en",t},Q=["eth_subscription"],tt=()=>{},et="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375",nt="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";function it(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}f.e.defaultMaxListeners=100;const ot=function(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n,o)=>n||o.error?e(n||o.error):!r||Array.isArray(o)?t(o):t(o.result)};class st extends f.e{constructor(t){let{maxEventListeners:e=100,shouldSendMetadata:r=!0,jsonRpcStreamName:n="provider"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),c()(this,"chainId",void 0),c()(this,"selectedAddress",void 0),c()(this,"_rpcEngine",void 0),c()(this,"networkVersion",void 0),c()(this,"shouldSendMetadata",void 0),c()(this,"isTorus",void 0),c()(this,"_publicConfigStore",void 0),c()(this,"tryPreopenHandle",void 0),c()(this,"enable",void 0),c()(this,"_state",void 0),c()(this,"_jsonRpcConnection",void 0),c()(this,"_sentWarnings",{enable:!1,experimentalMethods:!1,send:!1,publicConfigStore:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}}),!Object(k.duplex)(t))throw new Error(Z.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(e),this._state=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?it(Object(source),!0).forEach((function(e){c()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):it(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},st._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=r,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new f.c;O()(t,o,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._publicConfigStore=new w.ObservableStore({storageKey:"Metamask-Config"}),O()(o.createStream("publicConfig"),Object(w.storeAsStream)(this._publicConfigStore),J.bind(this,"MetaMask PublicConfigStore")),o.ignoreStream("phishing"),this.on("connect",(()=>{this._state.isConnected=!0}));const h=Object(f.i)();O()(h.stream,o.createStream(n),h.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const l=new f.b;l.push(Object(f.g)()),l.push(((t,e,r)=>{"string"==typeof t.method&&t.method||(e.error=M.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:t})),r((t=>{const{error:r}=e;return r?(G.error("MetaMask - RPC Error: ".concat(r.message),r),t()):t()}))})),l.push(h.middleware),this._rpcEngine=l,h.events.on("notification",(t=>{const{method:e,params:r}=t;"wallet_accountsChanged"===e?this._handleAccountsChanged(r):"wallet_unlockStateChanged"===e?this._handleUnlockStateChanged(r):"wallet_chainChanged"===e?this._handleChainChanged(r):Q.includes(t.method)&&(this.emit("data",t),this.emit("notification",r.result),this.emit("message",{type:e,data:r}))}))}get publicConfigStore(){return this._sentWarnings.publicConfigStore||(G.warn(Z.warnings.publicConfigStore),this._sentWarnings.publicConfigStore=!0),this._publicConfigStore}isConnected(){return this._state.isConnected}async request(t){if(!t||"object"!=typeof t||Array.isArray(t))throw M.ethErrors.rpc.invalidRequest({message:Z.errors.invalidRequestArgs(),data:t});const{method:e,params:r}=t;if("string"!=typeof e||0===e.length)throw M.ethErrors.rpc.invalidRequest({message:Z.errors.invalidRequestMethod(),data:t});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw M.ethErrors.rpc.invalidRequest({message:Z.errors.invalidRequestParams(),data:t});return new Promise(((t,n)=>{this._rpcRequest({method:e,params:r},ot(t,n))}))}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}async _initializeState(){try{const{accounts:t,chainId:e,isUnlocked:r,networkVersion:n}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId:e}),this._handleChainChanged({chainId:e,networkVersion:n}),this._handleUnlockStateChanged({accounts:t,isUnlocked:r}),this._handleAccountsChanged(t)}catch(t){G.error("MetaMask: Failed to get initial state. Please report this bug.",t)}finally{G.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;const o=t;if(!Array.isArray(o))if(o.jsonrpc||(o.jsonrpc="2.0"),"eth_accounts"===o.method||"eth_requestAccounts"===o.method)n=(t,n)=>{this._handleAccountsChanged(n.result||[],"eth_accounts"===o.method,r),e(t,n)};else if("wallet_getProviderState"===o.method)return void this._rpcEngine.handle(t,n);this.tryPreopenHandle(o,n)}send(t,e){return this._sentWarnings.send||(G.warn(Z.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!=typeof t||e&&!Array.isArray(e)?t&&"object"==typeof t&&"function"==typeof e?this._rpcRequest(t,e):this._sendSync(t):new Promise(((r,n)=>{try{this._rpcRequest({method:t,params:e},ot(r,n,!1))}catch(t){n(t)}}))}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(t,tt),e=!0;break;case"net_version":e=this.networkVersion||null;break;default:throw new Error(Z.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),G.debug(Z.info.connected(t)))}_handleDisconnect(t,e){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){let r;this._state.isConnected=!1,t?(r=new M.EthereumRpcError(1013,e||Z.errors.disconnected()),G.debug(r)):(r=new M.EthereumRpcError(1011,e||Z.errors.permanentlyDisconnected()),G.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleStreamDisconnect(t,e){J(t,e,this),this._handleDisconnect(!1,e?e.message:void 0)}_handleAccountsChanged(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t;Array.isArray(n)||(G.error("MetaMask: Received non-array accounts parameter. Please report this bug.",n),n=[]);for(const e of t)if("string"!=typeof e){G.error("MetaMask: Received non-string account. Please report this bug.",t),n=[];break}x()(this._state.accounts,n)||(e&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&G.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',n),this._state.accounts=n,this.emit("accountsChanged",n)),this.selectedAddress!==n[0]&&(this.selectedAddress=n[0]||null)}_handleChainChanged(){let{chainId:t,networkVersion:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&e?"loading"===e?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId))):G.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:t,networkVersion:e})}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"==typeof e?e!==this._state.isUnlocked&&(this._state.isUnlocked=e,this._handleAccountsChanged(t||[])):G.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:e})}_warnOfDeprecation(t){!1===this._sentWarnings.events[t]&&(G.warn(Z.warnings.events[t]),this._sentWarnings.events[t]=!0)}}c()(st,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const at=(t,data)=>{const e={};return t.algorithms.forEach((t=>{e[t]=C()(t).update(data,"utf8").digest("base64")})),e},main=(t,data)=>{const e=(t=>({algorithms:t.algorithms||["sha256"],delimiter:t.delimiter||" ",full:t.full||!1}))(t),r={hashes:at(e,data),integrity:void 0};return r.integrity=((t,e)=>{let output="";return output+=Object.keys(e.hashes).map((t=>"".concat(t,"-").concat(e.hashes[t]))).join(t.delimiter),output})(e,r),e.full?r:r.integrity};class ut extends T.EventEmitter{constructor(t){let{url:e,target:r,features:n}=t;super(),c()(this,"url",void 0),c()(this,"target",void 0),c()(this,"features",void 0),c()(this,"window",void 0),c()(this,"windowTimer",void 0),c()(this,"iClosedWindow",void 0),this.url=e,this.target=r||"_blank",this.features=n||function(){const t=void 0!==window.screenLeft?window.screenLeft:window.screenX,e=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,o=Math.abs((r-1200)/2/1+t),h=Math.abs((n-700)/2/1+e);return"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(700,",width=").concat(1200,",top=").concat(h,",left=").concat(o)}(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval((()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)}),500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),null!==(t=this.window)&&void 0!==t&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}function ht(t){return new Promise(((e,r)=>{try{const img=document.createElement("img");img.onload=()=>e(!0),img.onerror=()=>e(!1),img.src=t}catch(t){r(t)}}))}const ct=t=>{const{document:e}=t,r=e.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=e.querySelector('head > meta[name="title"]');return n?n.content:e.title&&e.title.length>0?e.title:t.location.hostname};async function lt(t){const{document:e}=t;let r=e.querySelector('head > link[rel="shortcut icon"]');return r&&await ht(r.href)?r.href:(r=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find((t=>Boolean(t.href))),r&&await ht(r.href)?r.href:null)}async function ft(t){try{const e=await(async()=>({name:ct(window),icon:await lt(window)}))();t.handle({jsonrpc:"2.0",id:X(),method:"wallet_sendDomainMetadata",params:e},tt)}catch(t){G.error({message:Z.errors.sendSiteMetadata(),originalError:t})}}const pt=["host","chainId","networkName"];function mt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function gt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?mt(Object(source),!0).forEach((function(e){c()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):mt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}const vt={[P]:!0,[N]:!0,[R]:!0,[I]:!0,[B]:!0},yt="sha384-zFtyGD1XuBBFsoWsWz86WRRQIVjvJ09NSSfLCRwpEjER3OOdUm93Q9aVddcJz/Al",bt=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt"],wt=function(t){let e;try{e=window[t];const r="__storage_test__";return e.setItem(r,r),e.removeItem(r),!0}catch(t){return t&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}("localStorage");!async function(){try{if("undefined"==typeof document)return;const t=document.createElement("link"),{torusUrl:e}=await $("production",{check:!1,hash:yt,version:""});t.href="".concat(e,"/popup"),t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){G.warn(t)}}();class Mt{constructor(){let{buttonPosition:t=D.BOTTOM_LEFT,modalZIndex:e=99999,apiKey:r="torus-default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,"buttonPosition",D.BOTTOM_LEFT),c()(this,"torusUrl",void 0),c()(this,"torusIframe",void 0),c()(this,"styleLink",void 0),c()(this,"isLoggedIn",void 0),c()(this,"isInitialized",void 0),c()(this,"torusWidgetVisibility",void 0),c()(this,"torusAlert",void 0),c()(this,"nodeDetailManager",void 0),c()(this,"torusJs",void 0),c()(this,"apiKey",void 0),c()(this,"modalZIndex",void 0),c()(this,"alertZIndex",void 0),c()(this,"torusAlertContainer",void 0),c()(this,"isIframeFullScreen",void 0),c()(this,"whiteLabel",void 0),c()(this,"requestedVerifier",void 0),c()(this,"currentVerifier",void 0),c()(this,"embedTranslations",void 0),c()(this,"ethereum",void 0),c()(this,"provider",void 0),c()(this,"communicationMux",void 0),c()(this,"isLoginCallback",void 0),c()(this,"dappStorageKey",void 0),c()(this,"paymentProviders",H.paymentProviders),c()(this,"loginHint",""),c()(this,"useWalletConnect",void 0),this.buttonPosition=t,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.nodeDetailManager=new l.a,this.torusJs=new m.a({metadataHost:"https://metadata.tor.us",allowHost:"https://signer.tor.us/api/allow"}),this.apiKey=r,m.a.setAPIKey(r),Object(d.f)(r),this.modalZIndex=e,this.alertZIndex=e+1e3,this.isIframeFullScreen=!1,this.dappStorageKey=""}async init(){let{buildEnv:t=F.PRODUCTION,enableLogging:e=!1,enabledVerifiers:r=vt,network:n={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig:o={},showTorusButton:h=!0,integrity:c={check:!1,hash:yt,version:""},whiteLabel:l,skipTKey:d=!1,useLocalStorage:f=!1,useWalletConnect:m=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:v,logLevel:w}=await $(t,c);G.info(v,"url loaded"),this.torusUrl=v,this.whiteLabel=l,this.useWalletConnect=m,G.setDefaultLevel(w),e?G.enableAll():G.disableAll(),this.torusWidgetVisibility=h;let M="";if(wt&&f){const t="".concat(H.localStorageKeyPrefix).concat(window.location.hostname),e=window.localStorage.getItem(t);if(e)M=e;else{const e="torus-app-".concat(X());window.localStorage.setItem(t,e),M=e}}this.dappStorageKey=M;const _=new URL(v);_.pathname.endsWith("/")?_.pathname+="popup":_.pathname+="/popup",M&&(_.hash="#dappStorageKey=".concat(M)),this.torusIframe=V('<iframe\n        id="torusIframe"\n        allow='.concat(m?"camera":"",'\n        class="torusIframe"\n        src="').concat(_.href,'"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ').concat(this.modalZIndex,'"\n      ></iframe>')),this.torusAlertContainer=V('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());const link=window.document.createElement("link");link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),link.setAttribute("href","".concat(v,"/css/widget.css")),this.styleLink=link;const{defaultLanguage:x=Y(),customTranslations:k={}}=this.whiteLabel||{},E=y()(H.translations,k)[x]||H.translations[Y()];this.embedTranslations=E.embed;const O=async()=>(await W(),new Promise(((t,e)=>{this.torusIframe.onload=async()=>{this._setupWeb3();const h=this.communicationMux.getStream("init_stream");h.on("data",(r=>{const{name:n,data:data,error:o}=r;"init_complete"===n&&data.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),t(void 0)):o&&e(new Error(o))})),h.write({name:"init_stream",data:{enabledVerifiers:r,loginConfig:o,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,skipTKey:d,network:n}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)})));if("production"===t&&c.check){const t="".concat(v,"/popup"),e=await fetch(t,{cache:"reload"});if("max-age=3600"!==e.headers.get("Cache-Control"))throw new Error("Unexpected Cache-Control headers, got ".concat(e.headers.get("Cache-Control")));const r=await e.text(),n=main({algorithms:["sha384"]},r);if(G.info(n,"integrity"),n!==c.hash)throw this.clearInit(),new Error("Integrity check failed");await O()}else await O()}login(){let{verifier:t="",login_hint:e=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");return this.requestedVerifier=t,this.loginHint=e,this.ethereum.enable()}logout(){return new Promise(((t,e)=>{if(!this.isLoggedIn)return void e(new Error("User has not logged in yet"));this.communicationMux.getStream("logout").write({name:"logOut"});const r=this.communicationMux.getStream("status");z(r,"data",(r=>{r.loggedIn?e(new Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",t())}))}))}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(element){return element instanceof Element||element instanceof HTMLDocument}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{host:e="mainnet",chainId:r=null,networkName:n=""}=t,h=o()(t,pt);return new Promise(((t,o)=>{const c=this.communicationMux.getStream("provider_change");z(c,"data",(e=>{const{err:r,success:n}=e.data;G.info(e),r?o(r):n?t():o(new Error("some error occured"))}));const l=X();this._handleWindow(l,{target:"_blank",features:et}),c.write({name:"show_provider_change",data:{network:gt({host:e,chainId:r,networkName:n},h),preopenInstanceId:l,override:!1}})}))}showWallet(path){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const e=this.communicationMux.getStream("show_wallet"),r=path?"/".concat(path):"";e.write({name:"show_wallet",data:{path:r}});z(e,"data",(e=>{if("show_wallet_instance"===e.name){const{instanceId:n}=e.data,o=new URL("".concat(this.torusUrl,"/wallet").concat(r));o.searchParams.append("integrity","true"),o.searchParams.append("instanceId",n),Object.keys(t).forEach((e=>{o.searchParams.append(e,t[e])})),this.dappStorageKey&&(o.hash="#dappStorageKey=".concat(this.dappStorageKey));new ut({url:o,features:"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315"}).open()}}))}async getPublicAddress(t){let{verifier:e,verifierId:r,isExtended:n=!1}=t;if(!H.supportedVerifierList.includes(e)||!L[e])throw new Error("Unsupported verifier");const o=await this.nodeDetailManager.getNodeDetails({verifier:e,verifierId:r}),h=o.torusNodeEndpoints,c=o.torusNodePub,l=e,d=L[e];try{const t=await this.torusJs.getUserTypeAndAddress(h,c,{verifier:l,verifierId:r});if("v1"===t.typeOfUser)return n?t:t.address;const e=await this.torusJs.getUserTypeAndAddress(h,c,{verifier:d,verifierId:r},!0);return n?e:e.address}catch(t){if(null!=t&&t.message.includes("Verifier + VerifierID has not yet been assigned")){const t=await this.torusJs.getUserTypeAndAddress(h,c,{verifier:d,verifierId:r},!0);return n?t:t.address}throw t}}getUserInfo(t){return new Promise(((e,r)=>{if(this.isLoggedIn){const n=this.communicationMux.getStream("user_info_access");n.write({name:"user_info_access_request"});const o=n=>{const{name:o,data:{approved:h,payload:c,rejected:l,newRequest:d}}=n;if("user_info_access_response"===o)if(h)e(c);else if(l)r(new Error("User rejected the request"));else if(d){const n=this.communicationMux.getStream("user_info");z(n,"data",(t=>{"user_info_response"===t.name&&(t.data.approved?e(t.data.payload):r(new Error("User rejected the request")))}));const o=X();this._handleWindow(o,{target:"_blank",features:et}),n.write({name:"user_info_request",data:{message:t,preopenInstanceId:o}})}};z(n,"data",o)}else r(new Error("User has not logged in yet"))}))}initiateTopup(t,e){return new Promise(((r,n)=>{if(this.isInitialized){const{errors:o,isValid:h}=((t,e)=>{const r={};if(!t)return{errors:r,isValid:!0};if(t&&!K[t])return r.provider="Invalid Provider",{errors:r,isValid:0===Object.keys(r).length};const n=K[t],o=e||{};if(o.fiatValue){const t=+parseFloat(o.fiatValue.toString())||0;t<n.minOrderValue&&(r.fiatValue="Requested amount is lower than supported"),t>n.maxOrderValue&&n.enforceMax&&(r.fiatValue="Requested amount is higher than supported")}return o.selectedCurrency&&!n.validCurrencies.includes(o.selectedCurrency)&&(r.selectedCurrency="Unsupported currency"),o.selectedCryptoCurrency&&!n.validCryptoCurrencies.includes(o.selectedCryptoCurrency)&&(r.selectedCryptoCurrency="Unsupported cryptoCurrency"),{errors:r,isValid:0===Object.keys(r).length}})(t,e);if(!h)return void n(new Error(JSON.stringify(o)));const c=this.communicationMux.getStream("topup");z(c,"data",(t=>{"topup_response"===t.name&&(t.data.success?r(t.data.success):n(new Error(t.data.error)))}));const l=X();this._handleWindow(l),c.write({name:"topup_request",data:{provider:t,params:e,preopenInstanceId:l}})}else n(new Error("Torus is not initialized yet"))}))}async loginWithPrivateKey(e){const{privateKey:r,userInfo:n}=e;return new Promise(((e,o)=>{if(this.isInitialized){if(32!==t.from(r,"hex").length)return void o(new Error("Invalid private key, Please provide a 32 byte valid secp25k1 private key"));const h=this.communicationMux.getStream("login_with_private_key");z(h,"data",(t=>{"login_with_private_key_response"===t.name&&(t.data.success?e(t.data.success):o(new Error(t.data.error)))})),h.write({name:"login_with_private_key_request",data:{privateKey:r,userInfo:n}})}else o(new Error("Torus is not initialized yet"))}))}async showWalletConnectScanner(){if(!this.useWalletConnect)throw new Error("Set `useWalletConnect` as true in init function options to use wallet connect scanner");return new Promise(((t,e)=>{if(this.isLoggedIn){const r=this.communicationMux.getStream("wallet_connect_stream");z(r,"data",(r=>{"wallet_connect_stream_res"===r.name&&(r.data.success?t(r.data.success):e(new Error(r.data.error)),this._displayIframe())})),r.write({name:"wallet_connect_stream_req"}),this._displayIframe(!0)}else e(new Error("User has not logged in yet"))}))}_handleWindow(t){let{url:e,target:r,features:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){const o=this.communicationMux.getStream("window"),h=new URL(e||"".concat(this.torusUrl,"/redirect?preopenInstanceId=").concat(t));this.dappStorageKey&&(h.hash?h.hash+="&dappStorageKey=".concat(this.dappStorageKey):h.hash="#dappStorageKey=".concat(this.dappStorageKey));const c=new ut({url:h,target:r,features:n});if(c.open(),!c.window)return void this._createPopupBlockAlert(t,h.href);o.write({name:"opened_window",data:{preopenInstanceId:t}});const l=e=>{let{preopenInstanceId:r,close:n}=e;r===t&&n&&(c.close(),o.removeListener("data",l))};o.on("data",l),c.once("close",(()=>{o.write({data:{preopenInstanceId:t,closed:!0}}),o.removeListener("data",l)}))}}_setEmbedWhiteLabel(element){const{theme:t}=this.whiteLabel||{};if(t){const{isDark:e=!1,colors:r={}}=t;e&&element.classList.add("torus-dark"),r.torusBrand1&&element.style.setProperty("--torus-brand-1",r.torusBrand1),r.torusGray2&&element.style.setProperty("--torus-gray-2",r.torusGray2)}}_getLogoUrl(){var t,e;let r="".concat(this.torusUrl,"/images/torus_icon-blue.svg");var n,o;null!==(t=this.whiteLabel)&&void 0!==t&&null!==(e=t.theme)&&void 0!==e&&e.isDark?r=(null===(n=this.whiteLabel)||void 0===n?void 0:n.logoLight)||r:r=(null===(o=this.whiteLabel)||void 0===o?void 0:o.logoDark)||r;return r}_sendWidgetVisibilityStatus(t){this.communicationMux.getStream("torus-widget-visibility").write({data:t})}_displayIframe(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const style={};if(t)style.display="block",style.width="100%",style.height="100%",style.top="0px",style.right="0px",style.left="0px",style.bottom="0px";else switch(style.display=this.torusWidgetVisibility?"block":"none",style.height="70px",style.width="70px",this.buttonPosition){case D.TOP_LEFT:style.top="0px",style.left="0px",style.right="auto",style.bottom="auto";break;case D.TOP_RIGHT:style.top="0px",style.right="0px",style.left="auto",style.bottom="auto";break;case D.BOTTOM_RIGHT:style.bottom="0px",style.right="0px",style.top="auto",style.left="auto";break;case D.BOTTOM_LEFT:default:style.bottom="0px",style.left="0px",style.top="auto",style.right="auto"}Object.assign(this.torusIframe.style,style),this.isIframeFullScreen=t}_setupWeb3(){G.info("setupWeb3 running");const t=new f.a({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),e=new f.a({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),r=new st(t),n=t=>{const e=r[t];r[t]=function(t){if(t&&"eth_requestAccounts"===t)return r.enable();for(var n=arguments.length,o=new Array(n>1?n-1:0),h=1;h<n;h++)o[h-1]=arguments[h];return e.apply(this,[t,...o])}};n("send"),n("sendAsync"),r.enable=()=>new Promise(((t,e)=>{r.sendAsync({jsonrpc:"2.0",id:X(),method:"eth_requestAccounts",params:[]},((r,n)=>{const{result:o}=n||{};if(r)setTimeout((()=>{e(r)}),50);else if(Array.isArray(o)&&o.length>0){const r=()=>{if(""!==this.requestedVerifier&&this.currentVerifier!==this.requestedVerifier){const{requestedVerifier:r}=this;this.logout().then((n=>{this.requestedVerifier=r,this._showLoginPopup(!0,t,e)})).catch((t=>e(t)))}else t(o)};this.isLoggedIn?r():this.isLoginCallback=r}else this._showLoginPopup(!0,t,e)}))})),r.tryPreopenHandle=(t,e)=>{const n=t;if(!Array.isArray(n)&&bt.includes(n.method)){const t=X();this._handleWindow(t,{target:"_blank",features:nt}),n.preopenInstanceId=t}r._rpcEngine.handle(n,e)};const o=new Proxy(r,{deleteProperty:()=>!0});this.ethereum=o;const h=Object(f.l)(e);this.communicationMux=h;h.getStream("window").on("data",(t=>{"create_window"===t.name&&this._createPopupBlockAlert(t.data.preopenInstanceId,t.data.url)}));h.getStream("widget").on("data",(t=>{const{data:data}=t;this._displayIframe(data)}));h.getStream("status").on("data",(t=>{t.loggedIn?(this.isLoggedIn=t.loggedIn,this.currentVerifier=t.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)})),this.provider=o,this.provider.shouldSendMetadata&&ft(this.provider._rpcEngine),r._initializeState(),G.debug("Torus - injected provider")}_showLoginPopup(t,e,r){const n=data=>{const{err:t,selectedAddress:n}=data;t?(G.error(t),r&&r(t)):e&&e([n]),this.isIframeFullScreen&&this._displayIframe()},o=this.communicationMux.getStream("oauth");if(this.requestedVerifier){z(o,"data",n);const e=X();this._handleWindow(e),o.write({name:"oauth",data:{calledFromEmbed:t,verifier:this.requestedVerifier,preopenInstanceId:e,login_hint:this.loginHint}})}else this._displayIframe(!0),z(o,"data",n),o.write({name:"oauth_modal",data:{calledFromEmbed:t}})}_createPopupBlockAlert(t,e){const r=this._getLogoUrl(),n=V('<div id="torusAlert" class="torus-alert--v2">'+'<div id="torusAlert__logo"><img src="'.concat(r,'" /></div>')+"<div>"+'<h1 id="torusAlert__title">'.concat(this.embedTranslations.actionRequired,"</h1>")+'<p id="torusAlert__desc">'.concat(this.embedTranslations.pendingAction,"</p>")+"</div></div>"),o=V('<div><a id="torusAlert__btn">'.concat(this.embedTranslations.continue,"</a></div>")),h=V('<div id="torusAlert__btn-container"></div>');h.appendChild(o),n.appendChild(h);this._setEmbedWhiteLabel(n);U((()=>{this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(n)})),U((()=>{o.addEventListener("click",(()=>{this._handleWindow(t,{url:e,target:"_blank",features:nt}),n.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")}))}))}}}).call(this,r(16).Buffer)},735:function(t,e,r){var n=r(736);t.exports=function(source,t){if(null==source)return{};var e,i,r=n(source,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(source);for(i=0;i<o.length;i++)e=o[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(r[e]=source[e])}return r},t.exports.__esModule=!0,t.exports.default=t.exports},736:function(t,e){t.exports=function(source,t){if(null==source)return{};var e,i,r={},n=Object.keys(source);for(i=0;i<n.length;i++)e=n[i],t.indexOf(e)>=0||(r[e]=source[e]);return r},t.exports.__esModule=!0,t.exports.default=t.exports},737:function(t,e,r){"use strict";r.d(e,"a",(function(){return m}));var n=r(5),o=r.n(n),h=r(738),c=r.n(h),l=r(617);const d={ROPSTEN:"ropsten",MAINNET:"mainnet",POLYGON:"polygon-mainnet"},f=[{inputs:[{internalType:"string",name:"_verifier",type:"string"},{internalType:"bytes32",name:"hashedVerifierId",type:"bytes32"}],name:"getNodeSet",outputs:[{internalType:"uint256",name:"currentEpoch",type:"uint256"},{internalType:"string[]",name:"torusNodeEndpoints",type:"string[]"},{internalType:"uint256[]",name:"torusNodePubX",type:"uint256[]"},{internalType:"uint256[]",name:"torusNodePubY",type:"uint256[]"},{internalType:"uint256[]",name:"torusIndexes",type:"uint256[]"}],stateMutability:"view",type:"function"}];class m{constructor(){let t,{network:e=d.MAINNET,proxyAddress:r="0xf20336e16B5182637f09821c27BDe29b0AFcfe80"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o()(this,"_currentEpoch","19"),o()(this,"_torusNodeEndpoints",["https://torus-19.torusnode.com/jrpc","https://torus-node.ens.domains/jrpc","https://torus-node.matic.network/jrpc","https://torus.zilliqa.network/jrpc","https://torus-mainnet.cosmos.network/jrpc","https://torus2.etherscan.com/jrpc","https://torus-node-v2.skalelabs.com/jrpc","https://torus-node.binancex.dev/jrpc","https://torusnode.ont.io/jrpc"]),o()(this,"_torusNodePub",[{X:"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b",Y:"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5"},{X:"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d",Y:"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873"},{X:"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe",Y:"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152"},{X:"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768",Y:"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef"},{X:"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064",Y:"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1"},{X:"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139",Y:"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122"},{X:"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6",Y:"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9"},{X:"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043",Y:"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46"},{X:"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5",Y:"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790"}]),o()(this,"_torusIndexes",[1,2,3,4,5,6,7,8,9]),o()(this,"_network",d.MAINNET),o()(this,"nodeListAddress",void 0),o()(this,"updated",void 0),o()(this,"nodeListContract",void 0);try{t=new URL(e).href}catch(r){const n="b8cdb0e4cff24599a286bf8e87ff1c96";t="https://".concat(e,".infura.io/v3/").concat(n)}c.a.setProvider(t),this.nodeListContract=new c.a(f,r),this.nodeListAddress=r,this.updated=!1,this._network=e}get _nodeDetails(){return{currentEpoch:this._currentEpoch,nodeListAddress:this.nodeListAddress,torusNodeEndpoints:this._torusNodeEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}async getNodeDetails(t){let{skip:e=!1,verifier:r,verifierId:n}=t;try{if(e&&this._network===d.MAINNET)return this._nodeDetails;if(this.updated&&this._network===d.MAINNET)return this._nodeDetails;const t=Object(l.keccak256)(n),o=await this.nodeListContract.methods.getNodeSet(r,t).call(),{currentEpoch:h,torusNodeEndpoints:c,torusNodePubX:f,torusNodePubY:m,torusIndexes:v}=o;this._currentEpoch=h,this._torusIndexes=v.map((t=>Number(t)));const y=[],w=[];for(let t=0;t<c.length;t+=1){const e=c[t],r=f[t],n=m[t],o="https://".concat(e.split(":")[0],"/jrpc");y.push(o),w.push({X:Object(l.toHex)(r).replace("0x",""),Y:Object(l.toHex)(n).replace("0x","")})}return this._torusNodeEndpoints=y,this._torusNodePub=w,this.updated=!0,this._nodeDetails}catch(t){if(this._network===d.MAINNET)return this._nodeDetails;throw t}}}},738:function(t,e,r){"use strict";var n=r(739),o=r(701),h=r(617),c=r(703).subscription,l=r(608).formatters,d=r(608).errors,f=r(702),m=r(790),v=function t(e,address,r){var o=this,c=Array.prototype.slice.call(arguments);if(!(this instanceof t))throw new Error('Please use the "new" keyword to instantiate a web3.eth.Contract() object!');if(this.setProvider=function(){n.packageInit(o,arguments),o.clearSubscriptions=o._requestManager.clearSubscriptions},n.packageInit(this,[this.constructor]),this.clearSubscriptions=this._requestManager.clearSubscriptions,!e||!Array.isArray(e))throw d.ContractMissingABIError();this.options={};var f=c[c.length-1];f&&"object"==typeof f&&!Array.isArray(f)&&(r=f,this.options={...this.options,...this._getOrSetDefaultOptions(r)},address&&"object"==typeof address&&(address=null)),Object.defineProperty(this.options,"address",{set:function(t){t&&(o._address=h.toChecksumAddress(l.inputAddressFormatter(t)))},get:function(){return o._address},enumerable:!0}),Object.defineProperty(this.options,"jsonInterface",{set:function(t){return o.methods={},o.events={},o._jsonInterface=t.map((function(t){var e,r;if(t.constant="view"===t.stateMutability||"pure"===t.stateMutability||t.constant,t.payable="payable"===t.stateMutability||t.payable,t.name&&(r=h._jsonInterfaceMethodToString(t)),"function"===t.type){if(t.signature=m.encodeFunctionSignature(r),e=o._createTxObject.bind({method:t,parent:o}),o.methods[t.name]){var n=o._createTxObject.bind({method:t,parent:o,nextMethod:o.methods[t.name]});o.methods[t.name]=n}else o.methods[t.name]=e;o.methods[t.signature]=e,o.methods[r]=e}else if("event"===t.type){t.signature=m.encodeEventSignature(r);var c=o._on.bind(o,t.signature);o.events[t.name]&&"bound "!==o.events[t.name].name||(o.events[t.name]=c),o.events[t.signature]=c,o.events[r]=c}return t})),o.events.allEvents=o._on.bind(o,"allevents"),o._jsonInterface},get:function(){return o._jsonInterface},enumerable:!0});var v=this.constructor.defaultAccount,y=this.constructor.defaultBlock||"latest";Object.defineProperty(this,"handleRevert",{get:function(){return!1===o.options.handleRevert||!0===o.options.handleRevert?o.options.handleRevert:this.constructor.handleRevert},set:function(t){o.options.handleRevert=t},enumerable:!0}),Object.defineProperty(this,"defaultCommon",{get:function(){return o.options.common||this.constructor.defaultCommon},set:function(t){o.options.common=t},enumerable:!0}),Object.defineProperty(this,"defaultHardfork",{get:function(){return o.options.hardfork||this.constructor.defaultHardfork},set:function(t){o.options.hardfork=t},enumerable:!0}),Object.defineProperty(this,"defaultChain",{get:function(){return o.options.chain||this.constructor.defaultChain},set:function(t){o.options.chain=t},enumerable:!0}),Object.defineProperty(this,"transactionPollingTimeout",{get:function(){return 0===o.options.transactionPollingTimeout?o.options.transactionPollingTimeout:o.options.transactionPollingTimeout||this.constructor.transactionPollingTimeout},set:function(t){o.options.transactionPollingTimeout=t},enumerable:!0}),Object.defineProperty(this,"transactionPollingInterval",{get:function(){return 0===o.options.transactionPollingInterval?o.options.transactionPollingInterval:o.options.transactionPollingInterval||this.constructor.transactionPollingInterval},set:function(t){o.options.transactionPollingInterval=t},enumerable:!0}),Object.defineProperty(this,"transactionConfirmationBlocks",{get:function(){return 0===o.options.transactionConfirmationBlocks?o.options.transactionConfirmationBlocks:o.options.transactionConfirmationBlocks||this.constructor.transactionConfirmationBlocks},set:function(t){o.options.transactionConfirmationBlocks=t},enumerable:!0}),Object.defineProperty(this,"transactionBlockTimeout",{get:function(){return 0===o.options.transactionBlockTimeout?o.options.transactionBlockTimeout:o.options.transactionBlockTimeout||this.constructor.transactionBlockTimeout},set:function(t){o.options.transactionBlockTimeout=t},enumerable:!0}),Object.defineProperty(this,"blockHeaderTimeout",{get:function(){return 0===o.options.blockHeaderTimeout?o.options.blockHeaderTimeout:o.options.blockHeaderTimeout||this.constructor.blockHeaderTimeout},set:function(t){o.options.blockHeaderTimeout=t},enumerable:!0}),Object.defineProperty(this,"defaultAccount",{get:function(){return v},set:function(t){return t&&(v=h.toChecksumAddress(l.inputAddressFormatter(t))),t},enumerable:!0}),Object.defineProperty(this,"defaultBlock",{get:function(){return y},set:function(t){return y=t,t},enumerable:!0}),this.methods={},this.events={},this._address=null,this._jsonInterface=[],this.options.address=address,this.options.jsonInterface=e};v.setProvider=function(t,e){n.packageInit(this,[t]),this._ethAccounts=e},v.prototype._getCallback=function(t){if(t&&t[t.length-1]&&"function"==typeof t[t.length-1])return t.pop()},v.prototype._checkListener=function(t,e){if(e===t)throw d.ContractReservedEventError(t)},v.prototype._getOrSetDefaultOptions=function(t){var e=t.gasPrice?String(t.gasPrice):null,r=t.from?h.toChecksumAddress(l.inputAddressFormatter(t.from)):null;return t.data=t.data||this.options.data,t.from=r||this.options.from,t.gasPrice=e||this.options.gasPrice,t.gas=t.gas||t.gasLimit||this.options.gas,delete t.gasLimit,t},v.prototype._encodeEventABI=function(t,e){var filter=(e=e||{}).filter||{},r={};if(["fromBlock","toBlock"].filter((function(t){return void 0!==e[t]})).forEach((function(t){r[t]=l.inputBlockNumberFormatter(e[t])})),Array.isArray(e.topics))r.topics=e.topics;else{if(r.topics=[],t&&!t.anonymous&&"ALLEVENTS"!==t.name&&r.topics.push(t.signature),"ALLEVENTS"!==t.name){var n=t.inputs.filter((function(i){return!0===i.indexed})).map((function(i){var t=filter[i.name];return t?Array.isArray(t)?t.map((function(t){return m.encodeParameter(i.type,t)})):m.encodeParameter(i.type,t):null}));r.topics=r.topics.concat(n)}r.topics.length||delete r.topics}return this.options.address&&(r.address=this.options.address.toLowerCase()),r},v.prototype._decodeEventABI=function(data){var t=this;data.data=data.data||"",data.topics=data.topics||[];var e=l.outputLogFormatter(data);if("ALLEVENTS"===t.name&&(t=t.jsonInterface.find((function(t){return t.signature===data.topics[0]}))||{anonymous:!0}),t.inputs=t.inputs||[],!t.anonymous){let e=0;t.inputs.forEach((input=>input.indexed?e++:null)),e>0&&data.topics.length!==e+1&&(t={anonymous:!0,inputs:[]})}var r=t.anonymous?data.topics:data.topics.slice(1);return e.returnValues=m.decodeLog(t.inputs,data.data,r),delete e.returnValues.__length__,e.event=t.name,e.signature=t.anonymous||!data.topics[0]?null:data.topics[0],e.raw={data:e.data,topics:e.topics},delete e.data,delete e.topics,e},v.prototype._encodeMethodABI=function(){var t=this._method.signature,e=this.arguments||[],r=!1,n=this._parent.options.jsonInterface.filter((function(e){return"constructor"===t&&e.type===t||(e.signature===t||e.signature===t.replace("0x","")||e.name===t)&&"function"===e.type})).map((function(t){var n=Array.isArray(t.inputs)?t.inputs.length:0;if(n!==e.length)throw new Error("The number of arguments is not matching the methods required number. You need to pass "+n+" arguments.");return"function"===t.type&&(r=t.signature),Array.isArray(t.inputs)?t.inputs:[]})).map((function(t){return m.encodeParameters(t,e).replace("0x","")}))[0]||"";if("constructor"===t){if(!this._deployData)throw new Error("The contract has no contract data option set. This is necessary to append the constructor parameters.");return this._deployData.startsWith("0x")||(this._deployData="0x"+this._deployData),this._deployData+n}var o=r?r+n:n;if(!o)throw new Error("Couldn't find a matching contract method named \""+this._method.name+'".');return o},v.prototype._decodeMethodReturn=function(t,e){if(!e)return null;e=e.length>=2?e.slice(2):e;var r=m.decodeParameters(t,e);return 1===r.__length__?r[0]:(delete r.__length__,r)},v.prototype.deploy=function(t,e){if((t=t||{}).arguments=t.arguments||[],!(t=this._getOrSetDefaultOptions(t)).data){if("function"==typeof e)return e(d.ContractMissingDeployDataError());throw d.ContractMissingDeployDataError()}var r=this.options.jsonInterface.find((t=>"constructor"===t.type))||{};return r.signature="constructor",this._createTxObject.apply({method:r,parent:this,deployData:t.data,_ethAccounts:this.constructor._ethAccounts},t.arguments)},v.prototype._generateEventOptions=function(){var t=Array.prototype.slice.call(arguments),e=this._getCallback(t),r="object"===(!!t[t.length-1]&&typeof t[t.length-1])?t.pop():{},n="string"==typeof t[0]?t[0]:"allevents",o="allevents"===n.toLowerCase()?{name:"ALLEVENTS",jsonInterface:this.options.jsonInterface}:this.options.jsonInterface.find((function(t){return"event"===t.type&&(t.name===n||t.signature==="0x"+n.replace("0x",""))}));if(!o)throw d.ContractEventDoesNotExistError(n);if(!h.isAddress(this.options.address))throw d.ContractNoAddressDefinedError();return{params:this._encodeEventABI(o,r),event:o,callback:e}},v.prototype.clone=function(){return new this.constructor(this.options.jsonInterface,this.options.address,this.options)},v.prototype.once=function(t,e,r){var n=Array.prototype.slice.call(arguments);if(!(r=this._getCallback(n)))throw d.ContractOnceRequiresCallbackError();e&&delete e.fromBlock,this._on(t,e,(function(t,e,sub){sub.unsubscribe(),"function"==typeof r&&r(t,e,sub)}))},v.prototype._on=function(){var t=this._generateEventOptions.apply(this,arguments);t.params&&t.params.toBlock&&(delete t.params.toBlock,console.warn("Invalid option: toBlock. Use getPastEvents for specific range.")),this._checkListener("newListener",t.event.name),this._checkListener("removeListener",t.event.name);var e=new c({subscription:{params:1,inputFormatter:[l.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(t.event),subscriptionHandler:function(output){output.removed?this.emit("changed",output):this.emit("data",output),"function"==typeof this.callback&&this.callback(null,output,this)}},type:"eth",requestManager:this._requestManager});return e.subscribe("logs",t.params,t.callback||function(){}),e},v.prototype.getPastEvents=function(){var t=this._generateEventOptions.apply(this,arguments),e=new o({name:"getPastLogs",call:"eth_getLogs",params:1,inputFormatter:[l.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(t.event)});e.setRequestManager(this._requestManager);var r=e.buildCall();return e=null,r(t.params,t.callback)},v.prototype._createTxObject=function(){var t=Array.prototype.slice.call(arguments),e={};if("function"===this.method.type&&(e.call=this.parent._executeMethod.bind(e,"call"),e.call.request=this.parent._executeMethod.bind(e,"call",!0)),e.send=this.parent._executeMethod.bind(e,"send"),e.send.request=this.parent._executeMethod.bind(e,"send",!0),e.encodeABI=this.parent._encodeMethodABI.bind(e),e.estimateGas=this.parent._executeMethod.bind(e,"estimate"),e.createAccessList=this.parent._executeMethod.bind(e,"createAccessList"),t&&this.method.inputs&&t.length!==this.method.inputs.length){if(this.nextMethod)return this.nextMethod.apply(null,t);throw d.InvalidNumberOfParams(t.length,this.method.inputs.length,this.method.name)}return e.arguments=t||[],e._method=this.method,e._parent=this.parent,e._ethAccounts=this.parent.constructor._ethAccounts||this._ethAccounts,this.deployData&&(e._deployData=this.deployData),e},v.prototype._processExecuteArguments=function(t,e){var r={};if(r.type=t.shift(),r.callback=this._parent._getCallback(t),"call"!==r.type||!0===t[t.length-1]||"string"!=typeof t[t.length-1]&&!isFinite(t[t.length-1])||(r.defaultBlock=t.pop()),r.options="object"===(!!t[t.length-1]&&typeof t[t.length-1])?t.pop():{},r.generateRequest=!0===t[t.length-1]&&t.pop(),r.options=this._parent._getOrSetDefaultOptions(r.options),r.options.data=this.encodeABI(),!this._deployData&&!h.isAddress(this._parent.options.address))throw d.ContractNoAddressDefinedError();return this._deployData||(r.options.to=this._parent.options.address),r.options.data?r:h._fireError(new Error("Couldn't find a matching contract method, or the number of parameters is wrong."),e.eventEmitter,e.reject,r.callback)},v.prototype._executeMethod=function(){var t=this,e=this._parent._processExecuteArguments.call(this,Array.prototype.slice.call(arguments),r),r=f("send"!==e.type),n=t.constructor._ethAccounts||t._ethAccounts;if(e.generateRequest){var c={params:[l.inputCallFormatter.call(this._parent,e.options)],callback:e.callback};return"call"===e.type?(c.params.push(l.inputDefaultBlockNumberFormatter.call(this._parent,e.defaultBlock)),c.method="eth_call",c.format=this._parent._decodeMethodReturn.bind(null,this._method.outputs)):c.method="eth_sendTransaction",c}switch(e.type){case"createAccessList":if(!h.isAddress(e.options.from))return h._fireError(d.ContractNoFromAddressDefinedError(),r.eventEmitter,r.reject,e.callback);var v=new o({name:"createAccessList",call:"eth_createAccessList",params:2,inputFormatter:[l.inputTransactionFormatter,l.inputDefaultBlockNumberFormatter],requestManager:t._parent._requestManager,accounts:n,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock}).createFunction();return v(e.options,e.callback);case"estimate":var y=new o({name:"estimateGas",call:"eth_estimateGas",params:1,inputFormatter:[l.inputCallFormatter],outputFormatter:h.hexToNumber,requestManager:t._parent._requestManager,accounts:n,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock}).createFunction();return y(e.options,e.callback);case"call":var w=new o({name:"call",call:"eth_call",params:2,inputFormatter:[l.inputCallFormatter,l.inputDefaultBlockNumberFormatter],outputFormatter:function(e){return t._parent._decodeMethodReturn(t._method.outputs,e)},requestManager:t._parent._requestManager,accounts:n,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock,handleRevert:t._parent.handleRevert,abiCoder:m}).createFunction();return w(e.options,e.defaultBlock,e.callback);case"send":if(!h.isAddress(e.options.from))return h._fireError(d.ContractNoFromAddressDefinedError(),r.eventEmitter,r.reject,e.callback);if("boolean"==typeof this._method.payable&&!this._method.payable&&e.options.value&&e.options.value>0)return h._fireError(new Error("Can not send value to non-payable contract method or constructor"),r.eventEmitter,r.reject,e.callback);var M={receiptFormatter:function(e){if(Array.isArray(e.logs)){var r=e.logs.map((e=>t._parent._decodeEventABI.call({name:"ALLEVENTS",jsonInterface:t._parent.options.jsonInterface},e)));e.events={};var n=0;r.forEach((function(t){t.event?e.events[t.event]?Array.isArray(e.events[t.event])?e.events[t.event].push(t):e.events[t.event]=[e.events[t.event],t]:e.events[t.event]=t:(e.events[n]=t,n++)})),delete e.logs}return e},contractDeployFormatter:function(e){var r=t._parent.clone();return r.options.address=e.contractAddress,r}},_=new o({name:"sendTransaction",call:"eth_sendTransaction",params:1,inputFormatter:[l.inputTransactionFormatter],requestManager:t._parent._requestManager,accounts:t.constructor._ethAccounts||t._ethAccounts,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock,transactionBlockTimeout:t._parent.transactionBlockTimeout,transactionConfirmationBlocks:t._parent.transactionConfirmationBlocks,transactionPollingTimeout:t._parent.transactionPollingTimeout,transactionPollingInterval:t._parent.transactionPollingInterval,defaultCommon:t._parent.defaultCommon,defaultChain:t._parent.defaultChain,defaultHardfork:t._parent.defaultHardfork,handleRevert:t._parent.handleRevert,extraFormatters:M,abiCoder:m}).createFunction();return _(e.options,e.callback);default:throw new Error('Method "'+e.type+'" not implemented.')}},t.exports=v},739:function(t,e,r){const n=r(740),o=r(788);t.exports={packageInit:(t,e)=>{if(e=Array.prototype.slice.call(e),!t)throw new Error('You need to instantiate using the "new" keyword.');Object.defineProperty(t,"currentProvider",{get:()=>t._provider,set:e=>t.setProvider(e),enumerable:!0,configurable:!0}),e[0]&&e[0]._requestManager?t._requestManager=e[0]._requestManager:t._requestManager=new n.Manager(e[0],e[1]),t.givenProvider=n.Manager.givenProvider,t.providers=n.Manager.providers,t._provider=t._requestManager.provider,t.setProvider||(t.setProvider=(e,r)=>(t._requestManager.setProvider(e,r),t._provider=t._requestManager.provider,!0)),t.setRequestManager=e=>{t._requestManager=e,t._provider=e.provider},t.BatchRequest=n.BatchManager.bind(null,t._requestManager),t.extend=o(t)},addProviders:t=>{t.givenProvider=n.Manager.givenProvider,t.providers=n.Manager.providers}}},740:function(t,e,r){"use strict";const{callbackify:n}=r(667);var o=r(608).errors,h=r(696),c=r(762),l=r(763),d=function t(e,r){this.provider=null,this.providers=t.providers,this.setProvider(e,r),this.subscriptions=new Map};d.givenProvider=l,d.providers={WebsocketProvider:r(764),HttpProvider:r(775),IpcProvider:r(786)},d.prototype.setProvider=function(t,e){var r=this;if(t&&"string"==typeof t&&this.providers)if(/^http(s)?:\/\//i.test(t))t=new this.providers.HttpProvider(t);else if(/^ws(s)?:\/\//i.test(t))t=new this.providers.WebsocketProvider(t);else if(t&&"object"==typeof e&&"function"==typeof e.connect)t=new this.providers.IpcProvider(t,e);else if(t)throw new Error("Can't autodetect provider for \""+t+'"');if(this.provider&&this.provider.connected&&this.clearSubscriptions(),this.provider=t||null,this.provider&&this.provider.on){"function"==typeof t.request?this.provider.on("message",(function(t){if(t&&"eth_subscription"===t.type&&t.data){const data=t.data;data.subscription&&r.subscriptions.has(data.subscription)&&r.subscriptions.get(data.subscription).callback(null,data.result)}})):this.provider.on("data",(function(t,e){(t=t||e).method&&t.params&&t.params.subscription&&r.subscriptions.has(t.params.subscription)&&r.subscriptions.get(t.params.subscription).callback(null,t.params.result)})),this.provider.on("connect",(function(){r.subscriptions.forEach((function(t){t.subscription.resubscribe()}))})),this.provider.on("error",(function(t){r.subscriptions.forEach((function(e){e.callback(t)}))}));const e=function(t){r._isCleanCloseEvent(t)&&!r._isIpcCloseError(t)||(r.subscriptions.forEach((function(e){e.callback(o.ConnectionCloseError(t)),r.subscriptions.delete(e.subscription.id)})),r.provider&&r.provider.emit&&r.provider.emit("error",o.ConnectionCloseError(t))),r.provider&&r.provider.emit&&r.provider.emit("end",t)};this.provider.on("disconnect",e)}},d.prototype.send=function(data,t){if(t=t||function(){},!this.provider)return t(o.InvalidProvider());const{method:e,params:r}=data,c=h.toPayload(e,r),l=this._jsonrpcResultCallback(t,c);if(this.provider.request){n(this.provider.request.bind(this.provider))({method:e,params:r},t)}else if(this.provider.sendAsync)this.provider.sendAsync(c,l);else{if(!this.provider.send)throw new Error("Provider does not have a request or send method to use.");this.provider.send(c,l)}},d.prototype.sendBatch=function(data,t){if(!this.provider)return t(o.InvalidProvider());var e=h.toBatchPayload(data);this.provider[this.provider.sendAsync?"sendAsync":"send"](e,(function(e,r){return e?t(e):Array.isArray(r)?void t(null,r):t(o.InvalidResponse(r))}))},d.prototype.addSubscription=function(t,e){if(!this.provider.on)throw new Error("The provider doesn't support subscriptions: "+this.provider.constructor.name);this.subscriptions.set(t.id,{callback:e,subscription:t})},d.prototype.removeSubscription=function(t,e){if(this.subscriptions.has(t)){var r=this.subscriptions.get(t).subscription.options.type;return this.subscriptions.delete(t),void this.send({method:r+"_unsubscribe",params:[t]},e)}"function"==typeof e&&e(null)},d.prototype.clearSubscriptions=function(t){try{var e=this;return this.subscriptions.size>0&&this.subscriptions.forEach((function(r,n){t&&"syncing"===r.name||e.removeSubscription(n)})),this.provider.reset&&this.provider.reset(),!0}catch(t){throw new Error(`Error while clearing subscriptions: ${t}`)}},d.prototype._isCleanCloseEvent=function(t){return"object"==typeof t&&([1e3].includes(t.code)||!0===t.wasClean)},d.prototype._isIpcCloseError=function(t){return"boolean"==typeof t&&t},d.prototype._jsonrpcResultCallback=function(t,e){return function(r,n){return n&&n.id&&e.id!==n.id?t(new Error(`Wrong response id ${n.id} (expected: ${e.id}) in ${JSON.stringify(e)}`)):r?t(r):n&&n.error?t(o.ErrorResponse(n)):h.isValidResponse(n)?void t(null,n.result):t(o.InvalidResponse(n))}},t.exports={Manager:d,BatchManager:c}},743:function(t,e,r){"use strict";t.exports={ErrorResponse:function(t){var e=t&&t.error&&t.error.message?t.error.message:JSON.stringify(t),data=t.error&&t.error.data?t.error.data:null,r=new Error("Returned error: "+e);return r.data=data,r},InvalidNumberOfParams:function(t,e,r){return new Error('Invalid number of parameters for "'+r+'". Got '+t+" expected "+e+"!")},InvalidConnection:function(t,e){return this.ConnectionError("CONNECTION ERROR: Couldn't connect to node "+t+".",e)},InvalidProvider:function(){return new Error("Provider not set or invalid")},InvalidResponse:function(t){var e=t&&t.error&&t.error.message?t.error.message:"Invalid JSON RPC response: "+JSON.stringify(t);return new Error(e)},ConnectionTimeout:function(t){return new Error("CONNECTION TIMEOUT: timeout of "+t+" ms achived")},ConnectionNotOpenError:function(t){return this.ConnectionError("connection not open on send()",t)},ConnectionCloseError:function(t){return"object"==typeof t&&t.code&&t.reason?this.ConnectionError("CONNECTION ERROR: The connection got closed with the close code `"+t.code+"` and the following reason string `"+t.reason+"`",t):new Error("CONNECTION ERROR: The connection closed unexpectedly")},MaxAttemptsReachedOnReconnectingError:function(){return new Error("Maximum number of reconnect attempts reached!")},PendingRequestsOnReconnectingError:function(){return new Error("CONNECTION ERROR: Provider started to reconnect before the response got received!")},ConnectionError:function(t,e){const r=new Error(t);return e&&(r.code=e.code,r.reason=e.reason),r},RevertInstructionError:function(t,e){var r=new Error("Your request got reverted with the following reason string: "+t);return r.reason=t,r.signature=e,r},TransactionRevertInstructionError:function(t,e,r){var n=new Error("Transaction has been reverted by the EVM:\n"+JSON.stringify(r,null,2));return n.reason=t,n.signature=e,n.receipt=r,n},TransactionError:function(t,e){var r=new Error(t);return r.receipt=e,r},NoContractAddressFoundError:function(t){return this.TransactionError("The transaction receipt didn't contain a contract address.",t)},ContractCodeNotStoredError:function(t){return this.TransactionError("The contract code couldn't be stored, please check your gas limit.",t)},TransactionRevertedWithoutReasonError:function(t){return this.TransactionError("Transaction has been reverted by the EVM:\n"+JSON.stringify(t,null,2),t)},TransactionOutOfGasError:function(t){return this.TransactionError("Transaction ran out of gas. Please provide more gas:\n"+JSON.stringify(t,null,2),t)},ResolverMethodMissingError:function(address,t){return new Error("The resolver at "+address+'does not implement requested method: "'+t+'".')},ContractMissingABIError:function(){return new Error("You must provide the json interface of the contract when instantiating a contract object.")},ContractOnceRequiresCallbackError:function(){return new Error("Once requires a callback as the second parameter.")},ContractEventDoesNotExistError:function(t){return new Error('Event "'+t+"\" doesn't exist in this contract.")},ContractReservedEventError:function(t){return new Error('The event "'+t+"\" is a reserved event name, you can't use it.")},ContractMissingDeployDataError:function(){return new Error('No "data" specified in neither the given options, nor the default options.')},ContractNoAddressDefinedError:function(){return new Error("This contract object doesn't have address set yet, please set an address first.")},ContractNoFromAddressDefinedError:function(){return new Error('No "from" address specified in neither the given options, nor the default options.')}}},744:function(t,e,r){"use strict";var n=r(617),o=r(761),h=function(t){return n.toBN(t).toString(10)},c=function(t){if(void 0!==t)return function(t){return"latest"===t||"pending"===t||"earliest"===t}(t)?t:"genesis"===t?"0x0":n.isHexStrict(t)?"string"==typeof t?t.toLowerCase():t:n.numberToHex(t)},l=function(t){if(t.to&&(t.to=m(t.to)),t.data&&t.input)throw new Error('You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.');if(!t.data&&t.input&&(t.data=t.input,delete t.input),t.data&&!t.data.startsWith("0x")&&(t.data="0x"+t.data),t.data&&!n.isHex(t.data))throw new Error("The data field must be HEX encoded data.");return(t.gas||t.gasLimit)&&(t.gas=t.gas||t.gasLimit),(t.maxPriorityFeePerGas||t.maxFeePerGas)&&delete t.gasPrice,["gasPrice","gas","value","maxPriorityFeePerGas","maxFeePerGas","nonce"].filter((function(e){return void 0!==t[e]})).forEach((function(e){t[e]=n.numberToHex(t[e])})),t},d=function(t){return null!==t.blockNumber&&(t.blockNumber=n.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=n.hexToNumber(t.transactionIndex)),t.nonce=n.hexToNumber(t.nonce),t.gas=n.hexToNumber(t.gas),t.gasPrice&&(t.gasPrice=h(t.gasPrice)),t.maxFeePerGas&&(t.maxFeePerGas=h(t.maxFeePerGas)),t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=h(t.maxPriorityFeePerGas)),t.type&&(t.type=n.hexToNumber(t.type)),t.value=h(t.value),t.to&&n.isAddress(t.to)?t.to=n.toChecksumAddress(t.to):t.to=null,t.from&&(t.from=n.toChecksumAddress(t.from)),t},f=function(t){if("string"==typeof t.blockHash&&"string"==typeof t.transactionHash&&"string"==typeof t.logIndex){var e=n.sha3(t.blockHash.replace("0x","")+t.transactionHash.replace("0x","")+t.logIndex.replace("0x",""));t.id="log_"+e.replace("0x","").substr(0,8)}else t.id||(t.id=null);return null!==t.blockNumber&&(t.blockNumber=n.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=n.hexToNumber(t.transactionIndex)),null!==t.logIndex&&(t.logIndex=n.hexToNumber(t.logIndex)),t.address&&(t.address=n.toChecksumAddress(t.address)),t},m=function(address){var t=new o(address);if(t.isValid()&&t.isDirect())return t.toAddress().toLowerCase();if(n.isAddress(address))return"0x"+address.toLowerCase().replace("0x","");throw new Error(`Provided address ${address} is invalid, the capitalization checksum test failed, or it's an indirect IBAN address which can't be converted.`)};t.exports={inputDefaultBlockNumberFormatter:function(t){return c(this&&null==t?this.defaultBlock:t)},inputBlockNumberFormatter:c,inputCallFormatter:function(t){var e=(t=l(t)).from||(this?this.defaultAccount:null);return e&&(t.from=m(e)),t},inputTransactionFormatter:function(t){if("number"!=typeof(t=l(t)).from&&(!t.from||"object"!=typeof t.from)){if(t.from=t.from||(this?this.defaultAccount:null),!t.from&&"number"!=typeof t.from)throw new Error('The send transactions "from" field must be defined!');t.from=m(t.from)}return t},inputAddressFormatter:m,inputPostFormatter:function(t){return t.ttl&&(t.ttl=n.numberToHex(t.ttl)),t.workToProve&&(t.workToProve=n.numberToHex(t.workToProve)),t.priority&&(t.priority=n.numberToHex(t.priority)),Array.isArray(t.topics)||(t.topics=t.topics?[t.topics]:[]),t.topics=t.topics.map((function(t){return 0===t.indexOf("0x")?t:n.fromUtf8(t)})),t},inputLogFormatter:function(t){var e=function(t){return null==t?null:0===(t=String(t)).indexOf("0x")?t:n.fromUtf8(t)};return void 0===t&&(t={}),void 0===t.fromBlock&&(t={...t,fromBlock:"latest"}),(t.fromBlock||0===t.fromBlock)&&(t.fromBlock=c(t.fromBlock)),(t.toBlock||0===t.toBlock)&&(t.toBlock=c(t.toBlock)),t.topics=t.topics||[],t.topics=t.topics.map((function(t){return Array.isArray(t)?t.map(e):e(t)})),e=null,t.address&&(t.address=Array.isArray(t.address)?t.address.map((function(t){return m(t)})):m(t.address)),t},inputSignFormatter:function(data){return n.isHexStrict(data)?data:n.utf8ToHex(data)},inputStorageKeysFormatter:function(t){return t.map(n.numberToHex)},outputProofFormatter:function(t){return t.address=n.toChecksumAddress(t.address),t.nonce=n.hexToNumberString(t.nonce),t.balance=n.hexToNumberString(t.balance),t},outputBigNumberFormatter:h,outputTransactionFormatter:d,outputTransactionReceiptFormatter:function(t){if("object"!=typeof t)throw new Error("Received receipt is invalid: "+t);return null!==t.blockNumber&&(t.blockNumber=n.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=n.hexToNumber(t.transactionIndex)),t.cumulativeGasUsed=n.hexToNumber(t.cumulativeGasUsed),t.gasUsed=n.hexToNumber(t.gasUsed),Array.isArray(t.logs)&&(t.logs=t.logs.map(f)),t.effectiveGasPrice&&(t.effectiveGasPrice=n.hexToNumber(t.effectiveGasPrice)),t.contractAddress&&(t.contractAddress=n.toChecksumAddress(t.contractAddress)),void 0!==t.status&&null!==t.status&&(t.status=Boolean(parseInt(t.status))),t},outputBlockFormatter:function(t){return t.gasLimit=n.hexToNumber(t.gasLimit),t.gasUsed=n.hexToNumber(t.gasUsed),t.size=n.hexToNumber(t.size),t.timestamp=n.hexToNumber(t.timestamp),null!==t.number&&(t.number=n.hexToNumber(t.number)),t.difficulty&&(t.difficulty=h(t.difficulty)),t.totalDifficulty&&(t.totalDifficulty=h(t.totalDifficulty)),Array.isArray(t.transactions)&&t.transactions.forEach((function(t){if("string"!=typeof t)return d(t)})),t.miner&&(t.miner=n.toChecksumAddress(t.miner)),t.baseFeePerGas&&(t.baseFeePerGas=n.hexToNumber(t.baseFeePerGas)),t},outputLogFormatter:f,outputPostFormatter:function(t){return t.expiry=n.hexToNumber(t.expiry),t.sent=n.hexToNumber(t.sent),t.ttl=n.hexToNumber(t.ttl),t.workProved=n.hexToNumber(t.workProved),t.topics||(t.topics=[]),t.topics=t.topics.map((function(t){return n.toUtf8(t)})),t},outputSyncingFormatter:function(t){return t.startingBlock=n.hexToNumber(t.startingBlock),t.currentBlock=n.hexToNumber(t.currentBlock),t.highestBlock=n.hexToNumber(t.highestBlock),t.knownStates&&(t.knownStates=n.hexToNumber(t.knownStates),t.pulledStates=n.hexToNumber(t.pulledStates)),t}}},745:function(t,e,r){"use strict";var n=r(746),o=r(692),h=new n(0),c=new n(-1),l={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function d(t){var e=t?t.toLowerCase():"ether",r=l[e];if("string"!=typeof r)throw new Error("[ethjs-unit] the unit provided "+t+" doesn't exists, please use the one of the following units "+JSON.stringify(l,null,2));return new n(r,10)}function f(t){if("string"==typeof t){if(!t.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+t+"', should be a number matching (^-?[0-9.]+).");return t}if("number"==typeof t)return String(t);if("object"==typeof t&&t.toString&&(t.toTwos||t.dividedToIntegerBy))return t.toPrecision?String(t.toPrecision()):t.toString(10);throw new Error("while converting number to string, invalid number value '"+t+"' type "+typeof t+".")}t.exports={unitMap:l,numberToString:f,getValueOfUnit:d,fromWei:function(t,e,r){var n=o(t),f=n.lt(h),base=d(e),m=l[e].length-1||1,v=r||{};f&&(n=n.mul(c));for(var y=n.mod(base).toString(10);y.length<m;)y="0"+y;v.pad||(y=y.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var w=n.div(base).toString(10);v.commify&&(w=w.replace(/\B(?=(\d{3})+(?!\d))/g,","));var M=w+("0"==y?"":"."+y);return f&&(M="-"+M),M},toWei:function(t,e){var r=f(t),base=d(e),o=l[e].length-1||1,h="-"===r.substring(0,1);if(h&&(r=r.substring(1)),"."===r)throw new Error("[ethjs-unit] while converting number "+t+" to wei, invalid value");var m=r.split(".");if(m.length>2)throw new Error("[ethjs-unit] while converting number "+t+" to wei,  too many decimal points");var v=m[0],y=m[1];if(v||(v="0"),y||(y="0"),y.length>o)throw new Error("[ethjs-unit] while converting number "+t+" to wei, too many decimal places");for(;y.length<o;)y+="0";v=new n(v),y=new n(y);var w=v.mul(base).add(y);return h&&(w=w.mul(c)),new n(w.toString(10),10)}}},746:function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function h(t,base,e){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==base&&"be"!==base||(e=base,base=10),this._init(t||0,base||10,e||"be"))}var c;"object"==typeof t?t.exports=h:e.BN=h,h.BN=h,h.wordSize=26;try{c=r(16).Buffer}catch(t){}function l(t,e,r){for(var n=0,o=Math.min(t.length,r),i=e;i<o;i++){var h=t.charCodeAt(i)-48;n<<=4,n|=h>=49&&h<=54?h-49+10:h>=17&&h<=22?h-17+10:15&h}return n}function d(t,e,r,n){for(var o=0,h=Math.min(t.length,r),i=e;i<h;i++){var c=t.charCodeAt(i)-48;o*=n,o+=c>=49?c-49+10:c>=17?c-17+10:c}return o}h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,e){return t.cmp(e)>0?t:e},h.min=function(t,e){return t.cmp(e)<0?t:e},h.prototype._init=function(t,base,e){if("number"==typeof t)return this._initNumber(t,base,e);if("object"==typeof t)return this._initArray(t,base,e);"hex"===base&&(base=16),n(base===(0|base)&&base>=2&&base<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===base?this._parseHex(t,r):this._parseBase(t,base,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===e&&this._initArray(this.toArray(),base,e)},h.prototype._initNumber=function(t,base,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this._initArray(this.toArray(),base,e)},h.prototype._initArray=function(t,base,e){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,o,h=0;if("be"===e)for(i=t.length-1,r=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[r]|=o<<h&67108863,this.words[r+1]=o>>>26-h&67108863,(h+=24)>=26&&(h-=26,r++);else if("le"===e)for(i=0,r=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[r]|=o<<h&67108863,this.words[r+1]=o>>>26-h&67108863,(h+=24)>=26&&(h-=26,r++);return this.strip()},h.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=l(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=l(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},h.prototype._parseBase=function(t,base,e){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=base)r++;r--,n=n/base|0;for(var o=t.length-e,h=o%r,c=Math.min(o,o-h)+e,l=0,i=e;i<c;i+=r)l=d(t,i,i+r,base),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==h){var f=1;for(l=d(t,i,t.length,base),i=0;i<h;i++)f*=base;this.imuln(f),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},h.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var a=0|t.words[0],b=0|e.words[0],o=a*b,h=67108863&o,c=o/67108864|0;r.words[0]=h;for(var l=1;l<n;l++){for(var d=c>>>26,f=67108863&c,m=Math.min(l,e.length-1),v=Math.max(0,l-t.length+1);v<=m;v++){var i=l-v|0;d+=(o=(a=0|t.words[i])*(b=0|e.words[v])+f)/67108864|0,f=67108863&o}r.words[l]=0|f,c=0|d}return 0!==c?r.words[l]=0|c:r.length--,r.strip()}h.prototype.toString=function(base,t){var e;if(t=0|t||1,16===(base=base||10)||"hex"===base){e="";for(var r=0,o=0,i=0;i<this.length;i++){var h=this.words[i],c=(16777215&(h<<r|o)).toString(16);e=0!==(o=h>>>24-r&16777215)||i!==this.length-1?f[6-c.length]+c+e:c+e,(r+=2)>=26&&(r-=26,i--)}for(0!==o&&(e=o.toString(16)+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(base===(0|base)&&base>=2&&base<=36){var l=m[base],d=v[base];e="";var y=this.clone();for(y.negative=0;!y.isZero();){var w=y.modn(d).toString(base);e=(y=y.idivn(d)).isZero()?w+e:f[l-w.length]+w+e}for(this.isZero()&&(e="0"+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}n(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(t,e){return n(void 0!==c),this.toArrayLike(c,t,e)},h.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},h.prototype.toArrayLike=function(t,e,r){var o=this.byteLength(),h=r||Math.max(1,o);n(o<=h,"byte array longer than desired length"),n(h>0,"Requested array length <= 0"),this.strip();var b,i,c="le"===e,l=new t(h),q=this.clone();if(c){for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),l[i]=b;for(;i<h;i++)l[i]=0}else{for(i=0;i<h-o;i++)l[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),l[h-i-1]=b}return l},Math.clz32?h.prototype._countBits=function(t){return 32-Math.clz32(t)}:h.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},h.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},h.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(t+=b,26!==b)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},h.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var b;b=this.length>t.length?t:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=b.length,this.strip()},h.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var a,b;this.length>t.length?(a=this,b=t):(a=t,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},h.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,o=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<o:this.words[r]&~(1<<o),this.strip()},h.prototype.iadd=function(t){var e,a,b;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(a=this,b=t):(a=t,b=this);for(var r=0,i=0;i<b.length;i++)e=(0|a.words[i])+(0|b.words[i])+r,this.words[i]=67108863&e,r=e>>>26;for(;0!==r&&i<a.length;i++)e=(0|a.words[i])+r,this.words[i]=67108863&e,r=e>>>26;if(this.length=a.length,0!==r)this.words[this.length]=r,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},h.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var a,b,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(a=this,b=t):(a=t,b=this);for(var n=0,i=0;i<b.length;i++)n=(e=(0|a.words[i])-(0|b.words[i])+n)>>26,this.words[i]=67108863&e;for(;0!==n&&i<a.length;i++)n=(e=(0|a.words[i])+n)>>26,this.words[i]=67108863&e;if(0===n&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(t){return this.clone().isub(t)};var w=function(t,e,r){var n,o,h,a=t.words,b=e.words,c=r.words,l=0,d=0|a[0],f=8191&d,m=d>>>13,v=0|a[1],y=8191&v,w=v>>>13,M=0|a[2],_=8191&M,x=M>>>13,k=0|a[3],E=8191&k,O=k>>>13,A=0|a[4],S=8191&A,j=A>>>13,C=0|a[5],T=8191&C,P=C>>>13,N=0|a[6],I=8191&N,R=N>>>13,B=0|a[7],L=8191&B,F=B>>>13,D=0|a[8],H=8191&D,U=D>>>13,V=0|a[9],z=8191&V,W=V>>>13,G=0|b[0],Z=8191&G,K=G>>>13,J=0|b[1],X=8191&J,$=J>>>13,Y=0|b[2],Q=8191&Y,tt=Y>>>13,et=0|b[3],nt=8191&et,it=et>>>13,ot=0|b[4],st=8191&ot,at=ot>>>13,ut=0|b[5],ht=8191&ut,ct=ut>>>13,lt=0|b[6],ft=8191&lt,pt=lt>>>13,mt=0|b[7],gt=8191&mt,vt=mt>>>13,yt=0|b[8],bt=8191&yt,wt=yt>>>13,Mt=0|b[9],_t=8191&Mt,xt=Mt>>>13;r.negative=t.negative^e.negative,r.length=19;var kt=(l+(n=Math.imul(f,Z))|0)+((8191&(o=(o=Math.imul(f,K))+Math.imul(m,Z)|0))<<13)|0;l=((h=Math.imul(m,K))+(o>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(y,Z),o=(o=Math.imul(y,K))+Math.imul(w,Z)|0,h=Math.imul(w,K);var Et=(l+(n=n+Math.imul(f,X)|0)|0)+((8191&(o=(o=o+Math.imul(f,$)|0)+Math.imul(m,X)|0))<<13)|0;l=((h=h+Math.imul(m,$)|0)+(o>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(_,Z),o=(o=Math.imul(_,K))+Math.imul(x,Z)|0,h=Math.imul(x,K),n=n+Math.imul(y,X)|0,o=(o=o+Math.imul(y,$)|0)+Math.imul(w,X)|0,h=h+Math.imul(w,$)|0;var Ot=(l+(n=n+Math.imul(f,Q)|0)|0)+((8191&(o=(o=o+Math.imul(f,tt)|0)+Math.imul(m,Q)|0))<<13)|0;l=((h=h+Math.imul(m,tt)|0)+(o>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(E,Z),o=(o=Math.imul(E,K))+Math.imul(O,Z)|0,h=Math.imul(O,K),n=n+Math.imul(_,X)|0,o=(o=o+Math.imul(_,$)|0)+Math.imul(x,X)|0,h=h+Math.imul(x,$)|0,n=n+Math.imul(y,Q)|0,o=(o=o+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,h=h+Math.imul(w,tt)|0;var At=(l+(n=n+Math.imul(f,nt)|0)|0)+((8191&(o=(o=o+Math.imul(f,it)|0)+Math.imul(m,nt)|0))<<13)|0;l=((h=h+Math.imul(m,it)|0)+(o>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(S,Z),o=(o=Math.imul(S,K))+Math.imul(j,Z)|0,h=Math.imul(j,K),n=n+Math.imul(E,X)|0,o=(o=o+Math.imul(E,$)|0)+Math.imul(O,X)|0,h=h+Math.imul(O,$)|0,n=n+Math.imul(_,Q)|0,o=(o=o+Math.imul(_,tt)|0)+Math.imul(x,Q)|0,h=h+Math.imul(x,tt)|0,n=n+Math.imul(y,nt)|0,o=(o=o+Math.imul(y,it)|0)+Math.imul(w,nt)|0,h=h+Math.imul(w,it)|0;var St=(l+(n=n+Math.imul(f,st)|0)|0)+((8191&(o=(o=o+Math.imul(f,at)|0)+Math.imul(m,st)|0))<<13)|0;l=((h=h+Math.imul(m,at)|0)+(o>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(T,Z),o=(o=Math.imul(T,K))+Math.imul(P,Z)|0,h=Math.imul(P,K),n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,$)|0)+Math.imul(j,X)|0,h=h+Math.imul(j,$)|0,n=n+Math.imul(E,Q)|0,o=(o=o+Math.imul(E,tt)|0)+Math.imul(O,Q)|0,h=h+Math.imul(O,tt)|0,n=n+Math.imul(_,nt)|0,o=(o=o+Math.imul(_,it)|0)+Math.imul(x,nt)|0,h=h+Math.imul(x,it)|0,n=n+Math.imul(y,st)|0,o=(o=o+Math.imul(y,at)|0)+Math.imul(w,st)|0,h=h+Math.imul(w,at)|0;var jt=(l+(n=n+Math.imul(f,ht)|0)|0)+((8191&(o=(o=o+Math.imul(f,ct)|0)+Math.imul(m,ht)|0))<<13)|0;l=((h=h+Math.imul(m,ct)|0)+(o>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(I,Z),o=(o=Math.imul(I,K))+Math.imul(R,Z)|0,h=Math.imul(R,K),n=n+Math.imul(T,X)|0,o=(o=o+Math.imul(T,$)|0)+Math.imul(P,X)|0,h=h+Math.imul(P,$)|0,n=n+Math.imul(S,Q)|0,o=(o=o+Math.imul(S,tt)|0)+Math.imul(j,Q)|0,h=h+Math.imul(j,tt)|0,n=n+Math.imul(E,nt)|0,o=(o=o+Math.imul(E,it)|0)+Math.imul(O,nt)|0,h=h+Math.imul(O,it)|0,n=n+Math.imul(_,st)|0,o=(o=o+Math.imul(_,at)|0)+Math.imul(x,st)|0,h=h+Math.imul(x,at)|0,n=n+Math.imul(y,ht)|0,o=(o=o+Math.imul(y,ct)|0)+Math.imul(w,ht)|0,h=h+Math.imul(w,ct)|0;var Ct=(l+(n=n+Math.imul(f,ft)|0)|0)+((8191&(o=(o=o+Math.imul(f,pt)|0)+Math.imul(m,ft)|0))<<13)|0;l=((h=h+Math.imul(m,pt)|0)+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(L,Z),o=(o=Math.imul(L,K))+Math.imul(F,Z)|0,h=Math.imul(F,K),n=n+Math.imul(I,X)|0,o=(o=o+Math.imul(I,$)|0)+Math.imul(R,X)|0,h=h+Math.imul(R,$)|0,n=n+Math.imul(T,Q)|0,o=(o=o+Math.imul(T,tt)|0)+Math.imul(P,Q)|0,h=h+Math.imul(P,tt)|0,n=n+Math.imul(S,nt)|0,o=(o=o+Math.imul(S,it)|0)+Math.imul(j,nt)|0,h=h+Math.imul(j,it)|0,n=n+Math.imul(E,st)|0,o=(o=o+Math.imul(E,at)|0)+Math.imul(O,st)|0,h=h+Math.imul(O,at)|0,n=n+Math.imul(_,ht)|0,o=(o=o+Math.imul(_,ct)|0)+Math.imul(x,ht)|0,h=h+Math.imul(x,ct)|0,n=n+Math.imul(y,ft)|0,o=(o=o+Math.imul(y,pt)|0)+Math.imul(w,ft)|0,h=h+Math.imul(w,pt)|0;var Tt=(l+(n=n+Math.imul(f,gt)|0)|0)+((8191&(o=(o=o+Math.imul(f,vt)|0)+Math.imul(m,gt)|0))<<13)|0;l=((h=h+Math.imul(m,vt)|0)+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(H,Z),o=(o=Math.imul(H,K))+Math.imul(U,Z)|0,h=Math.imul(U,K),n=n+Math.imul(L,X)|0,o=(o=o+Math.imul(L,$)|0)+Math.imul(F,X)|0,h=h+Math.imul(F,$)|0,n=n+Math.imul(I,Q)|0,o=(o=o+Math.imul(I,tt)|0)+Math.imul(R,Q)|0,h=h+Math.imul(R,tt)|0,n=n+Math.imul(T,nt)|0,o=(o=o+Math.imul(T,it)|0)+Math.imul(P,nt)|0,h=h+Math.imul(P,it)|0,n=n+Math.imul(S,st)|0,o=(o=o+Math.imul(S,at)|0)+Math.imul(j,st)|0,h=h+Math.imul(j,at)|0,n=n+Math.imul(E,ht)|0,o=(o=o+Math.imul(E,ct)|0)+Math.imul(O,ht)|0,h=h+Math.imul(O,ct)|0,n=n+Math.imul(_,ft)|0,o=(o=o+Math.imul(_,pt)|0)+Math.imul(x,ft)|0,h=h+Math.imul(x,pt)|0,n=n+Math.imul(y,gt)|0,o=(o=o+Math.imul(y,vt)|0)+Math.imul(w,gt)|0,h=h+Math.imul(w,vt)|0;var Pt=(l+(n=n+Math.imul(f,bt)|0)|0)+((8191&(o=(o=o+Math.imul(f,wt)|0)+Math.imul(m,bt)|0))<<13)|0;l=((h=h+Math.imul(m,wt)|0)+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,Z),o=(o=Math.imul(z,K))+Math.imul(W,Z)|0,h=Math.imul(W,K),n=n+Math.imul(H,X)|0,o=(o=o+Math.imul(H,$)|0)+Math.imul(U,X)|0,h=h+Math.imul(U,$)|0,n=n+Math.imul(L,Q)|0,o=(o=o+Math.imul(L,tt)|0)+Math.imul(F,Q)|0,h=h+Math.imul(F,tt)|0,n=n+Math.imul(I,nt)|0,o=(o=o+Math.imul(I,it)|0)+Math.imul(R,nt)|0,h=h+Math.imul(R,it)|0,n=n+Math.imul(T,st)|0,o=(o=o+Math.imul(T,at)|0)+Math.imul(P,st)|0,h=h+Math.imul(P,at)|0,n=n+Math.imul(S,ht)|0,o=(o=o+Math.imul(S,ct)|0)+Math.imul(j,ht)|0,h=h+Math.imul(j,ct)|0,n=n+Math.imul(E,ft)|0,o=(o=o+Math.imul(E,pt)|0)+Math.imul(O,ft)|0,h=h+Math.imul(O,pt)|0,n=n+Math.imul(_,gt)|0,o=(o=o+Math.imul(_,vt)|0)+Math.imul(x,gt)|0,h=h+Math.imul(x,vt)|0,n=n+Math.imul(y,bt)|0,o=(o=o+Math.imul(y,wt)|0)+Math.imul(w,bt)|0,h=h+Math.imul(w,wt)|0;var Nt=(l+(n=n+Math.imul(f,_t)|0)|0)+((8191&(o=(o=o+Math.imul(f,xt)|0)+Math.imul(m,_t)|0))<<13)|0;l=((h=h+Math.imul(m,xt)|0)+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(z,X),o=(o=Math.imul(z,$))+Math.imul(W,X)|0,h=Math.imul(W,$),n=n+Math.imul(H,Q)|0,o=(o=o+Math.imul(H,tt)|0)+Math.imul(U,Q)|0,h=h+Math.imul(U,tt)|0,n=n+Math.imul(L,nt)|0,o=(o=o+Math.imul(L,it)|0)+Math.imul(F,nt)|0,h=h+Math.imul(F,it)|0,n=n+Math.imul(I,st)|0,o=(o=o+Math.imul(I,at)|0)+Math.imul(R,st)|0,h=h+Math.imul(R,at)|0,n=n+Math.imul(T,ht)|0,o=(o=o+Math.imul(T,ct)|0)+Math.imul(P,ht)|0,h=h+Math.imul(P,ct)|0,n=n+Math.imul(S,ft)|0,o=(o=o+Math.imul(S,pt)|0)+Math.imul(j,ft)|0,h=h+Math.imul(j,pt)|0,n=n+Math.imul(E,gt)|0,o=(o=o+Math.imul(E,vt)|0)+Math.imul(O,gt)|0,h=h+Math.imul(O,vt)|0,n=n+Math.imul(_,bt)|0,o=(o=o+Math.imul(_,wt)|0)+Math.imul(x,bt)|0,h=h+Math.imul(x,wt)|0;var It=(l+(n=n+Math.imul(y,_t)|0)|0)+((8191&(o=(o=o+Math.imul(y,xt)|0)+Math.imul(w,_t)|0))<<13)|0;l=((h=h+Math.imul(w,xt)|0)+(o>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,Q),o=(o=Math.imul(z,tt))+Math.imul(W,Q)|0,h=Math.imul(W,tt),n=n+Math.imul(H,nt)|0,o=(o=o+Math.imul(H,it)|0)+Math.imul(U,nt)|0,h=h+Math.imul(U,it)|0,n=n+Math.imul(L,st)|0,o=(o=o+Math.imul(L,at)|0)+Math.imul(F,st)|0,h=h+Math.imul(F,at)|0,n=n+Math.imul(I,ht)|0,o=(o=o+Math.imul(I,ct)|0)+Math.imul(R,ht)|0,h=h+Math.imul(R,ct)|0,n=n+Math.imul(T,ft)|0,o=(o=o+Math.imul(T,pt)|0)+Math.imul(P,ft)|0,h=h+Math.imul(P,pt)|0,n=n+Math.imul(S,gt)|0,o=(o=o+Math.imul(S,vt)|0)+Math.imul(j,gt)|0,h=h+Math.imul(j,vt)|0,n=n+Math.imul(E,bt)|0,o=(o=o+Math.imul(E,wt)|0)+Math.imul(O,bt)|0,h=h+Math.imul(O,wt)|0;var Rt=(l+(n=n+Math.imul(_,_t)|0)|0)+((8191&(o=(o=o+Math.imul(_,xt)|0)+Math.imul(x,_t)|0))<<13)|0;l=((h=h+Math.imul(x,xt)|0)+(o>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,nt),o=(o=Math.imul(z,it))+Math.imul(W,nt)|0,h=Math.imul(W,it),n=n+Math.imul(H,st)|0,o=(o=o+Math.imul(H,at)|0)+Math.imul(U,st)|0,h=h+Math.imul(U,at)|0,n=n+Math.imul(L,ht)|0,o=(o=o+Math.imul(L,ct)|0)+Math.imul(F,ht)|0,h=h+Math.imul(F,ct)|0,n=n+Math.imul(I,ft)|0,o=(o=o+Math.imul(I,pt)|0)+Math.imul(R,ft)|0,h=h+Math.imul(R,pt)|0,n=n+Math.imul(T,gt)|0,o=(o=o+Math.imul(T,vt)|0)+Math.imul(P,gt)|0,h=h+Math.imul(P,vt)|0,n=n+Math.imul(S,bt)|0,o=(o=o+Math.imul(S,wt)|0)+Math.imul(j,bt)|0,h=h+Math.imul(j,wt)|0;var Bt=(l+(n=n+Math.imul(E,_t)|0)|0)+((8191&(o=(o=o+Math.imul(E,xt)|0)+Math.imul(O,_t)|0))<<13)|0;l=((h=h+Math.imul(O,xt)|0)+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,st),o=(o=Math.imul(z,at))+Math.imul(W,st)|0,h=Math.imul(W,at),n=n+Math.imul(H,ht)|0,o=(o=o+Math.imul(H,ct)|0)+Math.imul(U,ht)|0,h=h+Math.imul(U,ct)|0,n=n+Math.imul(L,ft)|0,o=(o=o+Math.imul(L,pt)|0)+Math.imul(F,ft)|0,h=h+Math.imul(F,pt)|0,n=n+Math.imul(I,gt)|0,o=(o=o+Math.imul(I,vt)|0)+Math.imul(R,gt)|0,h=h+Math.imul(R,vt)|0,n=n+Math.imul(T,bt)|0,o=(o=o+Math.imul(T,wt)|0)+Math.imul(P,bt)|0,h=h+Math.imul(P,wt)|0;var Lt=(l+(n=n+Math.imul(S,_t)|0)|0)+((8191&(o=(o=o+Math.imul(S,xt)|0)+Math.imul(j,_t)|0))<<13)|0;l=((h=h+Math.imul(j,xt)|0)+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,ht),o=(o=Math.imul(z,ct))+Math.imul(W,ht)|0,h=Math.imul(W,ct),n=n+Math.imul(H,ft)|0,o=(o=o+Math.imul(H,pt)|0)+Math.imul(U,ft)|0,h=h+Math.imul(U,pt)|0,n=n+Math.imul(L,gt)|0,o=(o=o+Math.imul(L,vt)|0)+Math.imul(F,gt)|0,h=h+Math.imul(F,vt)|0,n=n+Math.imul(I,bt)|0,o=(o=o+Math.imul(I,wt)|0)+Math.imul(R,bt)|0,h=h+Math.imul(R,wt)|0;var qt=(l+(n=n+Math.imul(T,_t)|0)|0)+((8191&(o=(o=o+Math.imul(T,xt)|0)+Math.imul(P,_t)|0))<<13)|0;l=((h=h+Math.imul(P,xt)|0)+(o>>>13)|0)+(qt>>>26)|0,qt&=67108863,n=Math.imul(z,ft),o=(o=Math.imul(z,pt))+Math.imul(W,ft)|0,h=Math.imul(W,pt),n=n+Math.imul(H,gt)|0,o=(o=o+Math.imul(H,vt)|0)+Math.imul(U,gt)|0,h=h+Math.imul(U,vt)|0,n=n+Math.imul(L,bt)|0,o=(o=o+Math.imul(L,wt)|0)+Math.imul(F,bt)|0,h=h+Math.imul(F,wt)|0;var Ft=(l+(n=n+Math.imul(I,_t)|0)|0)+((8191&(o=(o=o+Math.imul(I,xt)|0)+Math.imul(R,_t)|0))<<13)|0;l=((h=h+Math.imul(R,xt)|0)+(o>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,n=Math.imul(z,gt),o=(o=Math.imul(z,vt))+Math.imul(W,gt)|0,h=Math.imul(W,vt),n=n+Math.imul(H,bt)|0,o=(o=o+Math.imul(H,wt)|0)+Math.imul(U,bt)|0,h=h+Math.imul(U,wt)|0;var Dt=(l+(n=n+Math.imul(L,_t)|0)|0)+((8191&(o=(o=o+Math.imul(L,xt)|0)+Math.imul(F,_t)|0))<<13)|0;l=((h=h+Math.imul(F,xt)|0)+(o>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,n=Math.imul(z,bt),o=(o=Math.imul(z,wt))+Math.imul(W,bt)|0,h=Math.imul(W,wt);var Ht=(l+(n=n+Math.imul(H,_t)|0)|0)+((8191&(o=(o=o+Math.imul(H,xt)|0)+Math.imul(U,_t)|0))<<13)|0;l=((h=h+Math.imul(U,xt)|0)+(o>>>13)|0)+(Ht>>>26)|0,Ht&=67108863;var Ut=(l+(n=Math.imul(z,_t))|0)+((8191&(o=(o=Math.imul(z,xt))+Math.imul(W,_t)|0))<<13)|0;return l=((h=Math.imul(W,xt))+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,c[0]=kt,c[1]=Et,c[2]=Ot,c[3]=At,c[4]=St,c[5]=jt,c[6]=Ct,c[7]=Tt,c[8]=Pt,c[9]=Nt,c[10]=It,c[11]=Rt,c[12]=Bt,c[13]=Lt,c[14]=qt,c[15]=Ft,c[16]=Dt,c[17]=Ht,c[18]=Ut,0!==l&&(c[19]=l,r.length++),r};function M(t,e,r){return(new _).mulp(t,e,r)}function _(t,e){this.x=t,this.y=e}Math.imul||(w=y),h.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?w(this,t,e):n<63?y(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,o=0,h=0;h<r.length-1;h++){var c=o;o=0;for(var l=67108863&n,d=Math.min(h,e.length-1),f=Math.max(0,h-t.length+1);f<=d;f++){var i=h-f,m=(0|t.words[i])*(0|e.words[f]),v=67108863&m;l=67108863&(v=v+l|0),o+=(c=(c=c+(m/67108864|0)|0)+(v>>>26)|0)>>>26,c&=67108863}r.words[h]=l,n=c,c=o}return 0!==n?r.words[h]=n:r.length--,r.strip()}(this,t,e):M(this,t,e),r},_.prototype.makeRBT=function(t){for(var e=new Array(t),r=h.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},_.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},_.prototype.permute=function(t,e,r,n,o,h){for(var i=0;i<h;i++)n[i]=e[t[i]],o[i]=r[t[i]]},_.prototype.transform=function(t,e,r,n,o,h){this.permute(h,t,e,r,n,o);for(var s=1;s<o;s<<=1)for(var c=s<<1,l=Math.cos(2*Math.PI/c),d=Math.sin(2*Math.PI/c),p=0;p<o;p+=c)for(var f=l,m=d,v=0;v<s;v++){var y=r[p+v],w=n[p+v],M=r[p+v+s],_=n[p+v+s],x=f*M-m*_;_=f*_+m*M,M=x,r[p+v]=y+M,n[p+v]=w+_,r[p+v+s]=y-M,n[p+v+s]=w-_,v!==c&&(x=l*f-d*m,m=l*m+d*f,f=x)}},_.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},_.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},_.prototype.convert13b=function(t,e,r,o){for(var h=0,i=0;i<e;i++)h+=0|t[i],r[2*i]=8191&h,h>>>=13,r[2*i+1]=8191&h,h>>>=13;for(i=2*e;i<o;++i)r[i]=0;n(0===h),n(0==(-8192&h))},_.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},_.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),o=this.makeRBT(n),h=this.stub(n),c=new Array(n),l=new Array(n),d=new Array(n),f=new Array(n),m=new Array(n),v=new Array(n),y=r.words;y.length=n,this.convert13b(t.words,t.length,c,n),this.convert13b(e.words,e.length,f,n),this.transform(c,h,l,d,n,o),this.transform(f,h,m,v,n,o);for(var i=0;i<n;i++){var w=l[i]*m[i]-d[i]*v[i];d[i]=l[i]*v[i]+d[i]*m[i],l[i]=w}return this.conjugate(l,d,n),this.transform(l,d,y,h,n,o),this.conjugate(y,h,n),this.normalize13b(y,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},h.prototype.mul=function(t){var e=new h(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},h.prototype.mulf=function(t){var e=new h(null);return e.words=new Array(this.length+t.length),M(this,t,e)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,o=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,o=r%26;e[r]=(t.words[n]&1<<o)>>>o}return e}(t);if(0===e.length)return new h(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var q=r.sqr();i<e.length;i++,q=q.sqr())0!==e[i]&&(r=r.mul(q));return r},h.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var i,e=t%26,s=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var o=0;for(i=0;i<this.length;i++){var h=this.words[i]&r,c=(0|this.words[i])-h<<e;this.words[i]=c|o,o=h>>>26-e}o&&(this.words[i]=o,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this.strip()},h.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,e,r){var o;n("number"==typeof t&&t>=0),o=e?(e-e%26)/26:0;var h=t%26,s=Math.min((t-h)/26,this.length),mask=67108863^67108863>>>h<<h,c=r;if(o-=s,o=Math.max(0,o),c){for(var i=0;i<s;i++)c.words[i]=this.words[i];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var l=0;for(i=this.length-1;i>=0&&(0!==l||i>=o);i--){var d=0|this.words[i];this.words[i]=l<<26-h|d>>>h,l=d&mask}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26,q=1<<e;return!(this.length<=s)&&!!(this.words[s]&q)},h.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==e&&s++,this.length=Math.min(s,this.length),0!==e){var mask=67108863^67108863>>>e<<e;this.words[this.length-1]&=mask}return this.strip()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},h.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(t,e,r){var i,o,h=t.length+r;this._expand(h);var c=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+c;var l=(0|t.words[i])*e;c=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)c=(o=(0|this.words[i+r])+c)>>26,this.words[i+r]=67108863&o;if(0===c)return this.strip();for(n(-1===c),c=0,i=0;i<this.length;i++)c=(o=-(0|this.words[i])+c)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},h.prototype._wordDiv=function(t,e){var r=(this.length,t.length),a=this.clone(),b=t,n=0|b.words[b.length-1];0!==(r=26-this._countBits(n))&&(b=b.ushln(r),a.iushln(r),n=0|b.words[b.length-1]);var q,o=a.length-b.length;if("mod"!==e){(q=new h(null)).length=o+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var c=a.clone()._ishlnsubmul(b,1,o);0===c.negative&&(a=c,q&&(q.words[o]=1));for(var l=o-1;l>=0;l--){var d=67108864*(0|a.words[b.length+l])+(0|a.words[b.length+l-1]);for(d=Math.min(d/n|0,67108863),a._ishlnsubmul(b,d,l);0!==a.negative;)d--,a.negative=0,a._ishlnsubmul(b,1,l),a.isZero()||(a.negative^=1);q&&(q.words[l]=d)}return q&&q.strip(),a.strip(),"div"!==e&&0!==r&&a.iushrn(r),{div:q||null,mod:a}},h.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(c=this.neg().divmod(t,e),"mod"!==e&&(div=c.div.neg()),"div"!==e&&(o=c.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:div,mod:o}):0===this.negative&&0!==t.negative?(c=this.divmod(t.neg(),e),"mod"!==e&&(div=c.div.neg()),{div:div,mod:c.mod}):0!=(this.negative&t.negative)?(c=this.neg().divmod(t.neg(),e),"div"!==e&&(o=c.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:c.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new h(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modn(t.words[0]))}:this._wordDiv(t,e);var div,o,c},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),o=t.andln(1),h=r.cmp(n);return h<0||1===o&&0===h?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},h.prototype.modn=function(t){n(t<=67108863);for(var p=(1<<26)%t,e=0,i=this.length-1;i>=0;i--)e=(p*e+(0|this.words[i]))%t;return e},h.prototype.idivn=function(t){n(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(p){n(0===p.negative),n(!p.isZero());var t=this,e=p.clone();t=0!==t.negative?t.umod(p):t.clone();for(var r=new h(1),o=new h(0),c=new h(0),l=new h(1),g=0;t.isEven()&&e.isEven();)t.iushrn(1),e.iushrn(1),++g;for(var d=e.clone(),f=t.clone();!t.isZero();){for(var i=0,m=1;0==(t.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(t.iushrn(i);i-- >0;)(r.isOdd()||o.isOdd())&&(r.iadd(d),o.isub(f)),r.iushrn(1),o.iushrn(1);for(var v=0,y=1;0==(e.words[0]&y)&&v<26;++v,y<<=1);if(v>0)for(e.iushrn(v);v-- >0;)(c.isOdd()||l.isOdd())&&(c.iadd(d),l.isub(f)),c.iushrn(1),l.iushrn(1);t.cmp(e)>=0?(t.isub(e),r.isub(c),o.isub(l)):(e.isub(t),c.isub(r),l.isub(o))}return{a:c,b:l,gcd:e.iushln(g)}},h.prototype._invmp=function(p){n(0===p.negative),n(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var t,e=new h(1),r=new h(0),o=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,c=1;0==(a.words[0]&c)&&i<26;++i,c<<=1);if(i>0)for(a.iushrn(i);i-- >0;)e.isOdd()&&e.iadd(o),e.iushrn(1);for(var l=0,d=1;0==(b.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(b.iushrn(l);l-- >0;)r.isOdd()&&r.iadd(o),r.iushrn(1);a.cmp(b)>=0?(a.isub(b),e.isub(r)):(b.isub(a),r.isub(e))}return(t=0===a.cmpn(1)?e:r).cmpn(0)<0&&t.iadd(p),t},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var a=this.clone(),b=t.clone();a.negative=0,b.negative=0;for(var e=0;a.isEven()&&b.isEven();e++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(r<0){var n=a;a=b,b=n}else if(0===r||0===b.cmpn(1))break;a.isub(b)}return b.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,s=(t-e)/26,q=1<<e;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var r=q,i=s;0!==r&&i<this.length;i++){var o=0|this.words[i];r=(o+=r)>>>26,o&=67108863,this.words[i]=o}return 0!==r&&(this.words[i]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var o=0|this.words[0];e=o===t?0:o<t?-1:1}return 0!==this.negative?0|-e:e},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|t.words[i];if(a!==b){a<b?e=-1:a>b&&(e=1);break}}return e},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new j(t)},h.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},h.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},h.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var x={k256:null,p224:null,p192:null,p25519:null};function k(t,p){this.name=t,this.p=new h(p,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function O(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function j(t){if("string"==typeof t){var e=h._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function C(t){j.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},k.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},k.prototype.split=function(input,t){input.iushrn(this.n,0,t)},k.prototype.imulK=function(t){return t.imul(this.k)},o(E,k),E.prototype.split=function(input,output){for(var mask=4194303,t=Math.min(input.length,9),i=0;i<t;i++)output.words[i]=input.words[i];if(output.length=t,input.length<=9)return input.words[0]=0,void(input.length=1);var e=input.words[9];for(output.words[output.length++]=e&mask,i=10;i<input.length;i++){var r=0|input.words[i];input.words[i-10]=(r&mask)<<4|e>>>22,e=r}e>>>=22,input.words[i-10]=e,0===e&&input.length>10?input.length-=10:input.length-=9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(O,k),o(A,k),o(S,k),S.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},h._prime=function(t){if(x[t])return x[t];var e;if("k256"===t)e=new E;else if("p224"===t)e=new O;else if("p192"===t)e=new A;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return x[t]=e,e},j.prototype._verify1=function(a){n(0===a.negative,"red works only with positives"),n(a.red,"red works only with red numbers")},j.prototype._verify2=function(a,b){n(0==(a.negative|b.negative),"red works only with positives"),n(a.red&&a.red===b.red,"red works only with red numbers")},j.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},j.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},j.prototype.add=function(a,b){this._verify2(a,b);var t=a.add(b);return t.cmp(this.m)>=0&&t.isub(this.m),t._forceRed(this)},j.prototype.iadd=function(a,b){this._verify2(a,b);var t=a.iadd(b);return t.cmp(this.m)>=0&&t.isub(this.m),t},j.prototype.sub=function(a,b){this._verify2(a,b);var t=a.sub(b);return t.cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},j.prototype.isub=function(a,b){this._verify2(a,b);var t=a.isub(b);return t.cmpn(0)<0&&t.iadd(this.m),t},j.prototype.shl=function(a,t){return this._verify1(a),this.imod(a.ushln(t))},j.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},j.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},j.prototype.isqr=function(a){return this.imul(a,a.clone())},j.prototype.sqr=function(a){return this.mul(a,a)},j.prototype.sqrt=function(a){if(a.isZero())return a.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var e=this.m.add(new h(1)).iushrn(2);return this.pow(a,e)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);n(!q.isZero());var r=new h(1).toRed(this),o=r.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new h(2*l*l).toRed(this);0!==this.pow(l,c).cmp(o);)l.redIAdd(o);for(var d=this.pow(l,q),f=this.pow(a,q.addn(1).iushrn(1)),m=this.pow(a,q),v=s;0!==m.cmp(r);){for(var y=m,i=0;0!==y.cmp(r);i++)y=y.redSqr();n(i<v);var b=this.pow(d,new h(1).iushln(v-i-1));f=f.redMul(b),d=b.redSqr(),m=m.redMul(d),v=i}return f},j.prototype.invm=function(a){var t=a._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},j.prototype.pow=function(a,t){if(t.isZero())return new h(1);if(0===t.cmpn(1))return a.clone();var e=new Array(16);e[0]=new h(1).toRed(this),e[1]=a;for(var i=2;i<e.length;i++)e[i]=this.mul(e[i-1],a);var r=e[0],n=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],d=c-1;d>=0;d--){var f=l>>d&1;r!==e[0]&&(r=this.sqr(r)),0!==f||0!==n?(n<<=1,n|=f,(4===++o||0===i&&0===d)&&(r=this.mul(r,e[n]),o=0,n=0)):o=0}c=26}return r},j.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},j.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},h.mont=function(t){return new C(t)},o(C,j),C.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},C.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},C.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),r=u;return u.cmp(this.m)>=0?r=u.isub(this.m):u.cmpn(0)<0&&(r=u.iadd(this.m)),r._forceRed(this)},C.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new h(0)._forceRed(this);var t=a.mul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),r=u;return u.cmp(this.m)>=0?r=u.isub(this.m):u.cmpn(0)<0&&(r=u.iadd(this.m)),r._forceRed(this)},C.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(123)(t))},747:function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function h(t,base,e){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==base&&"be"!==base||(e=base,base=10),this._init(t||0,base||10,e||"be"))}var c;"object"==typeof t?t.exports=h:e.BN=h,h.BN=h,h.wordSize=26;try{c=r(16).Buffer}catch(t){}function l(t,e,r){for(var n=0,o=Math.min(t.length,r),i=e;i<o;i++){var h=t.charCodeAt(i)-48;n<<=4,n|=h>=49&&h<=54?h-49+10:h>=17&&h<=22?h-17+10:15&h}return n}function d(t,e,r,n){for(var o=0,h=Math.min(t.length,r),i=e;i<h;i++){var c=t.charCodeAt(i)-48;o*=n,o+=c>=49?c-49+10:c>=17?c-17+10:c}return o}h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,e){return t.cmp(e)>0?t:e},h.min=function(t,e){return t.cmp(e)<0?t:e},h.prototype._init=function(t,base,e){if("number"==typeof t)return this._initNumber(t,base,e);if("object"==typeof t)return this._initArray(t,base,e);"hex"===base&&(base=16),n(base===(0|base)&&base>=2&&base<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===base?this._parseHex(t,r):this._parseBase(t,base,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===e&&this._initArray(this.toArray(),base,e)},h.prototype._initNumber=function(t,base,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this._initArray(this.toArray(),base,e)},h.prototype._initArray=function(t,base,e){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,o,h=0;if("be"===e)for(i=t.length-1,r=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[r]|=o<<h&67108863,this.words[r+1]=o>>>26-h&67108863,(h+=24)>=26&&(h-=26,r++);else if("le"===e)for(i=0,r=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[r]|=o<<h&67108863,this.words[r+1]=o>>>26-h&67108863,(h+=24)>=26&&(h-=26,r++);return this.strip()},h.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=l(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=l(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},h.prototype._parseBase=function(t,base,e){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=base)r++;r--,n=n/base|0;for(var o=t.length-e,h=o%r,c=Math.min(o,o-h)+e,l=0,i=e;i<c;i+=r)l=d(t,i,i+r,base),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==h){var f=1;for(l=d(t,i,t.length,base),i=0;i<h;i++)f*=base;this.imuln(f),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},h.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var a=0|t.words[0],b=0|e.words[0],o=a*b,h=67108863&o,c=o/67108864|0;r.words[0]=h;for(var l=1;l<n;l++){for(var d=c>>>26,f=67108863&c,m=Math.min(l,e.length-1),v=Math.max(0,l-t.length+1);v<=m;v++){var i=l-v|0;d+=(o=(a=0|t.words[i])*(b=0|e.words[v])+f)/67108864|0,f=67108863&o}r.words[l]=0|f,c=0|d}return 0!==c?r.words[l]=0|c:r.length--,r.strip()}h.prototype.toString=function(base,t){var e;if(t=0|t||1,16===(base=base||10)||"hex"===base){e="";for(var r=0,o=0,i=0;i<this.length;i++){var h=this.words[i],c=(16777215&(h<<r|o)).toString(16);e=0!==(o=h>>>24-r&16777215)||i!==this.length-1?f[6-c.length]+c+e:c+e,(r+=2)>=26&&(r-=26,i--)}for(0!==o&&(e=o.toString(16)+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(base===(0|base)&&base>=2&&base<=36){var l=m[base],d=v[base];e="";var y=this.clone();for(y.negative=0;!y.isZero();){var w=y.modn(d).toString(base);e=(y=y.idivn(d)).isZero()?w+e:f[l-w.length]+w+e}for(this.isZero()&&(e="0"+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}n(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(t,e){return n(void 0!==c),this.toArrayLike(c,t,e)},h.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},h.prototype.toArrayLike=function(t,e,r){var o=this.byteLength(),h=r||Math.max(1,o);n(o<=h,"byte array longer than desired length"),n(h>0,"Requested array length <= 0"),this.strip();var b,i,c="le"===e,l=new t(h),q=this.clone();if(c){for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),l[i]=b;for(;i<h;i++)l[i]=0}else{for(i=0;i<h-o;i++)l[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),l[h-i-1]=b}return l},Math.clz32?h.prototype._countBits=function(t){return 32-Math.clz32(t)}:h.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},h.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},h.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(t+=b,26!==b)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},h.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var b;b=this.length>t.length?t:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=b.length,this.strip()},h.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var a,b;this.length>t.length?(a=this,b=t):(a=t,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},h.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,o=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<o:this.words[r]&~(1<<o),this.strip()},h.prototype.iadd=function(t){var e,a,b;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(a=this,b=t):(a=t,b=this);for(var r=0,i=0;i<b.length;i++)e=(0|a.words[i])+(0|b.words[i])+r,this.words[i]=67108863&e,r=e>>>26;for(;0!==r&&i<a.length;i++)e=(0|a.words[i])+r,this.words[i]=67108863&e,r=e>>>26;if(this.length=a.length,0!==r)this.words[this.length]=r,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},h.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var a,b,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(a=this,b=t):(a=t,b=this);for(var n=0,i=0;i<b.length;i++)n=(e=(0|a.words[i])-(0|b.words[i])+n)>>26,this.words[i]=67108863&e;for(;0!==n&&i<a.length;i++)n=(e=(0|a.words[i])+n)>>26,this.words[i]=67108863&e;if(0===n&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(t){return this.clone().isub(t)};var w=function(t,e,r){var n,o,h,a=t.words,b=e.words,c=r.words,l=0,d=0|a[0],f=8191&d,m=d>>>13,v=0|a[1],y=8191&v,w=v>>>13,M=0|a[2],_=8191&M,x=M>>>13,k=0|a[3],E=8191&k,O=k>>>13,A=0|a[4],S=8191&A,j=A>>>13,C=0|a[5],T=8191&C,P=C>>>13,N=0|a[6],I=8191&N,R=N>>>13,B=0|a[7],L=8191&B,F=B>>>13,D=0|a[8],H=8191&D,U=D>>>13,V=0|a[9],z=8191&V,W=V>>>13,G=0|b[0],Z=8191&G,K=G>>>13,J=0|b[1],X=8191&J,$=J>>>13,Y=0|b[2],Q=8191&Y,tt=Y>>>13,et=0|b[3],nt=8191&et,it=et>>>13,ot=0|b[4],st=8191&ot,at=ot>>>13,ut=0|b[5],ht=8191&ut,ct=ut>>>13,lt=0|b[6],ft=8191&lt,pt=lt>>>13,mt=0|b[7],gt=8191&mt,vt=mt>>>13,yt=0|b[8],bt=8191&yt,wt=yt>>>13,Mt=0|b[9],_t=8191&Mt,xt=Mt>>>13;r.negative=t.negative^e.negative,r.length=19;var kt=(l+(n=Math.imul(f,Z))|0)+((8191&(o=(o=Math.imul(f,K))+Math.imul(m,Z)|0))<<13)|0;l=((h=Math.imul(m,K))+(o>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(y,Z),o=(o=Math.imul(y,K))+Math.imul(w,Z)|0,h=Math.imul(w,K);var Et=(l+(n=n+Math.imul(f,X)|0)|0)+((8191&(o=(o=o+Math.imul(f,$)|0)+Math.imul(m,X)|0))<<13)|0;l=((h=h+Math.imul(m,$)|0)+(o>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(_,Z),o=(o=Math.imul(_,K))+Math.imul(x,Z)|0,h=Math.imul(x,K),n=n+Math.imul(y,X)|0,o=(o=o+Math.imul(y,$)|0)+Math.imul(w,X)|0,h=h+Math.imul(w,$)|0;var Ot=(l+(n=n+Math.imul(f,Q)|0)|0)+((8191&(o=(o=o+Math.imul(f,tt)|0)+Math.imul(m,Q)|0))<<13)|0;l=((h=h+Math.imul(m,tt)|0)+(o>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(E,Z),o=(o=Math.imul(E,K))+Math.imul(O,Z)|0,h=Math.imul(O,K),n=n+Math.imul(_,X)|0,o=(o=o+Math.imul(_,$)|0)+Math.imul(x,X)|0,h=h+Math.imul(x,$)|0,n=n+Math.imul(y,Q)|0,o=(o=o+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,h=h+Math.imul(w,tt)|0;var At=(l+(n=n+Math.imul(f,nt)|0)|0)+((8191&(o=(o=o+Math.imul(f,it)|0)+Math.imul(m,nt)|0))<<13)|0;l=((h=h+Math.imul(m,it)|0)+(o>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(S,Z),o=(o=Math.imul(S,K))+Math.imul(j,Z)|0,h=Math.imul(j,K),n=n+Math.imul(E,X)|0,o=(o=o+Math.imul(E,$)|0)+Math.imul(O,X)|0,h=h+Math.imul(O,$)|0,n=n+Math.imul(_,Q)|0,o=(o=o+Math.imul(_,tt)|0)+Math.imul(x,Q)|0,h=h+Math.imul(x,tt)|0,n=n+Math.imul(y,nt)|0,o=(o=o+Math.imul(y,it)|0)+Math.imul(w,nt)|0,h=h+Math.imul(w,it)|0;var St=(l+(n=n+Math.imul(f,st)|0)|0)+((8191&(o=(o=o+Math.imul(f,at)|0)+Math.imul(m,st)|0))<<13)|0;l=((h=h+Math.imul(m,at)|0)+(o>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(T,Z),o=(o=Math.imul(T,K))+Math.imul(P,Z)|0,h=Math.imul(P,K),n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,$)|0)+Math.imul(j,X)|0,h=h+Math.imul(j,$)|0,n=n+Math.imul(E,Q)|0,o=(o=o+Math.imul(E,tt)|0)+Math.imul(O,Q)|0,h=h+Math.imul(O,tt)|0,n=n+Math.imul(_,nt)|0,o=(o=o+Math.imul(_,it)|0)+Math.imul(x,nt)|0,h=h+Math.imul(x,it)|0,n=n+Math.imul(y,st)|0,o=(o=o+Math.imul(y,at)|0)+Math.imul(w,st)|0,h=h+Math.imul(w,at)|0;var jt=(l+(n=n+Math.imul(f,ht)|0)|0)+((8191&(o=(o=o+Math.imul(f,ct)|0)+Math.imul(m,ht)|0))<<13)|0;l=((h=h+Math.imul(m,ct)|0)+(o>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(I,Z),o=(o=Math.imul(I,K))+Math.imul(R,Z)|0,h=Math.imul(R,K),n=n+Math.imul(T,X)|0,o=(o=o+Math.imul(T,$)|0)+Math.imul(P,X)|0,h=h+Math.imul(P,$)|0,n=n+Math.imul(S,Q)|0,o=(o=o+Math.imul(S,tt)|0)+Math.imul(j,Q)|0,h=h+Math.imul(j,tt)|0,n=n+Math.imul(E,nt)|0,o=(o=o+Math.imul(E,it)|0)+Math.imul(O,nt)|0,h=h+Math.imul(O,it)|0,n=n+Math.imul(_,st)|0,o=(o=o+Math.imul(_,at)|0)+Math.imul(x,st)|0,h=h+Math.imul(x,at)|0,n=n+Math.imul(y,ht)|0,o=(o=o+Math.imul(y,ct)|0)+Math.imul(w,ht)|0,h=h+Math.imul(w,ct)|0;var Ct=(l+(n=n+Math.imul(f,ft)|0)|0)+((8191&(o=(o=o+Math.imul(f,pt)|0)+Math.imul(m,ft)|0))<<13)|0;l=((h=h+Math.imul(m,pt)|0)+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(L,Z),o=(o=Math.imul(L,K))+Math.imul(F,Z)|0,h=Math.imul(F,K),n=n+Math.imul(I,X)|0,o=(o=o+Math.imul(I,$)|0)+Math.imul(R,X)|0,h=h+Math.imul(R,$)|0,n=n+Math.imul(T,Q)|0,o=(o=o+Math.imul(T,tt)|0)+Math.imul(P,Q)|0,h=h+Math.imul(P,tt)|0,n=n+Math.imul(S,nt)|0,o=(o=o+Math.imul(S,it)|0)+Math.imul(j,nt)|0,h=h+Math.imul(j,it)|0,n=n+Math.imul(E,st)|0,o=(o=o+Math.imul(E,at)|0)+Math.imul(O,st)|0,h=h+Math.imul(O,at)|0,n=n+Math.imul(_,ht)|0,o=(o=o+Math.imul(_,ct)|0)+Math.imul(x,ht)|0,h=h+Math.imul(x,ct)|0,n=n+Math.imul(y,ft)|0,o=(o=o+Math.imul(y,pt)|0)+Math.imul(w,ft)|0,h=h+Math.imul(w,pt)|0;var Tt=(l+(n=n+Math.imul(f,gt)|0)|0)+((8191&(o=(o=o+Math.imul(f,vt)|0)+Math.imul(m,gt)|0))<<13)|0;l=((h=h+Math.imul(m,vt)|0)+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(H,Z),o=(o=Math.imul(H,K))+Math.imul(U,Z)|0,h=Math.imul(U,K),n=n+Math.imul(L,X)|0,o=(o=o+Math.imul(L,$)|0)+Math.imul(F,X)|0,h=h+Math.imul(F,$)|0,n=n+Math.imul(I,Q)|0,o=(o=o+Math.imul(I,tt)|0)+Math.imul(R,Q)|0,h=h+Math.imul(R,tt)|0,n=n+Math.imul(T,nt)|0,o=(o=o+Math.imul(T,it)|0)+Math.imul(P,nt)|0,h=h+Math.imul(P,it)|0,n=n+Math.imul(S,st)|0,o=(o=o+Math.imul(S,at)|0)+Math.imul(j,st)|0,h=h+Math.imul(j,at)|0,n=n+Math.imul(E,ht)|0,o=(o=o+Math.imul(E,ct)|0)+Math.imul(O,ht)|0,h=h+Math.imul(O,ct)|0,n=n+Math.imul(_,ft)|0,o=(o=o+Math.imul(_,pt)|0)+Math.imul(x,ft)|0,h=h+Math.imul(x,pt)|0,n=n+Math.imul(y,gt)|0,o=(o=o+Math.imul(y,vt)|0)+Math.imul(w,gt)|0,h=h+Math.imul(w,vt)|0;var Pt=(l+(n=n+Math.imul(f,bt)|0)|0)+((8191&(o=(o=o+Math.imul(f,wt)|0)+Math.imul(m,bt)|0))<<13)|0;l=((h=h+Math.imul(m,wt)|0)+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,Z),o=(o=Math.imul(z,K))+Math.imul(W,Z)|0,h=Math.imul(W,K),n=n+Math.imul(H,X)|0,o=(o=o+Math.imul(H,$)|0)+Math.imul(U,X)|0,h=h+Math.imul(U,$)|0,n=n+Math.imul(L,Q)|0,o=(o=o+Math.imul(L,tt)|0)+Math.imul(F,Q)|0,h=h+Math.imul(F,tt)|0,n=n+Math.imul(I,nt)|0,o=(o=o+Math.imul(I,it)|0)+Math.imul(R,nt)|0,h=h+Math.imul(R,it)|0,n=n+Math.imul(T,st)|0,o=(o=o+Math.imul(T,at)|0)+Math.imul(P,st)|0,h=h+Math.imul(P,at)|0,n=n+Math.imul(S,ht)|0,o=(o=o+Math.imul(S,ct)|0)+Math.imul(j,ht)|0,h=h+Math.imul(j,ct)|0,n=n+Math.imul(E,ft)|0,o=(o=o+Math.imul(E,pt)|0)+Math.imul(O,ft)|0,h=h+Math.imul(O,pt)|0,n=n+Math.imul(_,gt)|0,o=(o=o+Math.imul(_,vt)|0)+Math.imul(x,gt)|0,h=h+Math.imul(x,vt)|0,n=n+Math.imul(y,bt)|0,o=(o=o+Math.imul(y,wt)|0)+Math.imul(w,bt)|0,h=h+Math.imul(w,wt)|0;var Nt=(l+(n=n+Math.imul(f,_t)|0)|0)+((8191&(o=(o=o+Math.imul(f,xt)|0)+Math.imul(m,_t)|0))<<13)|0;l=((h=h+Math.imul(m,xt)|0)+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(z,X),o=(o=Math.imul(z,$))+Math.imul(W,X)|0,h=Math.imul(W,$),n=n+Math.imul(H,Q)|0,o=(o=o+Math.imul(H,tt)|0)+Math.imul(U,Q)|0,h=h+Math.imul(U,tt)|0,n=n+Math.imul(L,nt)|0,o=(o=o+Math.imul(L,it)|0)+Math.imul(F,nt)|0,h=h+Math.imul(F,it)|0,n=n+Math.imul(I,st)|0,o=(o=o+Math.imul(I,at)|0)+Math.imul(R,st)|0,h=h+Math.imul(R,at)|0,n=n+Math.imul(T,ht)|0,o=(o=o+Math.imul(T,ct)|0)+Math.imul(P,ht)|0,h=h+Math.imul(P,ct)|0,n=n+Math.imul(S,ft)|0,o=(o=o+Math.imul(S,pt)|0)+Math.imul(j,ft)|0,h=h+Math.imul(j,pt)|0,n=n+Math.imul(E,gt)|0,o=(o=o+Math.imul(E,vt)|0)+Math.imul(O,gt)|0,h=h+Math.imul(O,vt)|0,n=n+Math.imul(_,bt)|0,o=(o=o+Math.imul(_,wt)|0)+Math.imul(x,bt)|0,h=h+Math.imul(x,wt)|0;var It=(l+(n=n+Math.imul(y,_t)|0)|0)+((8191&(o=(o=o+Math.imul(y,xt)|0)+Math.imul(w,_t)|0))<<13)|0;l=((h=h+Math.imul(w,xt)|0)+(o>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,Q),o=(o=Math.imul(z,tt))+Math.imul(W,Q)|0,h=Math.imul(W,tt),n=n+Math.imul(H,nt)|0,o=(o=o+Math.imul(H,it)|0)+Math.imul(U,nt)|0,h=h+Math.imul(U,it)|0,n=n+Math.imul(L,st)|0,o=(o=o+Math.imul(L,at)|0)+Math.imul(F,st)|0,h=h+Math.imul(F,at)|0,n=n+Math.imul(I,ht)|0,o=(o=o+Math.imul(I,ct)|0)+Math.imul(R,ht)|0,h=h+Math.imul(R,ct)|0,n=n+Math.imul(T,ft)|0,o=(o=o+Math.imul(T,pt)|0)+Math.imul(P,ft)|0,h=h+Math.imul(P,pt)|0,n=n+Math.imul(S,gt)|0,o=(o=o+Math.imul(S,vt)|0)+Math.imul(j,gt)|0,h=h+Math.imul(j,vt)|0,n=n+Math.imul(E,bt)|0,o=(o=o+Math.imul(E,wt)|0)+Math.imul(O,bt)|0,h=h+Math.imul(O,wt)|0;var Rt=(l+(n=n+Math.imul(_,_t)|0)|0)+((8191&(o=(o=o+Math.imul(_,xt)|0)+Math.imul(x,_t)|0))<<13)|0;l=((h=h+Math.imul(x,xt)|0)+(o>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,nt),o=(o=Math.imul(z,it))+Math.imul(W,nt)|0,h=Math.imul(W,it),n=n+Math.imul(H,st)|0,o=(o=o+Math.imul(H,at)|0)+Math.imul(U,st)|0,h=h+Math.imul(U,at)|0,n=n+Math.imul(L,ht)|0,o=(o=o+Math.imul(L,ct)|0)+Math.imul(F,ht)|0,h=h+Math.imul(F,ct)|0,n=n+Math.imul(I,ft)|0,o=(o=o+Math.imul(I,pt)|0)+Math.imul(R,ft)|0,h=h+Math.imul(R,pt)|0,n=n+Math.imul(T,gt)|0,o=(o=o+Math.imul(T,vt)|0)+Math.imul(P,gt)|0,h=h+Math.imul(P,vt)|0,n=n+Math.imul(S,bt)|0,o=(o=o+Math.imul(S,wt)|0)+Math.imul(j,bt)|0,h=h+Math.imul(j,wt)|0;var Bt=(l+(n=n+Math.imul(E,_t)|0)|0)+((8191&(o=(o=o+Math.imul(E,xt)|0)+Math.imul(O,_t)|0))<<13)|0;l=((h=h+Math.imul(O,xt)|0)+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,st),o=(o=Math.imul(z,at))+Math.imul(W,st)|0,h=Math.imul(W,at),n=n+Math.imul(H,ht)|0,o=(o=o+Math.imul(H,ct)|0)+Math.imul(U,ht)|0,h=h+Math.imul(U,ct)|0,n=n+Math.imul(L,ft)|0,o=(o=o+Math.imul(L,pt)|0)+Math.imul(F,ft)|0,h=h+Math.imul(F,pt)|0,n=n+Math.imul(I,gt)|0,o=(o=o+Math.imul(I,vt)|0)+Math.imul(R,gt)|0,h=h+Math.imul(R,vt)|0,n=n+Math.imul(T,bt)|0,o=(o=o+Math.imul(T,wt)|0)+Math.imul(P,bt)|0,h=h+Math.imul(P,wt)|0;var Lt=(l+(n=n+Math.imul(S,_t)|0)|0)+((8191&(o=(o=o+Math.imul(S,xt)|0)+Math.imul(j,_t)|0))<<13)|0;l=((h=h+Math.imul(j,xt)|0)+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,ht),o=(o=Math.imul(z,ct))+Math.imul(W,ht)|0,h=Math.imul(W,ct),n=n+Math.imul(H,ft)|0,o=(o=o+Math.imul(H,pt)|0)+Math.imul(U,ft)|0,h=h+Math.imul(U,pt)|0,n=n+Math.imul(L,gt)|0,o=(o=o+Math.imul(L,vt)|0)+Math.imul(F,gt)|0,h=h+Math.imul(F,vt)|0,n=n+Math.imul(I,bt)|0,o=(o=o+Math.imul(I,wt)|0)+Math.imul(R,bt)|0,h=h+Math.imul(R,wt)|0;var qt=(l+(n=n+Math.imul(T,_t)|0)|0)+((8191&(o=(o=o+Math.imul(T,xt)|0)+Math.imul(P,_t)|0))<<13)|0;l=((h=h+Math.imul(P,xt)|0)+(o>>>13)|0)+(qt>>>26)|0,qt&=67108863,n=Math.imul(z,ft),o=(o=Math.imul(z,pt))+Math.imul(W,ft)|0,h=Math.imul(W,pt),n=n+Math.imul(H,gt)|0,o=(o=o+Math.imul(H,vt)|0)+Math.imul(U,gt)|0,h=h+Math.imul(U,vt)|0,n=n+Math.imul(L,bt)|0,o=(o=o+Math.imul(L,wt)|0)+Math.imul(F,bt)|0,h=h+Math.imul(F,wt)|0;var Ft=(l+(n=n+Math.imul(I,_t)|0)|0)+((8191&(o=(o=o+Math.imul(I,xt)|0)+Math.imul(R,_t)|0))<<13)|0;l=((h=h+Math.imul(R,xt)|0)+(o>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,n=Math.imul(z,gt),o=(o=Math.imul(z,vt))+Math.imul(W,gt)|0,h=Math.imul(W,vt),n=n+Math.imul(H,bt)|0,o=(o=o+Math.imul(H,wt)|0)+Math.imul(U,bt)|0,h=h+Math.imul(U,wt)|0;var Dt=(l+(n=n+Math.imul(L,_t)|0)|0)+((8191&(o=(o=o+Math.imul(L,xt)|0)+Math.imul(F,_t)|0))<<13)|0;l=((h=h+Math.imul(F,xt)|0)+(o>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,n=Math.imul(z,bt),o=(o=Math.imul(z,wt))+Math.imul(W,bt)|0,h=Math.imul(W,wt);var Ht=(l+(n=n+Math.imul(H,_t)|0)|0)+((8191&(o=(o=o+Math.imul(H,xt)|0)+Math.imul(U,_t)|0))<<13)|0;l=((h=h+Math.imul(U,xt)|0)+(o>>>13)|0)+(Ht>>>26)|0,Ht&=67108863;var Ut=(l+(n=Math.imul(z,_t))|0)+((8191&(o=(o=Math.imul(z,xt))+Math.imul(W,_t)|0))<<13)|0;return l=((h=Math.imul(W,xt))+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,c[0]=kt,c[1]=Et,c[2]=Ot,c[3]=At,c[4]=St,c[5]=jt,c[6]=Ct,c[7]=Tt,c[8]=Pt,c[9]=Nt,c[10]=It,c[11]=Rt,c[12]=Bt,c[13]=Lt,c[14]=qt,c[15]=Ft,c[16]=Dt,c[17]=Ht,c[18]=Ut,0!==l&&(c[19]=l,r.length++),r};function M(t,e,r){return(new _).mulp(t,e,r)}function _(t,e){this.x=t,this.y=e}Math.imul||(w=y),h.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?w(this,t,e):n<63?y(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,o=0,h=0;h<r.length-1;h++){var c=o;o=0;for(var l=67108863&n,d=Math.min(h,e.length-1),f=Math.max(0,h-t.length+1);f<=d;f++){var i=h-f,m=(0|t.words[i])*(0|e.words[f]),v=67108863&m;l=67108863&(v=v+l|0),o+=(c=(c=c+(m/67108864|0)|0)+(v>>>26)|0)>>>26,c&=67108863}r.words[h]=l,n=c,c=o}return 0!==n?r.words[h]=n:r.length--,r.strip()}(this,t,e):M(this,t,e),r},_.prototype.makeRBT=function(t){for(var e=new Array(t),r=h.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},_.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},_.prototype.permute=function(t,e,r,n,o,h){for(var i=0;i<h;i++)n[i]=e[t[i]],o[i]=r[t[i]]},_.prototype.transform=function(t,e,r,n,o,h){this.permute(h,t,e,r,n,o);for(var s=1;s<o;s<<=1)for(var c=s<<1,l=Math.cos(2*Math.PI/c),d=Math.sin(2*Math.PI/c),p=0;p<o;p+=c)for(var f=l,m=d,v=0;v<s;v++){var y=r[p+v],w=n[p+v],M=r[p+v+s],_=n[p+v+s],x=f*M-m*_;_=f*_+m*M,M=x,r[p+v]=y+M,n[p+v]=w+_,r[p+v+s]=y-M,n[p+v+s]=w-_,v!==c&&(x=l*f-d*m,m=l*m+d*f,f=x)}},_.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},_.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},_.prototype.convert13b=function(t,e,r,o){for(var h=0,i=0;i<e;i++)h+=0|t[i],r[2*i]=8191&h,h>>>=13,r[2*i+1]=8191&h,h>>>=13;for(i=2*e;i<o;++i)r[i]=0;n(0===h),n(0==(-8192&h))},_.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},_.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),o=this.makeRBT(n),h=this.stub(n),c=new Array(n),l=new Array(n),d=new Array(n),f=new Array(n),m=new Array(n),v=new Array(n),y=r.words;y.length=n,this.convert13b(t.words,t.length,c,n),this.convert13b(e.words,e.length,f,n),this.transform(c,h,l,d,n,o),this.transform(f,h,m,v,n,o);for(var i=0;i<n;i++){var w=l[i]*m[i]-d[i]*v[i];d[i]=l[i]*v[i]+d[i]*m[i],l[i]=w}return this.conjugate(l,d,n),this.transform(l,d,y,h,n,o),this.conjugate(y,h,n),this.normalize13b(y,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},h.prototype.mul=function(t){var e=new h(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},h.prototype.mulf=function(t){var e=new h(null);return e.words=new Array(this.length+t.length),M(this,t,e)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,o=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,o=r%26;e[r]=(t.words[n]&1<<o)>>>o}return e}(t);if(0===e.length)return new h(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var q=r.sqr();i<e.length;i++,q=q.sqr())0!==e[i]&&(r=r.mul(q));return r},h.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var i,e=t%26,s=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var o=0;for(i=0;i<this.length;i++){var h=this.words[i]&r,c=(0|this.words[i])-h<<e;this.words[i]=c|o,o=h>>>26-e}o&&(this.words[i]=o,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this.strip()},h.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,e,r){var o;n("number"==typeof t&&t>=0),o=e?(e-e%26)/26:0;var h=t%26,s=Math.min((t-h)/26,this.length),mask=67108863^67108863>>>h<<h,c=r;if(o-=s,o=Math.max(0,o),c){for(var i=0;i<s;i++)c.words[i]=this.words[i];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var l=0;for(i=this.length-1;i>=0&&(0!==l||i>=o);i--){var d=0|this.words[i];this.words[i]=l<<26-h|d>>>h,l=d&mask}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26,q=1<<e;return!(this.length<=s)&&!!(this.words[s]&q)},h.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==e&&s++,this.length=Math.min(s,this.length),0!==e){var mask=67108863^67108863>>>e<<e;this.words[this.length-1]&=mask}return this.strip()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},h.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(t,e,r){var i,o,h=t.length+r;this._expand(h);var c=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+c;var l=(0|t.words[i])*e;c=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)c=(o=(0|this.words[i+r])+c)>>26,this.words[i+r]=67108863&o;if(0===c)return this.strip();for(n(-1===c),c=0,i=0;i<this.length;i++)c=(o=-(0|this.words[i])+c)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},h.prototype._wordDiv=function(t,e){var r=(this.length,t.length),a=this.clone(),b=t,n=0|b.words[b.length-1];0!==(r=26-this._countBits(n))&&(b=b.ushln(r),a.iushln(r),n=0|b.words[b.length-1]);var q,o=a.length-b.length;if("mod"!==e){(q=new h(null)).length=o+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var c=a.clone()._ishlnsubmul(b,1,o);0===c.negative&&(a=c,q&&(q.words[o]=1));for(var l=o-1;l>=0;l--){var d=67108864*(0|a.words[b.length+l])+(0|a.words[b.length+l-1]);for(d=Math.min(d/n|0,67108863),a._ishlnsubmul(b,d,l);0!==a.negative;)d--,a.negative=0,a._ishlnsubmul(b,1,l),a.isZero()||(a.negative^=1);q&&(q.words[l]=d)}return q&&q.strip(),a.strip(),"div"!==e&&0!==r&&a.iushrn(r),{div:q||null,mod:a}},h.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(c=this.neg().divmod(t,e),"mod"!==e&&(div=c.div.neg()),"div"!==e&&(o=c.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:div,mod:o}):0===this.negative&&0!==t.negative?(c=this.divmod(t.neg(),e),"mod"!==e&&(div=c.div.neg()),{div:div,mod:c.mod}):0!=(this.negative&t.negative)?(c=this.neg().divmod(t.neg(),e),"div"!==e&&(o=c.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:c.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new h(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modn(t.words[0]))}:this._wordDiv(t,e);var div,o,c},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),o=t.andln(1),h=r.cmp(n);return h<0||1===o&&0===h?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},h.prototype.modn=function(t){n(t<=67108863);for(var p=(1<<26)%t,e=0,i=this.length-1;i>=0;i--)e=(p*e+(0|this.words[i]))%t;return e},h.prototype.idivn=function(t){n(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(p){n(0===p.negative),n(!p.isZero());var t=this,e=p.clone();t=0!==t.negative?t.umod(p):t.clone();for(var r=new h(1),o=new h(0),c=new h(0),l=new h(1),g=0;t.isEven()&&e.isEven();)t.iushrn(1),e.iushrn(1),++g;for(var d=e.clone(),f=t.clone();!t.isZero();){for(var i=0,m=1;0==(t.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(t.iushrn(i);i-- >0;)(r.isOdd()||o.isOdd())&&(r.iadd(d),o.isub(f)),r.iushrn(1),o.iushrn(1);for(var v=0,y=1;0==(e.words[0]&y)&&v<26;++v,y<<=1);if(v>0)for(e.iushrn(v);v-- >0;)(c.isOdd()||l.isOdd())&&(c.iadd(d),l.isub(f)),c.iushrn(1),l.iushrn(1);t.cmp(e)>=0?(t.isub(e),r.isub(c),o.isub(l)):(e.isub(t),c.isub(r),l.isub(o))}return{a:c,b:l,gcd:e.iushln(g)}},h.prototype._invmp=function(p){n(0===p.negative),n(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var t,e=new h(1),r=new h(0),o=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,c=1;0==(a.words[0]&c)&&i<26;++i,c<<=1);if(i>0)for(a.iushrn(i);i-- >0;)e.isOdd()&&e.iadd(o),e.iushrn(1);for(var l=0,d=1;0==(b.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(b.iushrn(l);l-- >0;)r.isOdd()&&r.iadd(o),r.iushrn(1);a.cmp(b)>=0?(a.isub(b),e.isub(r)):(b.isub(a),r.isub(e))}return(t=0===a.cmpn(1)?e:r).cmpn(0)<0&&t.iadd(p),t},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var a=this.clone(),b=t.clone();a.negative=0,b.negative=0;for(var e=0;a.isEven()&&b.isEven();e++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(r<0){var n=a;a=b,b=n}else if(0===r||0===b.cmpn(1))break;a.isub(b)}return b.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,s=(t-e)/26,q=1<<e;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var r=q,i=s;0!==r&&i<this.length;i++){var o=0|this.words[i];r=(o+=r)>>>26,o&=67108863,this.words[i]=o}return 0!==r&&(this.words[i]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var o=0|this.words[0];e=o===t?0:o<t?-1:1}return 0!==this.negative?0|-e:e},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|t.words[i];if(a!==b){a<b?e=-1:a>b&&(e=1);break}}return e},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new j(t)},h.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},h.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},h.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var x={k256:null,p224:null,p192:null,p25519:null};function k(t,p){this.name=t,this.p=new h(p,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function O(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function j(t){if("string"==typeof t){var e=h._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function C(t){j.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},k.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},k.prototype.split=function(input,t){input.iushrn(this.n,0,t)},k.prototype.imulK=function(t){return t.imul(this.k)},o(E,k),E.prototype.split=function(input,output){for(var mask=4194303,t=Math.min(input.length,9),i=0;i<t;i++)output.words[i]=input.words[i];if(output.length=t,input.length<=9)return input.words[0]=0,void(input.length=1);var e=input.words[9];for(output.words[output.length++]=e&mask,i=10;i<input.length;i++){var r=0|input.words[i];input.words[i-10]=(r&mask)<<4|e>>>22,e=r}e>>>=22,input.words[i-10]=e,0===e&&input.length>10?input.length-=10:input.length-=9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(O,k),o(A,k),o(S,k),S.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},h._prime=function(t){if(x[t])return x[t];var e;if("k256"===t)e=new E;else if("p224"===t)e=new O;else if("p192"===t)e=new A;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return x[t]=e,e},j.prototype._verify1=function(a){n(0===a.negative,"red works only with positives"),n(a.red,"red works only with red numbers")},j.prototype._verify2=function(a,b){n(0==(a.negative|b.negative),"red works only with positives"),n(a.red&&a.red===b.red,"red works only with red numbers")},j.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},j.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},j.prototype.add=function(a,b){this._verify2(a,b);var t=a.add(b);return t.cmp(this.m)>=0&&t.isub(this.m),t._forceRed(this)},j.prototype.iadd=function(a,b){this._verify2(a,b);var t=a.iadd(b);return t.cmp(this.m)>=0&&t.isub(this.m),t},j.prototype.sub=function(a,b){this._verify2(a,b);var t=a.sub(b);return t.cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},j.prototype.isub=function(a,b){this._verify2(a,b);var t=a.isub(b);return t.cmpn(0)<0&&t.iadd(this.m),t},j.prototype.shl=function(a,t){return this._verify1(a),this.imod(a.ushln(t))},j.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},j.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},j.prototype.isqr=function(a){return this.imul(a,a.clone())},j.prototype.sqr=function(a){return this.mul(a,a)},j.prototype.sqrt=function(a){if(a.isZero())return a.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var e=this.m.add(new h(1)).iushrn(2);return this.pow(a,e)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);n(!q.isZero());var r=new h(1).toRed(this),o=r.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new h(2*l*l).toRed(this);0!==this.pow(l,c).cmp(o);)l.redIAdd(o);for(var d=this.pow(l,q),f=this.pow(a,q.addn(1).iushrn(1)),m=this.pow(a,q),v=s;0!==m.cmp(r);){for(var y=m,i=0;0!==y.cmp(r);i++)y=y.redSqr();n(i<v);var b=this.pow(d,new h(1).iushln(v-i-1));f=f.redMul(b),d=b.redSqr(),m=m.redMul(d),v=i}return f},j.prototype.invm=function(a){var t=a._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},j.prototype.pow=function(a,t){if(t.isZero())return new h(1);if(0===t.cmpn(1))return a.clone();var e=new Array(16);e[0]=new h(1).toRed(this),e[1]=a;for(var i=2;i<e.length;i++)e[i]=this.mul(e[i-1],a);var r=e[0],n=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],d=c-1;d>=0;d--){var f=l>>d&1;r!==e[0]&&(r=this.sqr(r)),0!==f||0!==n?(n<<=1,n|=f,(4===++o||0===i&&0===d)&&(r=this.mul(r,e[n]),o=0,n=0)):o=0}c=26}return r},j.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},j.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},h.mont=function(t){return new C(t)},o(C,j),C.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},C.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},C.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),r=u;return u.cmp(this.m)>=0?r=u.isub(this.m):u.cmpn(0)<0&&(r=u.iadd(this.m)),r._forceRed(this)},C.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new h(0)._forceRed(this);var t=a.mul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),r=u;return u.cmp(this.m)>=0?r=u.isub(this.m):u.cmpn(0)<0&&(r=u.iadd(this.m)),r._forceRed(this)},C.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(123)(t))},748:function(t,e,r){!function(t){var e,r,n,o=String.fromCharCode;function h(t){for(var e,r,output=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(r=t.charCodeAt(n++)))?output.push(((1023&e)<<10)+(1023&r)+65536):(output.push(e),n--):output.push(e);return output}function c(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function l(t,e){return o(t>>e&63|128)}function d(t){if(0==(4294967168&t))return o(t);var symbol="";return 0==(4294965248&t)?symbol=o(t>>6&31|192):0==(4294901760&t)?(c(t),symbol=o(t>>12&15|224),symbol+=l(t,6)):0==(4292870144&t)&&(symbol=o(t>>18&7|240),symbol+=l(t,12),symbol+=l(t,6)),symbol+=o(63&t|128)}function f(){if(n>=r)throw Error("Invalid byte index");var t=255&e[n];if(n++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function m(){var t,o;if(n>r)throw Error("Invalid byte index");if(n==r)return!1;if(t=255&e[n],n++,0==(128&t))return t;if(192==(224&t)){if((o=(31&t)<<6|f())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if((o=(15&t)<<12|f()<<6|f())>=2048)return c(o),o;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=(7&t)<<18|f()<<12|f()<<6|f())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}t.version="3.0.0",t.encode=function(t){for(var e=h(t),r=e.length,n=-1,o="";++n<r;)o+=d(e[n]);return o},t.decode=function(t){e=h(t),r=e.length,n=0;for(var c,l=[];!1!==(c=m());)l.push(c);return function(t){for(var e,r=t.length,n=-1,output="";++n<r;)(e=t[n])>65535&&(output+=o((e-=65536)>>>10&1023|55296),e=56320|1023&e),output+=o(e);return output}(l)}}(e)},758:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(759);function o(t){return"string"==typeof t&&(!!/^(0x)?[0-9a-f]{512}$/i.test(t)&&!(!/^(0x)?[0-9a-f]{512}$/.test(t)&&!/^(0x)?[0-9A-F]{512}$/.test(t)))}function h(t,e){"object"==typeof e&&e.constructor===Uint8Array&&(e=n.bytesToHex(e));const r=n.keccak256(e).replace("0x","");for(let i=0;i<12;i+=4){const e=(parseInt(r.substr(i,2),16)<<8)+parseInt(r.substr(i+2,2),16)&2047,n=1<<e%4;if((c(t.charCodeAt(t.length-1-Math.floor(e/4)))&n)!==n)return!1}return!0}function c(t){if(t>=48&&t<=57)return t-48;if(t>=65&&t<=70)return t-55;if(t>=97&&t<=102)return t-87;throw new Error("invalid bloom")}function l(t){return"string"==typeof t&&(!!/^(0x)?[0-9a-f]{64}$/i.test(t)&&!(!/^(0x)?[0-9a-f]{64}$/.test(t)&&!/^(0x)?[0-9A-F]{64}$/.test(t)))}function d(address){return"string"==typeof address&&(!!address.match(/^(0x)?[0-9a-fA-F]{40}$/)||!!address.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/))}e.isBloom=o,e.isInBloom=h,e.isUserEthereumAddressInBloom=function(t,e){if(!o(t))throw new Error("Invalid bloom given");if(!d(e))throw new Error(`Invalid ethereum address given: "${e}"`);return h(t,n.padLeft(e,64))},e.isContractAddressInBloom=function(t,e){if(!o(t))throw new Error("Invalid bloom given");if(!d(e))throw new Error(`Invalid contract address given: "${e}"`);return h(t,e)},e.isTopicInBloom=function(t,e){if(!o(t))throw new Error("Invalid bloom given");if(!l(e))throw new Error("Invalid topic");return h(t,e)},e.isTopic=l,e.isAddress=d},759:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(245);function o(t){if(null==t)throw new Error("cannot convert null value to array");if("string"==typeof t){const e=t.match(/^(0x)?[0-9a-fA-F]*$/);if(!e)throw new Error("invalid hexidecimal string");if("0x"!==e[1])throw new Error("hex string must have 0x prefix");(t=t.substring(2)).length%2&&(t="0"+t);const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substr(i,2),16));return h(new Uint8Array(r))}if(function(t){if(!t||parseInt(String(t.length))!=t.length||"string"==typeof t)return!1;for(let i=0;i<t.length;i++){const e=t[i];if(e<0||e>=256||parseInt(String(e))!=e)return!1}return!0}(t))return h(new Uint8Array(t));throw new Error("invalid arrayify value")}function h(t){return void 0!==t.slice||(t.slice=()=>{const e=Array.prototype.slice.call(arguments);return h(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}e.keccak256=function(data){return"0x"+n.keccak_256(o(data))},e.padLeft=(t,e)=>{const r=/^0x/i.test(t)||"number"==typeof t,n=e-(t=t.toString().replace(/^0x/i,"")).length+1>=0?e-t.length+1:0;return(r?"0x":"")+new Array(n).join("0")+t},e.bytesToHex=function(t){const e=[];for(let i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return`0x${e.join("").replace(/^0+/,"")}`},e.toByteArray=o},760:function(t,e,r){var n=r(6),o=r(693),h=function(t){var e=typeof t;if("string"===e)return o.isHexStrict(t)?new n(t.replace(/0x/i,""),16):new n(t,10);if("number"===e)return new n(t);if(o.isBigNumber(t))return new n(t.toString(10));if(o.isBN(t))return t;throw new Error(t+" is not a number")},c=function(t,e,r){var c,l,d;if("bytes"===(t=(d=t).startsWith("int[")?"int256"+d.slice(3):"int"===d?"int256":d.startsWith("uint[")?"uint256"+d.slice(4):"uint"===d?"uint256":d.startsWith("fixed[")?"fixed128x128"+d.slice(5):"fixed"===d?"fixed128x128":d.startsWith("ufixed[")?"ufixed128x128"+d.slice(6):"ufixed"===d?"ufixed128x128":d)){if(e.replace(/^0x/i,"").length%2!=0)throw new Error("Invalid bytes characters "+e.length);return e}if("string"===t)return o.utf8ToHex(e);if("bool"===t)return e?"01":"00";if(t.startsWith("address")){if(c=r?64:40,!o.isAddress(e))throw new Error(e+" is not a valid address, or the checksum is invalid.");return o.leftPad(e.toLowerCase(),c)}if(c=function(t){var e=/^\D+(\d+).*$/.exec(t);return e?parseInt(e[1],10):null}(t),t.startsWith("bytes")){if(!c)throw new Error("bytes[] not yet supported in solidity");if(r&&(c=32),c<1||c>32||c<e.replace(/^0x/i,"").length/2)throw new Error("Invalid bytes"+c+" for "+e);return o.rightPad(e,2*c)}if(t.startsWith("uint")){if(c%8||c<8||c>256)throw new Error("Invalid uint"+c+" size");if((l=h(e)).bitLength()>c)throw new Error("Supplied uint exceeds width: "+c+" vs "+l.bitLength());if(l.lt(new n(0)))throw new Error("Supplied uint "+l.toString()+" is negative");return c?o.leftPad(l.toString("hex"),c/8*2):l}if(t.startsWith("int")){if(c%8||c<8||c>256)throw new Error("Invalid int"+c+" size");if((l=h(e)).bitLength()>c)throw new Error("Supplied int exceeds width: "+c+" vs "+l.bitLength());return l.lt(new n(0))?l.toTwos(c).toString("hex"):c?o.leftPad(l.toString("hex"),c/8*2):l}throw new Error("Unsupported or invalid type: "+t)},l=function(t){if(Array.isArray(t))throw new Error("Autodetection of array types is not supported.");var e,r,h="";if(t&&"object"==typeof t&&(t.hasOwnProperty("v")||t.hasOwnProperty("t")||t.hasOwnProperty("value")||t.hasOwnProperty("type"))?(e=t.hasOwnProperty("t")?t.t:t.type,h=t.hasOwnProperty("v")?t.v:t.value):(e=o.toHex(t,!0),h=o.toHex(t),e.startsWith("int")||e.startsWith("uint")||(e="bytes")),!e.startsWith("int")&&!e.startsWith("uint")||"string"!=typeof h||/^(-)?0x/i.test(h)||(h=new n(h)),Array.isArray(h)){if(r=function(t){var e=/^\D+\d*\[(\d+)\]$/.exec(t);return e?parseInt(e[1],10):null}(e),r&&h.length!==r)throw new Error(e+" is not matching the given array "+JSON.stringify(h));r=h.length}return Array.isArray(h)?h.map((function(t){return c(e,t,r).toString("hex").replace("0x","")})).join(""):c(e,h,r).toString("hex").replace("0x","")};t.exports={soliditySha3:function(){var t=Array.prototype.slice.call(arguments),e=t.map(l);return o.sha3("0x"+e.join(""))},soliditySha3Raw:function(){return o.sha3Raw("0x"+Array.prototype.slice.call(arguments).map(l).join(""))},encodePacked:function(){var t=Array.prototype.slice.call(arguments),e=t.map(l);return"0x"+e.join("").toLowerCase()}}},761:function(t,e,r){"use strict";const n=r(617),o=r(6),h=function(t){const e="A".charCodeAt(0),r="Z".charCodeAt(0);return(t=(t=t.toUpperCase()).substr(4)+t.substr(0,4)).split("").map((function(t){const code=t.charCodeAt(0);return code>=e&&code<=r?code-e+10:t})).join("")},c=function(t){let e,r=t;for(;r.length>2;)e=r.slice(0,9),r=parseInt(e,10)%97+r.slice(e.length);return parseInt(r,10)%97};class l{constructor(t){this._iban=t}static toAddress(t){if(!(t=new l(t)).isDirect())throw new Error("IBAN is indirect and can't be converted");return t.toAddress()}static toIban(address){return l.fromAddress(address).toString()}static fromAddress(address){if(!n.isAddress(address))throw new Error("Provided address is not a valid address: "+address);address=address.replace("0x","").replace("0X","");const t=function(t,e){let r=t;for(;r.length<2*e;)r="0"+r;return r}(new o(address,16).toString(36),15);return l.fromBban(t.toUpperCase())}static fromBban(t){const e=("0"+(98-c(h("XE00"+t)))).slice(-2);return new l("XE"+e+t)}static createIndirect(t){return l.fromBban("ETH"+t.institution+t.identifier)}static isValid(t){return new l(t).isValid()}isValid(){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(this._iban)&&1===c(h(this._iban))}isDirect(){return 34===this._iban.length||35===this._iban.length}isIndirect(){return 20===this._iban.length}checksum(){return this._iban.substr(2,2)}institution(){return this.isIndirect()?this._iban.substr(7,4):""}client(){return this.isIndirect()?this._iban.substr(11):""}toAddress(){if(this.isDirect()){const t=this._iban.substr(4),e=new o(t,36);return n.toChecksumAddress(e.toString(16,20))}return""}toString(){return this._iban}}t.exports=l},762:function(t,e,r){"use strict";var n=r(696),o=r(608).errors,h=function(t){this.requestManager=t,this.requests=[]};h.prototype.add=function(t){this.requests.push(t)},h.prototype.execute=function(){var t=this.requests,e=this._sortResponses.bind(this);this.requestManager.sendBatch(t,(function(r,h){h=e(h),t.map((function(t,e){return h[e]||{}})).forEach((function(e,r){if(t[r].callback){if(e&&e.error)return t[r].callback(o.ErrorResponse(e));if(!n.isValidResponse(e))return t[r].callback(o.InvalidResponse(e));try{t[r].callback(null,t[r].format?t[r].format(e.result):e.result)}catch(e){t[r].callback(e)}}}))}))},h.prototype._sortResponses=function(t){return(t||[]).sort(((a,b)=>a.id-b.id))},t.exports=h},763:function(t,e,r){"use strict";var n=null,o="object"==typeof globalThis?globalThis:void 0;if(!o)try{o=Function("return this")()}catch(t){o=self}void 0!==o.ethereum?n=o.ethereum:void 0!==o.web3&&o.web3.currentProvider&&(o.web3.currentProvider.sendAsync&&(o.web3.currentProvider.send=o.web3.currentProvider.sendAsync,delete o.web3.currentProvider.sendAsync),!o.web3.currentProvider.on&&o.web3.currentProvider.connection&&"ipcProviderWrapper"===o.web3.currentProvider.connection.constructor.name&&(o.web3.currentProvider.on=function(t,e){if("function"!=typeof e)throw new Error("The second parameter callback must be a function.");if("data"===t)this.connection.on("data",(function(data){var t="";data=data.toString();try{t=JSON.parse(data)}catch(t){return e(new Error("Couldn't parse response data"+data))}t.id||-1===t.method.indexOf("_subscription")||e(null,t)}));else this.connection.on(t,e)}),n=o.web3.currentProvider),t.exports=n},764:function(t,e,r){"use strict";var n=r(672),o=r(765),h=r(608).errors,c=r(771).w3cwebsocket,l=function(t,e){n.call(this),e=e||{},this.url=t,this._customTimeout=e.timeout||15e3,this.headers=e.headers||{},this.protocol=e.protocol||void 0,this.reconnectOptions=Object.assign({auto:!1,delay:5e3,maxAttempts:!1,onTimeout:!1},e.reconnect),this.clientConfig=e.clientConfig||void 0,this.requestOptions=e.requestOptions||void 0,this.DATA="data",this.CLOSE="close",this.ERROR="error",this.CONNECT="connect",this.RECONNECT="reconnect",this.connection=null,this.requestQueue=new Map,this.responseQueue=new Map,this.reconnectAttempts=0,this.reconnecting=!1;var r=o.parseURL(t);r.username&&r.password&&(this.headers.authorization="Basic "+o.btoa(r.username+":"+r.password)),r.auth&&(this.headers.authorization="Basic "+o.btoa(r.auth)),Object.defineProperty(this,"connected",{get:function(){return this.connection&&this.connection.readyState===this.connection.OPEN},enumerable:!0}),this.connect()};(l.prototype=Object.create(n.prototype)).constructor=l,l.prototype.connect=function(){this.connection=new c(this.url,this.protocol,void 0,this.headers,this.requestOptions,this.clientConfig),this._addSocketListeners()},l.prototype._onMessage=function(t){var e=this;this._parseResponse("string"==typeof t.data?t.data:"").forEach((function(t){if(t.method&&-1!==t.method.indexOf("_subscription"))e.emit(e.DATA,t);else{var r=t.id;Array.isArray(t)&&(r=t[0].id),e.responseQueue.has(r)&&(void 0!==e.responseQueue.get(r).callback&&e.responseQueue.get(r).callback(!1,t),e.responseQueue.delete(r))}}))},l.prototype._onConnect=function(){if(this.emit(this.CONNECT),this.reconnectAttempts=0,this.reconnecting=!1,this.requestQueue.size>0){var t=this;this.requestQueue.forEach((function(e,r){t.send(e.payload,e.callback),t.requestQueue.delete(r)}))}},l.prototype._onClose=function(t){var e=this;!this.reconnectOptions.auto||[1e3,1001].includes(t.code)&&!1!==t.wasClean?(this.emit(this.CLOSE,t),this.requestQueue.size>0&&this.requestQueue.forEach((function(r,n){r.callback(h.ConnectionNotOpenError(t)),e.requestQueue.delete(n)})),this.responseQueue.size>0&&this.responseQueue.forEach((function(r,n){r.callback(h.InvalidConnection("on WS",t)),e.responseQueue.delete(n)})),this._removeSocketListeners(),this.removeAllListeners()):this.reconnect()},l.prototype._addSocketListeners=function(){this.connection.addEventListener("message",this._onMessage.bind(this)),this.connection.addEventListener("open",this._onConnect.bind(this)),this.connection.addEventListener("close",this._onClose.bind(this))},l.prototype._removeSocketListeners=function(){this.connection.removeEventListener("message",this._onMessage),this.connection.removeEventListener("open",this._onConnect),this.connection.removeEventListener("close",this._onClose)},l.prototype._parseResponse=function(data){var t=this,e=[];return data.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(data){t.lastChunk&&(data=t.lastChunk+data);var r=null;try{r=JSON.parse(data)}catch(e){return t.lastChunk=data,clearTimeout(t.lastChunkTimeout),void(t.lastChunkTimeout=setTimeout((function(){t.reconnectOptions.auto&&t.reconnectOptions.onTimeout?t.reconnect():(t.emit(t.ERROR,h.ConnectionTimeout(t._customTimeout)),t.requestQueue.size>0&&t.requestQueue.forEach((function(e,r){e.callback(h.ConnectionTimeout(t._customTimeout)),t.requestQueue.delete(r)})))}),t._customTimeout))}clearTimeout(t.lastChunkTimeout),t.lastChunk=null,r&&e.push(r)})),e},l.prototype.send=function(t,e){var r=t.id,n={payload:t,callback:e};if(Array.isArray(t)&&(r=t[0].id),this.connection.readyState===this.connection.CONNECTING||this.reconnecting)this.requestQueue.set(r,n);else{if(this.connection.readyState!==this.connection.OPEN)return this.requestQueue.delete(r),this.emit(this.ERROR,h.ConnectionNotOpenError()),void n.callback(h.ConnectionNotOpenError());this.responseQueue.set(r,n),this.requestQueue.delete(r);try{this.connection.send(JSON.stringify(n.payload))}catch(t){n.callback(t),this.responseQueue.delete(r)}}},l.prototype.reset=function(){this.responseQueue.clear(),this.requestQueue.clear(),this.removeAllListeners(),this._removeSocketListeners(),this._addSocketListeners()},l.prototype.disconnect=function(code,t){this._removeSocketListeners(),this.connection.close(code||1e3,t)},l.prototype.supportsSubscriptions=function(){return!0},l.prototype.reconnect=function(){var t=this;this.reconnecting=!0,this.responseQueue.size>0&&this.responseQueue.forEach((function(e,r){e.callback(h.PendingRequestsOnReconnectingError()),t.responseQueue.delete(r)})),!this.reconnectOptions.maxAttempts||this.reconnectAttempts<this.reconnectOptions.maxAttempts?setTimeout((function(){t.reconnectAttempts++,t._removeSocketListeners(),t.emit(t.RECONNECT,t.reconnectAttempts),t.connect()}),this.reconnectOptions.delay):(this.emit(this.ERROR,h.MaxAttemptsReachedOnReconnectingError()),this.reconnecting=!1,this.requestQueue.size>0&&this.requestQueue.forEach((function(e,r){e.callback(h.MaxAttemptsReachedOnReconnectingError()),t.requestQueue.delete(r)})))},t.exports=l},765:function(t,e,r){(function(e,n){var o="[object process]"===Object.prototype.toString.call(void 0!==e?e:0),h="undefined"!=typeof navigator&&"ReactNative"===navigator.product,c=null,l=null;if(o||h){c=function(t){return n.from(t).toString("base64")};var d=r(635);if(d.URL){var f=d.URL;l=function(t){return new f(t)}}else l=r(635).parse}else c=btoa.bind("object"==typeof globalThis?globalThis:self),l=function(t){return new URL(t)};t.exports={parseURL:l,btoa:c}}).call(this,r(17),r(16).Buffer)},766:function(t,e,r){(function(t,n){var o;!function(h){e&&e.nodeType,t&&t.nodeType;var c="object"==typeof n&&n;c.global!==c&&c.window!==c&&c.self;var l,d=2147483647,base=36,f=/^xn--/,m=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=Math.floor,M=String.fromCharCode;function _(t){throw new RangeError(y[t])}function map(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function x(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+map((t=t.replace(v,".")).split("."),e).join(".")}function k(t){for(var e,r,output=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(r=t.charCodeAt(n++)))?output.push(((1023&e)<<10)+(1023&r)+65536):(output.push(e),n--):output.push(e);return output}function E(t){return map(t,(function(t){var output="";return t>65535&&(output+=M((t-=65536)>>>10&1023|55296),t=56320|1023&t),output+=M(t)})).join("")}function O(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,r){var n=0;for(t=r?w(t/700):t>>1,t+=w(t/e);t>455;n+=base)t=w(t/35);return w(n+36*t/(t+38))}function S(input){var t,e,r,n,o,h,c,l,f,m,v,output=[],y=input.length,i=0,M=128,x=72;for((e=input.lastIndexOf("-"))<0&&(e=0),r=0;r<e;++r)input.charCodeAt(r)>=128&&_("not-basic"),output.push(input.charCodeAt(r));for(n=e>0?e+1:0;n<y;){for(o=i,h=1,c=base;n>=y&&_("invalid-input"),((l=(v=input.charCodeAt(n++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:base)>=base||l>w((d-i)/h))&&_("overflow"),i+=l*h,!(l<(f=c<=x?1:c>=x+26?26:c-x));c+=base)h>w(d/(m=base-f))&&_("overflow"),h*=m;x=A(i-o,t=output.length+1,0==o),w(i/t)>d-M&&_("overflow"),M+=w(i/t),i%=t,output.splice(i++,0,M)}return E(output)}function j(input){var t,e,r,n,o,h,c,q,l,f,m,v,y,x,E,output=[];for(v=(input=k(input)).length,t=128,e=0,o=72,h=0;h<v;++h)(m=input[h])<128&&output.push(M(m));for(r=n=output.length,n&&output.push("-");r<v;){for(c=d,h=0;h<v;++h)(m=input[h])>=t&&m<c&&(c=m);for(c-t>w((d-e)/(y=r+1))&&_("overflow"),e+=(c-t)*y,t=c,h=0;h<v;++h)if((m=input[h])<t&&++e>d&&_("overflow"),m==t){for(q=e,l=base;!(q<(f=l<=o?1:l>=o+26?26:l-o));l+=base)E=q-f,x=base-f,output.push(M(O(f+E%x,0))),q=w(E/x);output.push(M(O(q,0))),o=A(e,y,r==n),e=0,++r}++e,++t}return output.join("")}l={version:"1.4.1",ucs2:{decode:k,encode:E},decode:S,encode:j,toASCII:function(input){return x(input,(function(t){return m.test(t)?"xn--"+j(t):t}))},toUnicode:function(input){return x(input,(function(t){return f.test(t)?S(t.slice(4).toLowerCase()):t}))}},void 0===(o=function(){return l}.call(e,r,e,t))||(t.exports=o)}()}).call(this,r(123)(t),r(18))},767:function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},768:function(t,e,r){"use strict";e.decode=e.parse=r(769),e.encode=e.stringify=r(770)},769:function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,h){e=e||"&",r=r||"=";var c={};if("string"!=typeof t||0===t.length)return c;var l=/\+/g;t=t.split(e);var d=1e3;h&&"number"==typeof h.maxKeys&&(d=h.maxKeys);var f=t.length;d>0&&f>d&&(f=d);for(var i=0;i<f;++i){var m,v,y,w,M=t[i].replace(l,"%20"),_=M.indexOf(r);_>=0?(m=M.substr(0,_),v=M.substr(_+1)):(m=M,v=""),y=decodeURIComponent(m),w=decodeURIComponent(v),n(c,y)?o(c[y])?c[y].push(w):c[y]=[c[y],w]:c[y]=w}return c};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},770:function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,c){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?map(h(t),(function(h){var c=encodeURIComponent(n(h))+r;return o(t[h])?map(t[h],(function(t){return c+encodeURIComponent(n(t))})).join(e):c+encodeURIComponent(n(t[h]))})).join(e):c?encodeURIComponent(n(c))+r+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function map(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var h=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},771:function(t,e,r){var n;if("object"==typeof globalThis)n=globalThis;else try{n=r(772)}catch(t){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var o=n.WebSocket||n.MozWebSocket,h=r(773);function c(t,e){return e?new o(t,e):new o(t)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(t){Object.defineProperty(c,t,{get:function(){return o[t]}})})),t.exports={w3cwebsocket:o?c:null,version:h}},772:function(t,e){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},773:function(t,e,r){t.exports=r(774).version},774:function(t){t.exports=JSON.parse('{"name":"websocket","description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"author":"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)","contributors":["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],"version":"1.0.34","repository":{"type":"git","url":"https://github.com/theturtle32/WebSocket-Node.git"},"homepage":"https://github.com/theturtle32/WebSocket-Node","engines":{"node":">=4.0.0"},"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1","jshint":"^2.0.0","tape":"^4.9.1"},"config":{"verbose":false},"scripts":{"test":"tape test/unit/*.js","gulp":"gulp"},"main":"index","directories":{"lib":"./lib"},"browser":"lib/browser.js","license":"Apache-2.0"}')},775:function(t,e,r){var n=r(608).errors,o=r(776).XMLHttpRequest,h=r(673),c=r(700),l=function(t,e){e=e||{},this.withCredentials=e.withCredentials||!1,this.timeout=e.timeout||0,this.headers=e.headers,this.agent=e.agent,this.connected=!1;const r=!1!==e.keepAlive;this.host=t||"http://localhost:8545",this.agent||("https"===this.host.substring(0,5)?this.httpsAgent=new c.Agent({keepAlive:r}):this.httpAgent=new h.Agent({keepAlive:r}))};l.prototype._prepareRequest=function(){var t;if("undefined"!=typeof XMLHttpRequest)t=new XMLHttpRequest;else{t=new o;var e={httpsAgent:this.httpsAgent,httpAgent:this.httpAgent,baseUrl:this.baseUrl};this.agent&&(e.httpsAgent=this.agent.https,e.httpAgent=this.agent.http,e.baseUrl=this.agent.baseUrl),t.nodejsSet(e)}return t.open("POST",this.host,!0),t.setRequestHeader("Content-Type","application/json"),t.timeout=this.timeout,t.withCredentials=this.withCredentials,this.headers&&this.headers.forEach((function(header){t.setRequestHeader(header.name,header.value)})),t},l.prototype.send=function(t,e){var r=this,o=this._prepareRequest();o.onreadystatechange=function(){if(4===o.readyState&&1!==o.timeout){var t=o.responseText,h=null;try{t=JSON.parse(t)}catch(t){h=n.InvalidResponse(o.responseText)}r.connected=!0,e(h,t)}},o.ontimeout=function(){r.connected=!1,e(n.ConnectionTimeout(this.timeout))};try{o.send(JSON.stringify(t))}catch(t){this.connected=!1,e(n.InvalidConnection(this.host))}},l.prototype.disconnect=function(){},l.prototype.supportsSubscriptions=function(){return!1},t.exports=l},776:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}(r(777));var n=r(674);e.XMLHttpRequestEventTarget=n.XMLHttpRequestEventTarget},777:function(t,e,r){"use strict";(function(t,n){var o,h=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},function(t,b){function e(){this.constructor=t}o(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__assign||Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t};Object.defineProperty(e,"__esModule",{value:!0});var l=r(673),d=r(700),f=r(781),m=r(635),v=r(782),y=r(783),w=r(674),M=r(784),_=r(785),x=function(e){function r(n){void 0===n&&(n={});var o=e.call(this)||this;return o.UNSENT=r.UNSENT,o.OPENED=r.OPENED,o.HEADERS_RECEIVED=r.HEADERS_RECEIVED,o.LOADING=r.LOADING,o.DONE=r.DONE,o.onreadystatechange=null,o.readyState=r.UNSENT,o.response=null,o.responseText="",o.responseType="",o.status=0,o.statusText="",o.timeout=0,o.upload=new M.XMLHttpRequestUpload,o.responseUrl="",o.withCredentials=!1,o._method=null,o._url=null,o._sync=!1,o._headers={},o._loweredHeaders={},o._mimeOverride=null,o._request=null,o._response=null,o._responseParts=null,o._responseHeaders=null,o._aborting=null,o._error=null,o._loadedBytes=0,o._totalBytes=0,o._lengthComputable=!1,o._restrictedMethods={CONNECT:!0,TRACE:!0,TRACK:!0},o._restrictedHeaders={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0},o._privateHeaders={"set-cookie":!0,"set-cookie2":!0},o._userAgent="Mozilla/5.0 ("+f.type()+" "+f.arch()+") node.js/"+t.versions.node+" v8/"+t.versions.v8,o._anonymous=n.anon||!1,o}return h(r,e),r.prototype.open=function(t,e,n,o,h){if(void 0===n&&(n=!0),t=t.toUpperCase(),this._restrictedMethods[t])throw new r.SecurityError("HTTP method "+t+" is not allowed in XHR");var c=this._parseUrl(e,o,h);this.readyState===r.HEADERS_RECEIVED||(this.readyState,r.LOADING),this._method=t,this._url=c,this._sync=!n,this._headers={},this._loweredHeaders={},this._mimeOverride=null,this._setReadyState(r.OPENED),this._request=null,this._response=null,this.status=0,this.statusText="",this._responseParts=[],this._responseHeaders=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1},r.prototype.setRequestHeader=function(t,e){if(this.readyState!==r.OPENED)throw new r.InvalidStateError("XHR readyState must be OPENED");var n=t.toLowerCase();this._restrictedHeaders[n]||/^sec-/.test(n)||/^proxy-/.test(n)?console.warn('Refused to set unsafe header "'+t+'"'):(e=e.toString(),null!=this._loweredHeaders[n]?(t=this._loweredHeaders[n],this._headers[t]=this._headers[t]+", "+e):(this._loweredHeaders[n]=t,this._headers[t]=e))},r.prototype.send=function(data){if(this.readyState!==r.OPENED)throw new r.InvalidStateError("XHR readyState must be OPENED");if(this._request)throw new r.InvalidStateError("send() already called");switch(this._url.protocol){case"file:":return this._sendFile(data);case"http:":case"https:":return this._sendHttp(data);default:throw new r.NetworkError("Unsupported protocol "+this._url.protocol)}},r.prototype.abort=function(){null!=this._request&&(this._request.abort(),this._setError(),this._dispatchProgress("abort"),this._dispatchProgress("loadend"))},r.prototype.getResponseHeader=function(t){if(null==this._responseHeaders||null==t)return null;var e=t.toLowerCase();return this._responseHeaders.hasOwnProperty(e)?this._responseHeaders[t.toLowerCase()]:null},r.prototype.getAllResponseHeaders=function(){var t=this;return null==this._responseHeaders?"":Object.keys(this._responseHeaders).map((function(e){return e+": "+t._responseHeaders[e]})).join("\r\n")},r.prototype.overrideMimeType=function(t){if(this.readyState===r.LOADING||this.readyState===r.DONE)throw new r.InvalidStateError("overrideMimeType() not allowed in LOADING or DONE");this._mimeOverride=t.toLowerCase()},r.prototype.nodejsSet=function(t){if(this.nodejsHttpAgent=t.httpAgent||this.nodejsHttpAgent,this.nodejsHttpsAgent=t.httpsAgent||this.nodejsHttpsAgent,t.hasOwnProperty("baseUrl")){if(null!=t.baseUrl)if(!m.parse(t.baseUrl,!1,!0).protocol)throw new r.SyntaxError("baseUrl must be an absolute URL");this.nodejsBaseUrl=t.baseUrl}},r.nodejsSet=function(t){r.prototype.nodejsSet(t)},r.prototype._setReadyState=function(t){this.readyState=t,this.dispatchEvent(new v.ProgressEvent("readystatechange"))},r.prototype._sendFile=function(data){throw new Error("Protocol file: not implemented")},r.prototype._sendHttp=function(data){if(this._sync)throw new Error("Synchronous XHR processing not implemented");!data||"GET"!==this._method&&"HEAD"!==this._method?data=data||"":(console.warn("Discarding entity body for "+this._method+" requests"),data=null),this.upload._setData(data),this._finalizeHeaders(),this._sendHxxpRequest()},r.prototype._sendHxxpRequest=function(){var t=this;if(this.withCredentials){var e=r.cookieJar.getCookies(_.CookieAccessInfo(this._url.hostname,this._url.pathname,"https:"===this._url.protocol)).toValueString();this._headers.cookie=this._headers.cookie2=e}var n="http:"===this._url.protocol?[l,this.nodejsHttpAgent]:[d,this.nodejsHttpsAgent],o=n[0],h=n[1],c=o.request.bind(o)({hostname:this._url.hostname,port:+this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:h});this._request=c,this.timeout&&c.setTimeout(this.timeout,(function(){return t._onHttpTimeout(c)})),c.on("response",(function(e){return t._onHttpResponse(c,e)})),c.on("error",(function(e){return t._onHttpRequestError(c,e)})),this.upload._startUpload(c),this._request===c&&this._dispatchProgress("loadstart")},r.prototype._finalizeHeaders=function(){this._headers=c({},this._headers,{Connection:"keep-alive",Host:this._url.host,"User-Agent":this._userAgent},this._anonymous?{Referer:"about:blank"}:{}),this.upload._finalizeHeaders(this._headers,this._loweredHeaders)},r.prototype._onHttpResponse=function(t,e){var n=this;if(this._request===t){if(this.withCredentials&&(e.headers["set-cookie"]||e.headers["set-cookie2"])&&r.cookieJar.setCookies(e.headers["set-cookie"]||e.headers["set-cookie2"]),[301,302,303,307,308].indexOf(e.statusCode)>=0)return this._url=this._parseUrl(e.headers.location),this._method="GET",this._loweredHeaders["content-type"]&&(delete this._headers[this._loweredHeaders["content-type"]],delete this._loweredHeaders["content-type"]),null!=this._headers["Content-Type"]&&delete this._headers["Content-Type"],delete this._headers["Content-Length"],this.upload._reset(),this._finalizeHeaders(),void this._sendHxxpRequest();this._response=e,this._response.on("data",(function(data){return n._onHttpResponseData(e,data)})),this._response.on("end",(function(){return n._onHttpResponseEnd(e)})),this._response.on("close",(function(){return n._onHttpResponseClose(e)})),this.responseUrl=this._url.href.split("#")[0],this.status=e.statusCode,this.statusText=l.STATUS_CODES[this.status],this._parseResponseHeaders(e);var o=this._responseHeaders["content-length"]||"";this._totalBytes=+o,this._lengthComputable=!!o,this._setReadyState(r.HEADERS_RECEIVED)}},r.prototype._onHttpResponseData=function(t,data){this._response===t&&(this._responseParts.push(new n(data)),this._loadedBytes+=data.length,this.readyState!==r.LOADING&&this._setReadyState(r.LOADING),this._dispatchProgress("progress"))},r.prototype._onHttpResponseEnd=function(t){this._response===t&&(this._parseResponse(),this._request=null,this._response=null,this._setReadyState(r.DONE),this._dispatchProgress("load"),this._dispatchProgress("loadend"))},r.prototype._onHttpResponseClose=function(t){if(this._response===t){var e=this._request;this._setError(),e.abort(),this._setReadyState(r.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")}},r.prototype._onHttpTimeout=function(t){this._request===t&&(this._setError(),t.abort(),this._setReadyState(r.DONE),this._dispatchProgress("timeout"),this._dispatchProgress("loadend"))},r.prototype._onHttpRequestError=function(t,e){this._request===t&&(this._setError(),t.abort(),this._setReadyState(r.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend"))},r.prototype._dispatchProgress=function(t){var e=new r.ProgressEvent(t);e.lengthComputable=this._lengthComputable,e.loaded=this._loadedBytes,e.total=this._totalBytes,this.dispatchEvent(e)},r.prototype._setError=function(){this._request=null,this._response=null,this._responseHeaders=null,this._responseParts=null},r.prototype._parseUrl=function(t,e,r){var n=null==this.nodejsBaseUrl?t:m.resolve(this.nodejsBaseUrl,t),o=m.parse(n,!1,!0);o.hash=null;var h=(o.auth||"").split(":"),c=h[0],l=h[1];return(c||l||e||r)&&(o.auth=(e||c||"")+":"+(r||l||"")),o},r.prototype._parseResponseHeaders=function(t){for(var e in this._responseHeaders={},t.headers){var r=e.toLowerCase();this._privateHeaders[r]||(this._responseHeaders[r]=t.headers[e])}null!=this._mimeOverride&&(this._responseHeaders["content-type"]=this._mimeOverride)},r.prototype._parseResponse=function(){var t=n.concat(this._responseParts);switch(this._responseParts=null,this.responseType){case"json":this.responseText=null;try{this.response=JSON.parse(t.toString("utf-8"))}catch(t){this.response=null}return;case"buffer":return this.responseText=null,void(this.response=t);case"arraybuffer":this.responseText=null;for(var e=new ArrayBuffer(t.length),view=new Uint8Array(e),i=0;i<t.length;i++)view[i]=t[i];return void(this.response=e);default:try{this.responseText=t.toString(this._parseResponseEncoding())}catch(e){this.responseText=t.toString("binary")}this.response=this.responseText}},r.prototype._parseResponseEncoding=function(){return/;\s*charset=(.*)$/.exec(this._responseHeaders["content-type"]||"")[1]||"utf-8"},r.ProgressEvent=v.ProgressEvent,r.InvalidStateError=y.InvalidStateError,r.NetworkError=y.NetworkError,r.SecurityError=y.SecurityError,r.SyntaxError=y.SyntaxError,r.XMLHttpRequestUpload=M.XMLHttpRequestUpload,r.UNSENT=0,r.OPENED=1,r.HEADERS_RECEIVED=2,r.LOADING=3,r.DONE=4,r.cookieJar=_.CookieJar(),r}(w.XMLHttpRequestEventTarget);e.XMLHttpRequest=x,x.prototype.nodejsHttpAgent=l.globalAgent,x.prototype.nodejsHttpsAgent=d.globalAgent,x.prototype.nodejsBaseUrl=null}).call(this,r(17),r(16).Buffer)},778:function(t,e,r){(function(e,n,o){var h=r(697),c=r(7),l=r(698),d=r(190),f=r(779),m=l.IncomingMessage,v=l.readyStates;var y=t.exports=function(t){var r,n=this;d.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){n.setHeader(e,t.headers[e])}));var o=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!h.abortController)o=!1,r=!0;else if("prefer-streaming"===t.mode)r=!1;else if("allow-wrong-content-type"===t.mode)r=!h.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=function(t,e){return h.fetch&&e?"fetch":h.mozchunkedarraybuffer?"moz-chunked-arraybuffer":h.msstream?"ms-stream":h.arraybuffer&&t?"arraybuffer":h.vbArray&&t?"text:vbarray":"text"}(r,o),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};c(y,d.Writable),y.prototype.setHeader=function(t,e){var r=t.toLowerCase();-1===w.indexOf(r)&&(this._headers[r]={name:t,value:e})},y.prototype.getHeader=function(t){var header=this._headers[t.toLowerCase()];return header?header.value:null},y.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},y.prototype._onFinish=function(){var t=this;if(!t._destroyed){var r=t._opts,c=t._headers,body=null;"GET"!==r.method&&"HEAD"!==r.method&&(body=h.arraybuffer?f(e.concat(t._body)):h.blobConstructor?new n.Blob(t._body.map((function(t){return f(t)})),{type:(c["content-type"]||{}).value||""}):e.concat(t._body).toString());var l=[];if(Object.keys(c).forEach((function(t){var e=c[t].name,r=c[t].value;Array.isArray(r)?r.forEach((function(t){l.push([e,t])})):l.push([e,r])})),"fetch"===t._mode){var d=null;if(h.abortController){var m=new AbortController;d=m.signal,t._fetchAbortController=m,"requestTimeout"in r&&0!==r.requestTimeout&&(t._fetchTimer=n.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),r.requestTimeout))}n.fetch(t._opts.url,{method:t._opts.method,headers:l,body:body||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:d}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){n.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var y=t._xhr=new n.XMLHttpRequest;try{y.open(t._opts.method,t._opts.url,!0)}catch(e){return void o.nextTick((function(){t.emit("error",e)}))}"responseType"in y&&(y.responseType=t._mode.split(":")[0]),"withCredentials"in y&&(y.withCredentials=!!r.withCredentials),"text"===t._mode&&"overrideMimeType"in y&&y.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(y.timeout=r.requestTimeout,y.ontimeout=function(){t.emit("requestTimeout")}),l.forEach((function(header){y.setRequestHeader(header[0],header[1])})),t._response=null,y.onreadystatechange=function(){switch(y.readyState){case v.LOADING:case v.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(y.onprogress=function(){t._onXHRProgress()}),y.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{y.send(body)}catch(e){return void o.nextTick((function(){t.emit("error",e)}))}}}},y.prototype._onXHRProgress=function(){var t=this;(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},y.prototype._connect=function(){var t=this;t._destroyed||(t._response=new m(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},y.prototype._write=function(t,e,r){this._body.push(t),r()},y.prototype.abort=y.prototype.destroy=function(){var t=this;t._destroyed=!0,n.clearTimeout(t._fetchTimer),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort()},y.prototype.end=function(data,t,e){"function"==typeof data&&(e=data,data=void 0),d.Writable.prototype.end.call(this,data,t,e)},y.prototype.flushHeaders=function(){},y.prototype.setTimeout=function(){},y.prototype.setNoDelay=function(){},y.prototype.setSocketKeepAlive=function(){};var w=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(16).Buffer,r(18),r(17))},779:function(t,e,r){var n=r(16).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),r=t.length,i=0;i<r;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},780:function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},781:function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!=typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},782:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){this.type=t,this.bubbles=!1,this.cancelable=!1,this.loaded=0,this.lengthComputable=!1,this.total=0};e.ProgressEvent=n},783:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},function(t,b){function e(){this.constructor=t}n(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Error);e.SecurityError=h;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Error);e.InvalidStateError=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Error);e.NetworkError=l;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Error);e.SyntaxError=d},784:function(t,e,r){"use strict";(function(t){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},function(t,b){function e(){this.constructor=t}n(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0});var h=function(e){function r(){var t=e.call(this)||this;return t._contentType=null,t._body=null,t._reset(),t}return o(r,e),r.prototype._reset=function(){this._contentType=null,this._body=null},r.prototype._setData=function(data){if(null!=data)if("string"==typeof data)0!==data.length&&(this._contentType="text/plain;charset=UTF-8"),this._body=new t(data,"utf-8");else if(t.isBuffer(data))this._body=data;else if(data instanceof ArrayBuffer){for(var body=new t(data.byteLength),view=new Uint8Array(data),i=0;i<data.byteLength;i++)body[i]=view[i];this._body=body}else{if(!(data.buffer&&data.buffer instanceof ArrayBuffer))throw new Error("Unsupported send() data "+data);body=new t(data.byteLength);var e=data.byteOffset;for(view=new Uint8Array(data.buffer),i=0;i<data.byteLength;i++)body[i]=view[i+e];this._body=body}},r.prototype._finalizeHeaders=function(t,e){this._contentType&&!e["content-type"]&&(t["Content-Type"]=this._contentType),this._body&&(t["Content-Length"]=this._body.length.toString())},r.prototype._startUpload=function(t){this._body&&t.write(this._body),t.end()},r}(r(674).XMLHttpRequestEventTarget);e.XMLHttpRequestUpload=h}).call(this,r(16).Buffer)},785:function(t,e){!function(){"use strict";function t(e,path,r,script){return this instanceof t?(this.domain=e||void 0,this.path=path||"/",this.secure=!!r,this.script=!!script,this):new t(e,path,r,script)}function r(t,e,n){return t instanceof r?t:this instanceof r?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(n||"/"),this.explicit_path=!1,this.domain=e||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,t&&this.parse(t,e,n),this):new r(t,e,n)}t.All=Object.freeze(Object.create(null)),e.CookieAccessInfo=t,e.Cookie=r,r.prototype.toString=function(){var t=[this.name+"="+this.value];return this.expiration_date!==1/0&&t.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&t.push("domain="+this.domain),this.path&&t.push("path="+this.path),this.secure&&t.push("secure"),this.noscript&&t.push("httponly"),t.join("; ")},r.prototype.toValueString=function(){return this.name+"="+this.value};var n=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;function o(){var t,e;return this instanceof o?(t=Object.create(null),this.setCookie=function(n,o,h){var c,i;if(c=(n=new r(n,o,h)).expiration_date<=Date.now(),void 0!==t[n.name]){for(e=t[n.name],i=0;i<e.length;i+=1)if(e[i].collidesWith(n))return c?(e.splice(i,1),0===e.length&&delete t[n.name],!1):(e[i]=n,n);return!c&&(e.push(n),n)}return!c&&(t[n.name]=[n],t[n.name])},this.getCookie=function(r,n){var o,i;if(e=t[r])for(i=0;i<e.length;i+=1)if((o=e[i]).expiration_date<=Date.now())0===e.length&&delete t[o.name];else if(o.matches(n))return o},this.getCookies=function(e){var r,n,o=[];for(r in t)(n=this.getCookie(r,e))&&o.push(n);return o.toString=function(){return o.join(":")},o.toValueString=function(){return o.map((function(t){return t.toValueString()})).join("; ")},o},this):new o}r.prototype.parse=function(t,e,n){if(this instanceof r){var i,o=t.split(";").filter((function(t){return!!t})),h=o[0].match(/([^=]+)=([\s\S]*)/);if(!h)return void console.warn("Invalid cookie header encountered. Header: '"+t+"'");var c=h[1],l=h[2];if("string"!=typeof c||0===c.length||"string"!=typeof l)return void console.warn("Unable to extract values from cookie header. Cookie: '"+t+"'");for(this.name=c,this.value=l,i=1;i<o.length;i+=1)switch(c=(h=o[i].match(/([^=]+)(?:=([\s\S]*))?/))[1].trim().toLowerCase(),l=h[2],c){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=l?Number(Date.parse(l)):1/0;break;case"path":this.path=l?l.trim():"",this.explicit_path=!0;break;case"domain":this.domain=l?l.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=n||"/"),this.explicit_domain||(this.domain=e),this}return(new r).parse(t,e,n)},r.prototype.matches=function(e){return e===t.All||!(this.noscript&&e.script||this.secure&&!e.secure||!this.collidesWith(e))},r.prototype.collidesWith=function(t){if(this.path&&!t.path||this.domain&&!t.domain)return!1;if(this.path&&0!==t.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==t.path.indexOf(this.path))return!1;var e=t.domain&&t.domain.replace(/^[\.]/,""),r=this.domain&&this.domain.replace(/^[\.]/,"");if(r===e)return!0;if(r){if(!this.explicit_domain)return!1;var n=e.indexOf(r);return-1!==n&&n===e.length-r.length}return!0},e.CookieJar=o,o.prototype.setCookies=function(t,e,o){var i,h,c=[];for(t=(t=Array.isArray(t)?t:t.split(n)).map((function(t){return new r(t,e,o)})),i=0;i<t.length;i+=1)h=t[i],this.setCookie(h,e,o)&&c.push(h);return c}}()},786:function(t,e,r){"use strict";var n=r(608).errors,o=r(787),h=function(path,t){var e=this;this.responseCallbacks={},this.notificationCallbacks=[],this.path=path,this.connected=!1,this.connection=t.connect({path:this.path}),this.addDefaultEvents();var r=function(t){var r=null;Array.isArray(t)?t.forEach((function(t){e.responseCallbacks[t.id]&&(r=t.id)})):r=t.id,r||-1===t.method.indexOf("_subscription")?e.responseCallbacks[r]&&(e.responseCallbacks[r](null,t),delete e.responseCallbacks[r]):e.notificationCallbacks.forEach((function(e){"function"==typeof e&&e(t)}))};"Socket"===t.constructor.name?o(this.connection).done(r):this.connection.on("data",(function(data){e._parseResponse(data.toString()).forEach(r)}))};h.prototype.addDefaultEvents=function(){var t=this;this.connection.on("connect",(function(){t.connected=!0})),this.connection.on("close",(function(){t.connected=!1})),this.connection.on("error",(function(){t._timeout()})),this.connection.on("end",(function(){t._timeout()})),this.connection.on("timeout",(function(){t._timeout()}))},h.prototype._parseResponse=function(data){var t=this,e=[];return data.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(data){t.lastChunk&&(data=t.lastChunk+data);var r=null;try{r=JSON.parse(data)}catch(e){return t.lastChunk=data,clearTimeout(t.lastChunkTimeout),void(t.lastChunkTimeout=setTimeout((function(){throw t._timeout(),n.InvalidResponse(data)}),15e3))}clearTimeout(t.lastChunkTimeout),t.lastChunk=null,r&&e.push(r)})),e},h.prototype._addResponseCallback=function(t,e){var r=t.id||t[0].id,n=t.method||t[0].method;this.responseCallbacks[r]=e,this.responseCallbacks[r].method=n},h.prototype._timeout=function(){for(var t in this.responseCallbacks)this.responseCallbacks.hasOwnProperty(t)&&(this.responseCallbacks[t](n.InvalidConnection("on IPC")),delete this.responseCallbacks[t])},h.prototype.reconnect=function(){this.connection.connect({path:this.path})},h.prototype.send=function(t,e){this.connection.writable||this.connection.connect({path:this.path}),this.connection.write(JSON.stringify(t)),this._addResponseCallback(t,e)},h.prototype.on=function(t,e){if("function"!=typeof e)throw new Error("The second parameter callback must be a function.");if("data"===t)this.notificationCallbacks.push(e);else this.connection.on(t,e)},h.prototype.once=function(t,e){if("function"!=typeof e)throw new Error("The second parameter callback must be a function.");this.connection.once(t,e)},h.prototype.removeListener=function(t,e){var r=this;if("data"===t)this.notificationCallbacks.forEach((function(t,n){t===e&&r.notificationCallbacks.splice(n,1)}));else this.connection.removeListener(t,e)},h.prototype.removeAllListeners=function(t){if("data"===t)this.notificationCallbacks=[];else this.connection.removeAllListeners(t)},h.prototype.reset=function(){this._timeout(),this.notificationCallbacks=[],this.connection.removeAllListeners("error"),this.connection.removeAllListeners("end"),this.connection.removeAllListeners("timeout"),this.addDefaultEvents()},h.prototype.supportsSubscriptions=function(){return!0},t.exports=h},787:function(t,e,r){var n;"undefined"!=typeof self&&self,n=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},r.p="",r(r.s=7)}([function(t,e,r){"use strict";r.d(e,"j",(function(){return o})),r.d(e,"d",(function(){return h})),r.d(e,"c",(function(){return c})),r.d(e,"h",(function(){return l})),r.d(e,"b",(function(){return d})),r.d(e,"k",(function(){return f})),r.d(e,"e",(function(){return m})),r.d(e,"g",(function(){return v})),r.d(e,"i",(function(){return y})),r.d(e,"a",(function(){return w})),r.d(e,"f",(function(){return M}));var n=r(1),o=f((function(t,e){var r=e.length;return f((function(n){for(var i=0;i<n.length;i++)e[r+i]=n[i];return e.length=r+n.length,t.apply(this,e)}))}));function h(t,e){return function(){return t.call(this,e.apply(this,arguments))}}function c(t){return function(e){return e[t]}}f((function(t){var e=Object(n.c)(t);function r(t,e){return[d(t,e)]}return f((function(t){return Object(n.f)(r,t,e)[0]}))}));var l=f((function(t){return f((function(e){for(var r,i=0;i<c("length")(t);i++)if(r=d(e,t[i]))return r}))}));function d(t,e){return e.apply(void 0,t)}function f(t){var e=t.length-1,r=Array.prototype.slice;if(0===e)return function(){return t.call(this,r.call(arguments))};if(1===e)return function(){return t.call(this,arguments[0],r.call(arguments,1))};var n=Array(t.length);return function(){for(var i=0;i<e;i++)n[i]=arguments[i];return n[e]=r.call(arguments,e),t.apply(this,n)}}function m(t){return function(a,b){return t(b,a)}}function v(t,e){return function(param){return t(param)&&e(param)}}function y(){}function w(){return!0}function M(t){return function(){return t}}},function(t,e,r){"use strict";r.d(e,"d",(function(){return o})),r.d(e,"g",(function(){return head})),r.d(e,"l",(function(){return c})),r.d(e,"c",(function(){return l})),r.d(e,"h",(function(){return d})),r.d(e,"i",(function(){return f})),r.d(e,"j",(function(){return map})),r.d(e,"f",(function(){return m})),r.d(e,"m",(function(){return v})),r.d(e,"a",(function(){return y})),r.d(e,"b",(function(){return w})),r.d(e,"k",(function(){return M})),r.d(e,"e",(function(){return _}));var n=r(0);function o(t,e){return[t,e]}var h=null,head=Object(n.c)(0),c=Object(n.c)(1);function l(t){return M(t.reduce(Object(n.e)(o),h))}var d=Object(n.k)(l);function f(t){return m((function(t,e){return t.unshift(e),t}),[],t)}function map(t,e){return e?o(t(head(e)),map(t,c(e))):h}function m(t,e,r){return r?t(m(t,e,c(r)),head(r)):e}function v(t,e,r){return function t(r,n){return r?e(head(r))?(n(head(r)),c(r)):o(head(r),t(c(r),n)):h}(t,r||n.i)}function y(t,e){return!e||t(head(e))&&y(t,c(e))}function w(t,e){t&&(head(t).apply(null,e),w(c(t),e))}function M(t){return function t(e,r){return e?t(c(e),o(head(e),r)):r}(t,h)}function _(t,e){return e&&(t(head(e))?head(e):_(t,c(e)))}},function(t,e,r){"use strict";r.d(e,"c",(function(){return h})),r.d(e,"e",(function(){return c})),r.d(e,"d",(function(){return l})),r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return f}));var n=r(1),o=r(0);function h(t,e){return e&&e.constructor===t}var c=Object(o.c)("length"),l=Object(o.j)(h,String);function d(t){return void 0!==t}function f(t,e){return e instanceof Object&&Object(n.a)((function(t){return t in e}),t)}},function(t,e,r){"use strict";r.d(e,"f",(function(){return o})),r.d(e,"d",(function(){return h})),r.d(e,"g",(function(){return c})),r.d(e,"e",(function(){return l})),r.d(e,"b",(function(){return d})),r.d(e,"h",(function(){return f})),r.d(e,"i",(function(){return m})),r.d(e,"c",(function(){return v})),r.d(e,"m",(function(){return y})),r.d(e,"n",(function(){return w})),r.d(e,"a",(function(){return M})),r.d(e,"j",(function(){return _})),r.d(e,"l",(function(){return x})),r.d(e,"k",(function(){return k})),r.d(e,"o",(function(){return E}));var n=1,o=n++,h=n++,c=n++,l=n++,d="fail",f=n++,m=n++,v="start",y="data",w="end",M=n++,_=n++,x=n++,k=n++;function E(t,body,e){try{var r=JSON.parse(body)}catch(t){}return{statusCode:t,body:body,jsonBody:r,thrown:e}}},function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return h})),r.d(e,"c",(function(){return c}));var n=r(0);function o(t,e){return{key:t,node:e}}var h=Object(n.c)("key"),c=Object(n.c)("node")},function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var n=r(1),o=r(0),h=r(2),c=r(8),l=r(9);function d(t){var e=Object(n.h)("resume","pause","pipe"),r=Object(o.j)(h.b,e);return t?r(t)||Object(h.d)(t)?Object(c.a)(l.a,t):Object(c.a)(l.a,t.url,t.method,t.body,t.headers,t.withCredentials,t.cached):Object(l.a)()}d.drop=function(){return d.drop}},function(t,e,r){"use strict";r.d(e,"b",(function(){return d})),r.d(e,"a",(function(){return l}));var n=r(3),o=r(4),h=r(2),c=r(1),l={};function d(t){var e=t(n.f).emit,r=t(n.d).emit,d=t(n.i).emit,f=t(n.h).emit;function m(t,e,r){Object(o.c)(Object(c.g)(t))[e]=r}function v(t,r,n){t&&m(t,r,n);var h=Object(c.d)(Object(o.b)(r,n),t);return e(h),h}var y={};return y[n.l]=function(t,e){if(!t)return d(e),v(t,l,e);var r=function(t,e){var r=Object(o.c)(Object(c.g)(t));return Object(h.c)(Array,r)?v(t,Object(h.e)(r),e):t}(t,e),n=Object(c.l)(r),f=Object(o.a)(Object(c.g)(r));return m(n,f,e),Object(c.d)(Object(o.b)(f,e),n)},y[n.k]=function(t){return r(t),Object(c.l)(t)||f(Object(o.c)(Object(c.g)(t)))},y[n.j]=v,y}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.default=n.a},function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(2);function o(t,e,r,body,o,h,c){return o=o?JSON.parse(JSON.stringify(o)):{},body?(Object(n.d)(body)||(body=JSON.stringify(body),o["Content-Type"]=o["Content-Type"]||"application/json"),o["Content-Length"]=o["Content-Length"]||body.length):body=null,t(r||"GET",function(t,e){return!1===e&&(-1===t.indexOf("?")?t+="?":t+="&",t+="_="+(new Date).getTime()),t}(e,c),body,o,h||!1)}},function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));var n=r(10),o=r(12),h=r(6),c=r(13),l=r(14),d=r(16),f=r(17),m=r(18);function v(t,e,body,r,v){var y=Object(n.a)();return e&&Object(m.b)(y,Object(m.a)(),t,e,body,r,v),Object(f.a)(y),Object(o.a)(y,Object(h.b)(y)),Object(c.a)(y,l.a),Object(d.a)(y,e)}},function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));var n=r(11),o=r(0);function h(){var t={},e=h("newListener"),r=h("removeListener");function h(o){return t[o]=Object(n.a)(o,e,r),t[o]}function c(e){return t[e]||h(e)}return["emit","on","un"].forEach((function(t){c[t]=Object(o.k)((function(e,r){Object(o.b)(r,c(e)[t])}))})),c}},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(1),o=r(2),h=r(0);function c(t,e,r){var c,l;function d(t){return function(e){return e.id===t}}return{on:function(r,o){var h={listener:r,id:o||r};return e&&e.emit(t,r,h.id),c=Object(n.d)(h,c),l=Object(n.d)(r,l),this},emit:function(){Object(n.b)(l,arguments)},un:function(e){var o;c=Object(n.m)(c,d(e),(function(t){o=t})),o&&(l=Object(n.m)(l,(function(t){return t===o.listener})),r&&r.emit(t,o.listener,o.id))},listeners:function(){return l},hasListener:function(t){var e=t?d(t):h.a;return Object(o.a)(Object(n.e)(e,c))}}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(4),o=r(3),h=r(1);function c(t,e){var r,c={};function l(t){return function(param){r=t(r,param)}}for(var d in e)t(d).on(l(e[d]),c);t(o.g).on((function(t){var e=Object(h.g)(r),o=Object(n.a)(e),c=Object(h.l)(r);c&&(Object(n.c)(Object(h.g)(c))[o]=t)})),t(o.e).on((function(){var t=Object(h.g)(r),e=Object(n.a)(t),o=Object(h.l)(r);o&&delete Object(n.c)(Object(h.g)(o))[e]})),t(o.a).on((function(){for(var r in e)t(r).un(c)}))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(3),o=r(1),h=r(4);function c(t,e){var r={node:t(n.d),path:t(n.f)};function c(e,r,n){var c=t(e).emit;r.on((function(t){var e=n(t);!1!==e&&function(t,e,r){var n=Object(o.k)(r);t(e,Object(o.i)(Object(o.l)(Object(o.j)(h.a,n))),Object(o.i)(Object(o.j)(h.c,n)))}(c,Object(h.c)(e),t)}),e),t("removeListener").on((function(n){n===e&&(t(n).listeners()||r.un(e))}))}t("newListener").on((function(t){var n=/(node|path):(.*)/.exec(t);if(n){var o=r[n[1]];o.hasListener(t)||c(t,o,e(n[2]))}}))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var n=r(0),o=r(1),h=r(4),c=r(2),l=r(6),d=r(15),f=Object(d.a)((function(t,e,r,d,f){var m=Object(n.d)(h.a,o.g),v=Object(n.d)(h.c,o.g);function y(t,e){return e[1]?Object(n.g)(t,o.g):t}function w(t){return t===n.a?n.a:Object(n.g)((function(t){return m(t)!==l.a}),Object(n.d)(t,o.l))}function M(){return function(t){return m(t)===l.a}}function _(t,e,r,n,h){var l=t(r);if(l){var d=function(t,e,r){return Object(o.f)((function(t,e){return e(t,r)}),e,t)}(e,n,l);return h(r.substr(Object(c.e)(l[0])),d)}}function x(t,e){return Object(n.j)(_,t,e)}var k=Object(n.h)(x(t,Object(o.h)(y,(function(t,e){var r=e[3];if(!r)return t;var h=Object(n.j)(c.b,Object(o.c)(r.split(/\W+/))),l=Object(n.d)(h,v);return Object(n.g)(l,t)}),(function(t,e){var r=e[2],o=r&&"*"!==r?function(t){return String(m(t))===r}:n.a;return Object(n.g)(o,t)}),w)),x(e,Object(o.h)((function(t){if(t===n.a)return n.a;var e=M(),r=t,o=w((function(t){return h(t)})),h=Object(n.h)(e,r,o);return h}))),x(r,Object(o.h)()),x(d,Object(o.h)(y,M)),x(f,Object(o.h)((function(t){return function(e){var r=t(e);return!0===r?Object(o.g)(e):r}}))),(function(t){throw Error('"'+t+'" could not be tokenised')}));function E(t,e){return e}function O(t,e){return k(t,e,t?O:E)}return function(t){try{return O(t,n.a)}catch(e){throw Error('Could not compile "'+t+'" because '+e.message)}}}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return _}));var n,o,h,c,l,d,f,m,v,y,w,M=r(0),_=(n=Object(M.k)((function(t){return t.unshift(/^/),(e=RegExp(t.map(Object(M.c)("source")).join(""))).exec.bind(e);var e})),c=n(o=/(\$?)/,/([\w-_]+|\*)/,h=/(?:{([\w ]*?)})?/),l=n(o,/\["([^"]+)"\]/,h),d=n(o,/\[(\d+|\*)\]/,h),f=n(o,/()/,/{([\w ]*?)}/),m=n(/\.\./),v=n(/\./),y=n(o,/!/),w=n(/$/),function(t){return t(Object(M.h)(c,l,d,f),m,v,y,w)})},function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(3),o=r(0),h=r(2),c=r(5);function l(t,e){var r,l=/^(node|path):./,d=t(n.h),f=t(n.e).emit,m=t(n.g).emit,v=Object(o.k)((function(e,n){if(r[e])Object(o.b)(n,r[e]);else{var h=t(e),c=n[0];l.test(e)?y(h,M(c)):h.on(c)}return r}));function y(t,e,n){n=n||e;var h=w(e);return t.on((function(){var e=!1;r.forget=function(){e=!0},Object(o.b)(arguments,h),delete r.forget,e&&t.un(n)}),n),r}function w(t){return function(){try{return t.apply(r,arguments)}catch(t){setTimeout((function(){throw new Error(t.message)}))}}}function M(t){return function(){var e=t.apply(this,arguments);Object(h.a)(e)&&(e===c.a.drop?f():m(e))}}function _(e,pattern,r){var n;n="node"===e?M(r):r,y(function(e,pattern){return t(e+":"+pattern)}(e,pattern),n,r)}function x(t,e,n){return Object(h.d)(e)?_(t,e,n):function(t,e){for(var pattern in e)_(t,pattern,e[pattern])}(t,e),r}return t(n.i).on((function(t){r.root=Object(o.f)(t)})),t(n.c).on((function(t,e){r.header=function(t){return t?e[t]:e}})),r={on:v,addListener:v,removeListener:function(e,n,o){if("done"===e)d.un(n);else if("node"===e||"path"===e)t.un(e+":"+n,o);else{var h=n;t(e).un(h)}return r},emit:t.emit,node:Object(o.j)(x,"node"),path:Object(o.j)(x,"path"),done:Object(o.j)(y,d),start:Object(o.j)((function(e,n){return t(e).on(w(n),n),r}),n.c),fail:t(n.b).on,abort:t(n.a).emit,header:o.i,root:o.i,source:e}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(3);function o(t){var e,r,p,o,h=t(n.j).emit,c=t(n.l).emit,l=t(n.k).emit,d=t(n.b).emit,f=65536,m=/[\\"\n]/g,v=0,y=v++,w=v++,M=v++,_=v++,x=v++,k=v++,E=v++,O=v++,A=v++,S=v++,j=v++,C=v++,T=v++,P=v++,N=v++,I=v++,R=v++,B=v++,L=v++,F=v++,D=f,H="",U=!1,V=!1,z=y,W=[],G=null,Z=0,K=0,J=0,X=0,line=1;function $(t){void 0!==o&&(c(o),l(),o=void 0),e=Error(t+"\nLn: "+line+"\nCol: "+X+"\nChr: "+r),d(Object(n.o)(void 0,void 0,e))}function Y(t){return"\r"===t||"\n"===t||" "===t||"\t"===t}t(n.m).on((function(t){if(!e){if(V)return $("Cannot write after close");var n,i=0;for(r=t[0];r&&(i>0&&(p=r),r=t[i++]);)switch(J++,"\n"===r?(line++,X=0):X++,z){case y:if("{"===r)z=M;else if("["===r)z=x;else if(!Y(r))return $("Non-whitespace before {[.");continue;case O:case M:if(Y(r))continue;if(z===O)W.push(A);else{if("}"===r){c({}),l(),z=W.pop()||w;continue}W.push(_)}if('"'!==r)return $('Malformed object key should start with " ');z=E;continue;case A:case _:if(Y(r))continue;if(":"===r)z===_?(W.push(_),void 0!==o&&(c({}),h(o),o=void 0),K++):void 0!==o&&(h(o),o=void 0),z=w;else if("}"===r)void 0!==o&&(c(o),l(),o=void 0),l(),K--,z=W.pop()||w;else{if(","!==r)return $("Bad object");z===_&&W.push(_),void 0!==o&&(c(o),l(),o=void 0),z=O}continue;case x:case w:if(Y(r))continue;if(z===x){if(c([]),K++,z=w,"]"===r){l(),K--,z=W.pop()||w;continue}W.push(k)}if('"'===r)z=E;else if("{"===r)z=M;else if("["===r)z=x;else if("t"===r)z=S;else if("f"===r)z=T;else if("n"===r)z=R;else if("-"===r)H+=r;else if("0"===r)H+=r,z=20;else{if(-1==="123456789".indexOf(r))return $("Bad value");H+=r,z=20}continue;case k:if(","===r)W.push(k),void 0!==o&&(c(o),l(),o=void 0),z=w;else{if("]"!==r){if(Y(r))continue;return $("Bad array")}void 0!==o&&(c(o),l(),o=void 0),l(),K--,z=W.pop()||w}continue;case E:void 0===o&&(o="");var d=i-1;t:for(;;){for(;Z>0;)if(G+=r,r=t.charAt(i++),4===Z?(o+=String.fromCharCode(parseInt(G,16)),Z=0,d=i-1):Z++,!r)break t;if('"'===r&&!U){z=W.pop()||w,o+=t.substring(d,i-1);break}if(!("\\"!==r||U||(U=!0,o+=t.substring(d,i-1),r=t.charAt(i++))))break;if(U){if(U=!1,"n"===r?o+="\n":"r"===r?o+="\r":"t"===r?o+="\t":"f"===r?o+="\f":"b"===r?o+="\b":"u"===r?(Z=1,G=""):o+=r,r=t.charAt(i++),d=i-1,r)continue;break}m.lastIndex=i;var v=m.exec(t);if(!v){i=t.length+1,o+=t.substring(d,i-1);break}if(i=v.index+1,!(r=t.charAt(v.index))){o+=t.substring(d,i-1);break}}continue;case S:if(!r)continue;if("r"!==r)return $("Invalid true started with t"+r);z=j;continue;case j:if(!r)continue;if("u"!==r)return $("Invalid true started with tr"+r);z=C;continue;case C:if(!r)continue;if("e"!==r)return $("Invalid true started with tru"+r);c(!0),l(),z=W.pop()||w;continue;case T:if(!r)continue;if("a"!==r)return $("Invalid false started with f"+r);z=P;continue;case P:if(!r)continue;if("l"!==r)return $("Invalid false started with fa"+r);z=N;continue;case N:if(!r)continue;if("s"!==r)return $("Invalid false started with fal"+r);z=I;continue;case I:if(!r)continue;if("e"!==r)return $("Invalid false started with fals"+r);c(!1),l(),z=W.pop()||w;continue;case R:if(!r)continue;if("u"!==r)return $("Invalid null started with n"+r);z=B;continue;case B:if(!r)continue;if("l"!==r)return $("Invalid null started with nu"+r);z=L;continue;case L:if(!r)continue;if("l"!==r)return $("Invalid null started with nul"+r);c(null),l(),z=W.pop()||w;continue;case F:if("."!==r)return $("Leading zero not followed by .");H+=r,z=20;continue;case 20:if(-1!=="0123456789".indexOf(r))H+=r;else if("."===r){if(-1!==H.indexOf("."))return $("Invalid number has two dots");H+=r}else if("e"===r||"E"===r){if(-1!==H.indexOf("e")||-1!==H.indexOf("E"))return $("Invalid number has two exponential");H+=r}else if("+"===r||"-"===r){if("e"!==p&&"E"!==p)return $("Invalid symbol in number");H+=r}else H&&(c(parseFloat(H)),l(),H=""),i--,z=W.pop()||w;continue;default:return $("Unknown state: "+z)}J>=D&&(n=0,void 0!==o&&o.length>f&&($("Max buffer length exceeded: textNode"),n=Math.max(n,o.length)),H.length>f&&($("Max buffer length exceeded: numberNode"),n=Math.max(n,H.length)),D=f-n+J)}})),t(n.n).on((function(){if(z===y)return c({}),l(),void(V=!0);z===w&&0===K||$("Unexpected end"),void 0!==o&&(c(o),l(),o=void 0),V=!0}))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return f}));var n=r(19),o=r(3),h=r(2),c=r(20),l=r(0);function d(){return new XMLHttpRequest}function f(t,e,r,d,data,f,m){var v=t(o.m).emit,y=t(o.b).emit,w=0,M=!0;function _(){if("2"===String(e.status)[0]){var t=e.responseText,r=(" "+t.substr(w)).substr(1);r&&v(r),w=Object(h.e)(t)}}function x(e){try{M&&t(o.c).emit(e.status,Object(c.a)(e.getAllResponseHeaders())),M=!1}catch(t){}}t(o.a).on((function(){e.onreadystatechange=null,e.abort()})),"onprogress"in e&&(e.onprogress=_),e.onreadystatechange=function(){switch(e.readyState){case 2:case 3:return x(e);case 4:x(e),"2"===String(e.status)[0]?(_(),t(o.n).emit()):y(Object(o.o)(e.status,e.responseText))}};try{for(var k in e.open(r,d,!0),f)e.setRequestHeader(k,f[k]);Object(n.a)(window.location,Object(n.b)(d))||e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.withCredentials=m,e.send(data)}catch(t){window.setTimeout(Object(l.j)(y,Object(o.o)(void 0,void 0,t)),0)}}},function(t,e,r){"use strict";function n(t,e){function r(e){return String(e.port||{"http:":80,"https:":443}[e.protocol||t.protocol])}return!!(e.protocol&&e.protocol!==t.protocol||e.host&&e.host!==t.host||e.host&&r(e)!==r(t))}function o(t){var e=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t)||[];return{protocol:e[1]||"",host:e[2]||"",port:e[3]||""}}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}))},function(t,e,r){"use strict";function n(t){var e={};return t&&t.split("\r\n").forEach((function(t){var r=t.indexOf(": ");e[t.substring(0,r)]=t.substring(r+2)})),e}r.d(e,"a",(function(){return n}))}]).default},t.exports=n()},788:function(t,e,r){"use strict";var n=r(608).formatters,o=r(701),h=r(617);t.exports=function(t){var e=function(e){var r;return e.property?(t[e.property]||(t[e.property]={}),r=t[e.property]):r=t,e.methods&&e.methods.forEach((function(e){e instanceof o||(e=new o(e)),e.attachToObject(r),e.setRequestManager(t._requestManager)})),t};return e.formatters=n,e.utils=h,e.Method=o,e}},789:function(t,e,r){"use strict";var n=r(608).errors,o=r(672),h=r(608).formatters;function c(t){return t}function l(t){o.call(this),this.id=null,this.callback=c,this.arguments=null,this.lastBlock=null,this.options={subscription:t.subscription,type:t.type,requestManager:t.requestManager}}l.prototype=Object.create(o.prototype),l.prototype.constructor=l,l.prototype._extractCallback=function(t){if("function"==typeof t[t.length-1])return t.pop()},l.prototype._validateArgs=function(t){var e=this.options.subscription;if(e||(e={}),e.params||(e.params=0),t.length!==e.params)throw n.InvalidNumberOfParams(t.length,e.params,e.subscriptionName)},l.prototype._formatInput=function(t){var e=this.options.subscription;return e&&e.inputFormatter?e.inputFormatter.map((function(e,r){return e?e(t[r]):t[r]})):t},l.prototype._formatOutput=function(t){var e=this.options.subscription;return e&&e.outputFormatter&&t?e.outputFormatter(t):t},l.prototype._toPayload=function(t){var e=[];if(this.callback=this._extractCallback(t)||c,this.subscriptionMethod||(this.subscriptionMethod=t.shift(),this.options.subscription.subscriptionName&&(this.subscriptionMethod=this.options.subscription.subscriptionName)),this.arguments||(this.arguments=this._formatInput(t),this._validateArgs(this.arguments),t=[]),e.push(this.subscriptionMethod),e=e.concat(this.arguments),t.length)throw new Error("Only a callback is allowed as parameter on an already instantiated subscription.");return{method:this.options.type+"_subscribe",params:e}},l.prototype.unsubscribe=function(t){this.options.requestManager.removeSubscription(this.id,t),this.id=null,this.lastBlock=null,this.removeAllListeners()},l.prototype.subscribe=function(){var t=this,e=Array.prototype.slice.call(arguments),r=this._toPayload(e);if(!r)return this;if(!this.options.requestManager.provider)return setTimeout((function(){var e=new Error("No provider set.");t.callback(e,null,t),t.emit("error",e)}),0),this;if(!this.options.requestManager.provider.on)return setTimeout((function(){var e=new Error("The current provider doesn't support subscriptions: "+t.options.requestManager.provider.constructor.name);t.callback(e,null,t),t.emit("error",e)}),0),this;if(this.lastBlock&&this.options.params&&"object"==typeof this.options.params&&(r.params[1]=this.options.params,r.params[1].fromBlock=h.inputBlockNumberFormatter(this.lastBlock+1)),this.id&&this.unsubscribe(),this.options.params=r.params[1],"logs"===r.params[0]&&r.params[1]&&"object"==typeof r.params[1]&&r.params[1].hasOwnProperty("fromBlock")&&isFinite(r.params[1].fromBlock)){var n=Object.assign({},r.params[1]);this.options.requestManager.send({method:"eth_getLogs",params:[n]},(function(e,r){e?setTimeout((function(){t.callback(e,null,t),t.emit("error",e)}),0):r.forEach((function(e){var output=t._formatOutput(e);t.callback(null,output,t),t.emit("data",output)}))}))}return"object"==typeof r.params[1]&&delete r.params[1].fromBlock,this.options.requestManager.send(r,(function(e,n){!e&&n?(t.id=n,t.method=r.params[0],t.options.requestManager.addSubscription(t,(function(e,r){e?(t.callback(e,!1,t),t.emit("error",e)):(Array.isArray(r)||(r=[r]),r.forEach((function(e){var output=t._formatOutput(e);if(t.lastBlock=output&&"object"==typeof output?output.blockNumber:null,"function"==typeof t.options.subscription.subscriptionHandler)return t.options.subscription.subscriptionHandler.call(t,output);t.emit("data",output),t.callback(null,output,t)})))})),t.emit("connected",n)):setTimeout((function(){t.callback(e,!1,t),t.emit("error",e)}),0)})),this},l.prototype.resubscribe=function(){this.options.requestManager.removeSubscription(this.id),this.id=null,this.subscribe(this.callback)},t.exports=l},790:function(t,e,r){var n=r(16).Buffer,o=r(617),h=r(731).AbiCoder,c=r(731).ParamType,l=new h((function(t,e){return!t.match(/^u?int/)||Array.isArray(e)||e&&"object"==typeof e&&"BN"===e.constructor.name?e:e.toString()}));function d(){}var f=function(){};f.prototype.encodeFunctionSignature=function(t){return("function"==typeof t||"object"==typeof t&&t)&&(t=o._jsonInterfaceMethodToString(t)),o.sha3(t).slice(0,10)},f.prototype.encodeEventSignature=function(t){return("function"==typeof t||"object"==typeof t&&t)&&(t=o._jsonInterfaceMethodToString(t)),o.sha3(t)},f.prototype.encodeParameter=function(t,param){return this.encodeParameters([t],[param])},f.prototype.encodeParameters=function(t,e){var r=this;return t=r.mapTypes(t),e=e.map((function(param,e){let n=t[e];if("object"==typeof n&&n.type&&(n=n.type),param=r.formatParam(n,param),"string"==typeof n&&n.includes("tuple")){const t=l._getCoder(c.from(n)),e=(t,param)=>{if("array"===t.name)return param.map((p=>e(l._getCoder(c.from(t.type.replace("[]",""))),p)));t.coders.forEach(((t,i)=>{"tuple"===t.name?e(t,param[i]):param[i]=r.formatParam(t.name,param[i])}))};e(t,param)}return param})),l.encode(t,e)},f.prototype.mapTypes=function(t){var e=this,r=[];return t.forEach((function(t){if("object"==typeof t&&"function"===t.type&&(t=Object.assign({},t,{type:"bytes24"})),e.isSimplifiedStructFormat(t)){var n=Object.keys(t)[0];r.push(Object.assign(e.mapStructNameAndType(n),{components:e.mapStructToCoderFormat(t[n])}))}else r.push(t)})),r},f.prototype.isSimplifiedStructFormat=function(t){return"object"==typeof t&&void 0===t.components&&void 0===t.name},f.prototype.mapStructNameAndType=function(t){var e="tuple";return t.indexOf("[]")>-1&&(e="tuple[]",t=t.slice(0,-2)),{type:e,name:t}},f.prototype.mapStructToCoderFormat=function(t){var e=this,r=[];return Object.keys(t).forEach((function(n){"object"!=typeof t[n]?r.push({name:n,type:t[n]}):r.push(Object.assign(e.mapStructNameAndType(n),{components:e.mapStructToCoderFormat(t[n])}))})),r},f.prototype.formatParam=function(t,param){const e=new RegExp(/^bytes([0-9]*)$/),r=new RegExp(/^bytes([0-9]*)\[\]$/),h=new RegExp(/^(u?int)([0-9]*)$/),c=new RegExp(/^(u?int)([0-9]*)\[\]$/);if(o.isBN(param)||o.isBigNumber(param))return param.toString(10);if(t.match(r)||t.match(c))return param.map((p=>this.formatParam(t.replace("[]",""),p)));let l=t.match(h);if(l){let t=parseInt(l[2]||"256");t/8<param.length&&(param=o.leftPad(param,t))}if(l=t.match(e),l){n.isBuffer(param)&&(param=o.toHex(param));let t=parseInt(l[1]);if(t){let e=2*t;"0x"===param.substring(0,2)&&(e+=2),param.length<e&&(param=o.rightPad(param,2*t))}param.length%2==1&&(param="0x0"+param.substring(2))}return param},f.prototype.encodeFunctionCall=function(t,e){return this.encodeFunctionSignature(t)+this.encodeParameters(t.inputs,e).replace("0x","")},f.prototype.decodeParameter=function(t,e){return this.decodeParameters([t],e)[0]},f.prototype.decodeParameters=function(t,e){return this.decodeParametersWith(t,e,!1)},f.prototype.decodeParametersWith=function(t,e,r){if(t.length>0&&(!e||"0x"===e||"0X"===e))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");var n=l.decode(this.mapTypes(t),"0x"+e.replace(/0x/i,""),r),o=new d;return o.__length__=0,t.forEach((function(output,i){var t=n[o.__length__];const e="object"==typeof output&&output.type&&"string"===output.type;t="0x"!==t||e||"string"==typeof output&&"string"===output?t:null,o[i]=t,("function"==typeof output||output&&"object"==typeof output)&&output.name&&(o[output.name]=t),o.__length__++})),o},f.prototype.decodeLog=function(t,data,e){var r=this;e=Array.isArray(e)?e:[e],data=data||"";var n=[],o=[],h=0;t.forEach((function(input,i){input.indexed?(o[i]=["bool","int","uint","address","fixed","ufixed"].find((function(t){return-1!==input.type.indexOf(t)}))?r.decodeParameter(input.type,e[h]):e[h],h++):n[i]=input}));var c=data,l=c?this.decodeParametersWith(n,c,!0):[],f=new d;return f.__length__=0,t.forEach((function(t,i){f[i]="string"===t.type?"":null,void 0!==l[i]&&(f[i]=l[i]),void 0!==o[i]&&(f[i]=o[i]),t.name&&(f[t.name]=f[i]),f.__length__++})),f};var m=new f;t.exports=m},791:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return ot}));var n=r(5),o=r.n(n),h=r(615),c=r.n(h),l=r(623),d=r.n(l),f=r(605),m=r.n(f),v=r(612),y=r.n(v),w=r(624),M=r.n(w),_=r(86),x=r(191),k=r(792),E=r.n(k),O=r(145),A=r(794),S=r.n(A),j=r(617),C=r(83),T=r.n(C),P=r(606),N=r.n(P),I=r(607),R=r.n(I),B=r(604),L=r.n(B),F=r(798),D=r.n(F),H=r(802),U=r.n(H),V=T.a.getLogger("torus.js");function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=L()(t);if(e){var o=L()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R()(this,r)}}V.disableAll();var W=function(t){N()(r,t);var e=z(r);function r(t){var n,o=t.errors,h=t.responses,c=t.predicate;return m()(this,r),(n=e.call(this,"Unable to resolve enough promises.")).errors=o,n.responses=h,n.predicate=c,n}return y()(r)}(D()(Error)),G=function(t,e){return new Promise((function(r,n){var o,h=0,c={resolved:!1},l=new Array(t.length).fill(void 0),d=new Array(t.length).fill(void 0);t.forEach((function(f,m){f.then((function(t){d[m]=t})).catch((function(t){l[m]=t})).finally((function(){c.resolved||e(d.slice(0),c).then((function(data){c.resolved=!0,r(data)})).catch((function(t){o=t})).finally((function(e){if((h+=1)===t.length){var r=Object.values(d.reduce((function(t,e){var r,n,o=e||{},h=o.id,c=o.error;return(null==c||null===(r=c.data)||void 0===r?void 0:r.length)>0&&(c.data.startsWith("Error occurred while verifying params")?t[h]=(n=c.data).charAt(0).toUpperCase()+n.slice(1):t[h]=c.data),t}),{}));if(r.length>0){var c=r.length>1?"\n".concat(r.map((function(t){return"• ".concat(t)})).join("\n")):r[0];n(new Error(c))}else{var f;n(new W({errors:l,responses:d,predicate:(null===(f=o)||void 0===f?void 0:f.message)||o}))}}}))}))}))}))};function Z(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function K(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Z(Object(source),!0).forEach((function(e){o()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Z(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=L()(t);if(e){var o=L()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R()(this,r)}}var X=function(t){N()(r,t);var e=J(r);function r(){return m()(this,r),e.apply(this,arguments)}return y()(r)}(D()(Error)),$=function t(s,e){var r=s;if("number"==typeof r&&(r=Array.from({length:r},(function(t,i){return i}))),e>r.length||e<=0)return[];if(e===r.length)return[r];if(1===e)return r.reduce((function(t,e){return[].concat(U()(t),[[e]])}),[]);for(var n=[],o=[],i=0;i<=r.length-e+1;i+=1){o=t(r.slice(i+1),e-1);for(var h=0;h<o.length;h+=1)n.push([r[i]].concat(U()(o[h])))}return n},Y=function(t,e){for(var r={},i=0;i<t.length;i+=1){var n=S()(t[i]);if(r[n]=r[n]?r[n]+1:1,r[n]===e)return t[i]}},Q=function(){var t=d()(M.a.mark((function t(e,r,n){var o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.map((function(t){return Object(x.d)(t,Object(x.a)("VerifierLookupRequest",{verifier:r,verifier_id:n.toString()})).catch((function(t){return V.error("lookup request failed",t)}))})),t.abrupt("return",G(o,(function(t){var r=t.filter((function(t){return t})),n=Y(r.map((function(t){return t&&t.error})),1+~~(e.length/2)),o=Y(r.map((function(t){return t&&t.result})),1+~~(e.length/2));return o||n?Promise.resolve({keyResult:o,errorResult:n}):Promise.reject(new Error("invalid results ".concat(JSON.stringify(t))))})));case 2:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),tt=function(t,e,r,n){return new Promise((function(o,h){setTimeout((function(){Q(t,e,r).then(o).catch(h)}),n)}))},et=function(){var t=d()(M.a.mark((function t(e){var r,n,o,h,c,l,d,f,m,v,data,y;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.endpoints,n=e.torusNodePubs,o=e.lastPoint,h=e.firstPoint,c=e.verifier,l=e.verifierId,d=e.signerHost,f=e.network,void 0===o?(m=Math.floor(Math.random()*r.length),v=m):m=o%r.length,m!==h){t.next=4;break}throw new Error("Looped through all");case 4:return void 0!==h&&(v=h),data=Object(x.a)("KeyAssign",{verifier:c,verifier_id:l.toString()}),t.prev=6,t.next=9,Object(x.d)(d,data,{headers:{pubKeyX:n[m].X,pubKeyY:n[m].Y,network:f}},{useAPIKey:!0});case 9:return y=t.sent,t.abrupt("return",Object(x.d)(r[m],K(K({},data),y),{headers:{"Content-Type":"application/json; charset=utf-8"}}));case 13:if(t.prev=13,t.t0=t.catch(6),V.error(t.t0),!["Timed out","TypeError: Failed to fetch","TypeError: cancelled","TypeError: NetworkError when attempting to fetch resource."].includes(t.t0.message)){t.next=19;break}return t.abrupt("return",et({endpoints:r,torusNodePubs:n,lastPoint:m+1,firstPoint:v,verifier:c,verifierId:l,signerHost:d,network:f}));case 19:throw new Error("Sorry, the Torus Network that powers Web3Auth is currently very busy.\n    We will generate your key in time. Pls try again later. \n\n    ".concat(t.t0.message||""));case 20:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}();function nt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function it(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?nt(Object(source),!0).forEach((function(e){o()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):nt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var ot=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.enableOneKey,n=void 0!==r&&r,o=t.metadataHost,h=void 0===o?"https://metadata.tor.us":o,c=t.allowHost,l=void 0===c?"https://signer.tor.us/api/allow":c,d=t.signerHost,f=void 0===d?"https://signer.tor.us/api/sign":d,v=t.serverTimeOffset,y=void 0===v?0:v,w=t.network,M=void 0===w?"mainnet":w;m()(this,e),this.ec=new O.ec("secp256k1"),this.metadataHost=h,this.allowHost=l,this.enableOneKey=n,this.serverTimeOffset=y||0,this.signerHost=f,this.network=M}var r,n,o,h,l,f,v,w;return y()(e,[{key:"getUserTypeAndAddress",value:(w=d()(M.a.mark((function t(e,r,n){var o,h,c,l,d,f,m,v,y,w,_,x,k,O,A,S,j,C,T,P,address,N=arguments;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.verifier,h=n.verifierId,c=N.length>3&&void 0!==N[3]&&N[3],t.next=4,Q(e,o,h);case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0={};case 7:if(l=t.t0,d=l.keyResult,f=l.errorResult,m=!1,!f||!JSON.stringify(f).includes("Verifier + VerifierID has not yet been assigned")){t.next=26;break}if(c){t.next=14;break}throw new Error("Verifier + VerifierID has not yet been assigned");case 14:return t.next=16,et({endpoints:e,torusNodePubs:r,lastPoint:void 0,firstPoint:void 0,verifier:o,verifierId:h,signerHost:this.signerHost,network:this.network});case 16:return t.next=18,tt(e,o,h,1e3);case 18:if(t.t1=t.sent,t.t1){t.next=21;break}t.t1={};case 21:y=t.t1,v=y.keyResult,m=!0,t.next=31;break;case 26:if(!d){t.next=30;break}v=d,t.next=31;break;case 30:throw new Error("node results do not match at first lookup ".concat(JSON.stringify(d||{}),", ").concat(JSON.stringify(f||{})));case 31:if(!v){t.next=61;break}return w=v.keys[0],_=w.pub_key_X,x=w.pub_key_Y,t.prev=33,t.next=37,this.getOrSetNonce(_,x,void 0,!m);case 37:C=t.sent,k=C.typeOfUser,O=C.nonce,A=C.pubNonce,j=C.upgraded,O=new E.a(O||"0",16),t.next=48;break;case 45:throw t.prev=45,t.t2=t.catch(33),new X;case 48:if("v1"!==k){t.next=52;break}S=this.ec.keyFromPublic({x:_.toString(16),y:x.toString(16)}).getPublic().add(this.ec.keyFromPrivate(O.toString(16)).getPublic()),t.next=57;break;case 52:if("v2"!==k){t.next=56;break}S=this.ec.keyFromPublic({x:_.toString(16),y:x.toString(16)}).getPublic().add(this.ec.keyFromPublic({x:A.x,y:A.y}).getPublic()),t.next=57;break;case 56:throw new Error("getOrSetNonce should always return typeOfUser.");case 57:return T=S.getX().toString(16),P=S.getY().toString(16),address=this.generateAddressFromPubKey(S.getX(),S.getY()),t.abrupt("return",{typeOfUser:k,nonce:O,pubNonce:A,upgraded:j,X:T,Y:P,address:address});case 61:throw new Error("node results do not match at final lookup ".concat(JSON.stringify(d||{}),", ").concat(JSON.stringify(f||{})));case 62:case"end":return t.stop()}}),t,this,[[33,45]])}))),function(t,e,r){return w.apply(this,arguments)})},{key:"setCustomKey",value:(v=d()(M.a.mark((function t(e){var r,n,o,h,c,l,d,f,data;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.privKeyHex,n=e.metadataNonce,o=e.torusKeyHex,h=e.customKeyHex,o?c=new E.a(o,16):(l=new E.a(r,16),c=l.sub(n).umod(this.ec.curve.n)),d=new E.a(h,16),f=d.sub(c).umod(this.ec.curve.n),data=this.generateMetadataParams(f.toString(16),c.toString(16)),t.next=7,this.setMetadata(data);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"retrieveShares",value:(f=d()(M.a.mark((function e(r,n,o,h,l){var f,m,v,y,w,k,O,i,p,A=this,S=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=S.length>5&&void 0!==S[5]?S[5]:{},m=[],e.next=4,Object(x.b)(this.allowHost,{headers:{verifier:o,verifier_id:h.verifier_id,network:this.network}},{useAPIKey:!0});case 4:for(v=Object(_.generatePrivate)(),y=Object(_.getPublic)(v).toString("hex"),w=y.slice(2,66),k=y.slice(66),O=Object(j.keccak256)(l),i=0;i<r.length;i+=1)p=Object(x.d)(r[i],Object(x.a)("CommitmentRequest",{messageprefix:"mug00",tokencommitment:O.slice(2),temppubx:w,temppuby:k,verifieridentifier:o})).catch((function(t){return V.error("commitment",t)})),m.push(p);return e.abrupt("return",G(m,(function(t){return t.filter((function(t){return!(!t||"object"!==c()(t)||t.error)})).length>=3*~~(r.length/4)+1?Promise.resolve(t):Promise.reject(new Error("invalid ".concat(JSON.stringify(t))))})).then((function(e){for(var c=[],m=[],y=0;y<e.length;y+=1)e[y]&&m.push(e[y].result);for(var w=0;w<r.length;w+=1){var k=Object(x.d)(r[w],Object(x.a)("ShareRequest",{encrypted:"yes",item:[it(it({},h),{},{idtoken:l,nodesignatures:m,verifieridentifier:o},f)]})).catch((function(t){return V.error("share req",t)}));c.push(k)}return G(c,function(){var e=d()(M.a.mark((function e(o,h){var c,l,d,f,m,y,w,x,k,O,S,j;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o.filter((function(t){return t})),l=Y(o.map((function(t){return t&&t.result&&t.result.keys[0].PublicKey})),1+~~(r.length/2)),!(c.length>=1+~~(r.length/2)&&l)){e.next=25;break}for(d=[],f=[],m=0;m<o.length;m+=1)o[m]&&o[m].result&&o[m].result.keys&&o[m].result.keys.length>0?(o[m].result.keys.sort((function(a,b){return new E.a(a.Index,16).cmp(new E.a(b.Index,16))})),o[m].result.keys[0].Metadata?(y={ephemPublicKey:t.from(o[m].result.keys[0].Metadata.ephemPublicKey,"hex"),iv:t.from(o[m].result.keys[0].Metadata.iv,"hex"),mac:t.from(o[m].result.keys[0].Metadata.mac,"hex"),mode:t.from(o[m].result.keys[0].Metadata.mode,"hex")},d.push(Object(_.decrypt)(v,it(it({},y),{},{ciphertext:t.from(atob(o[m].result.keys[0].Share).padStart(64,"0"),"hex")})).catch((function(t){return V.debug("share decryption",t)})))):d.push(Promise.resolve(t.from(o[m].result.keys[0].Share.padStart(64,"0"),"hex")))):d.push(Promise.resolve(void 0)),f.push(new E.a(n[m],16));return e.next=8,Promise.all(d);case 8:if(w=e.sent,!h.resolved){e.next=11;break}return e.abrupt("return",void 0);case 11:x=w.reduce((function(t,e,r){return e&&t.push({index:f[r],value:new E.a(e)}),t}),[]),k=$(x.length,1+~~(r.length/2)),S=function(e){var r=k[e],n=x.filter((function(t,e){return r.includes(e)})),o=n.map((function(t){return t.value})),h=n.map((function(t){return t.index})),c=A.lagrangeInterpolation(o,h),d=Object(_.getPublic)(t.from(c.toString(16,64),"hex")).toString("hex"),f=d.slice(2,66),m=d.slice(66);if(0===new E.a(f,16).cmp(new E.a(l.X,16))&&0===new E.a(m,16).cmp(new E.a(l.Y,16)))return O=c,"break"},j=0;case 15:if(!(j<k.length)){e.next=22;break}if("break"!==S(j)){e.next=19;break}return e.abrupt("break",22);case 19:j+=1,e.next=15;break;case 22:if(void 0!==O){e.next=24;break}throw new Error("could not derive private key");case 24:return e.abrupt("return",O);case 25:throw new Error("invalid");case 26:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())})).then(function(){var e=d()(M.a.mark((function e(r){var n,o,h,c,l,d,f,m;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r,o=Object(_.getPublic)(t.from(n.toString(16,64),"hex")).toString("hex"),h=o.slice(2,66),c=o.slice(66),!A.enableOneKey){e.next=12;break}return e.next=7,A.getNonce(h,c,n);case 7:d=e.sent,f=d.nonce,l=new E.a(f||"0",16),e.next=15;break;case 12:return e.next=14,A.getMetadata({pub_key_X:h,pub_key_Y:c});case 14:l=e.sent;case 15:return V.debug("> torus.js/retrieveShares",{privKey:n.toString(16),metadataNonce:l.toString(16)}),n=n.add(l).umod(A.ec.curve.n),m=A.generateAddressFromPrivKey(n),V.debug("> torus.js/retrieveShares",{ethAddress:m,privKey:n.toString(16)}),e.abrupt("return",{ethAddress:m,privKey:n.toString("hex",64),metadataNonce:l});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e,this)}))),function(t,e,r,n,o){return f.apply(this,arguments)})},{key:"getMetadata",value:(l=d()(M.a.mark((function t(data,e){var r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(x.d)("".concat(this.metadataHost,"/get"),data,e,{useAPIKey:!0});case 3:if((r=t.sent)&&r.message){t.next=6;break}return t.abrupt("return",new E.a(0));case 6:return t.abrupt("return",new E.a(r.message,16));case 9:return t.prev=9,t.t0=t.catch(0),V.error("get metadata error",t.t0),t.abrupt("return",new E.a(0));case 13:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(t,e){return l.apply(this,arguments)})},{key:"generateMetadataParams",value:function(e,r){var n=this.ec.keyFromPrivate(r.toString("hex",64)),o={data:e,timestamp:new E.a(~~(this.serverTimeOffset+Date.now()/1e3)).toString(16)},h=n.sign(Object(j.keccak256)(S()(o)).slice(2));return{pub_key_X:n.getPublic().getX().toString("hex"),pub_key_Y:n.getPublic().getY().toString("hex"),set_data:o,signature:t.from(h.r.toString(16,64)+h.s.toString(16,64)+new E.a(h.v).toString(16,2),"hex").toString("base64")}}},{key:"setMetadata",value:(h=d()(M.a.mark((function t(data,e){var r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(x.d)("".concat(this.metadataHost,"/set"),data,e,{useAPIKey:!0});case 3:return r=t.sent,t.abrupt("return",r.message);case 7:return t.prev=7,t.t0=t.catch(0),V.error("set metadata error",t.t0),t.abrupt("return","");case 11:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t,e){return h.apply(this,arguments)})},{key:"lagrangeInterpolation",value:function(t,e){if(t.length!==e.length)return null;for(var r=new E.a(0),i=0;i<t.length;i+=1){for(var n=new E.a(1),o=new E.a(1),h=0;h<t.length;h+=1)if(i!==h){n=(n=n.mul(e[h].neg())).umod(this.ec.curve.n);var c=e[i].sub(e[h]);c=c.umod(this.ec.curve.n),o=o.mul(c).umod(this.ec.curve.n)}var l=n.mul(o.invm(this.ec.curve.n)).umod(this.ec.curve.n);l=l.mul(t[i]).umod(this.ec.curve.n),r=r.add(l)}return r.umod(this.ec.curve.n)}},{key:"generateAddressFromPrivKey",value:function(e){var r=this.ec.keyFromPrivate(e.toString("hex",64),"hex").getPublic().encode("hex").slice(2),n="0x".concat(Object(j.keccak256)(t.from(r,"hex")).slice(26));return Object(j.toChecksumAddress)(n)}},{key:"generateAddressFromPubKey",value:function(e,r){var n=this.ec.keyFromPublic({x:e.toString("hex",64),y:r.toString("hex",64)}).getPublic().encode("hex").slice(2),o="0x".concat(Object(j.keccak256)(t.from(n,"hex")).slice(26));return Object(j.toChecksumAddress)(o)}},{key:"getPublicAddress",value:(o=d()(M.a.mark((function t(e,r,n){var o,h,c,l,d,f,m,v,y,w,_,x,k,O,A,S,j,C,T,address,P=arguments;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.verifier,h=n.verifierId,c=P.length>3&&void 0!==P[3]&&P[3],V.debug("> torus.js/getPublicAddress",{endpoints:e,torusNodePubs:r,verifier:o,verifierId:h,isExtended:c}),d=!1,t.next=6,Q(e,o,h);case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:if(f=t.t0,m=f.keyResult,!(v=f.errorResult)||!JSON.stringify(v).includes("Verifier not supported")){t.next=16;break}throw new Error("Verifier not supported. Check if you: \n\n      1. Are on the right network (Torus testnet/mainnet) \n\n      2. Have setup a verifier on dashboard.web3auth.io?");case 16:if(!v||!JSON.stringify(v).includes("Verifier + VerifierID has not yet been assigned")){t.next=29;break}return t.next=19,et({endpoints:e,torusNodePubs:r,lastPoint:void 0,firstPoint:void 0,verifier:o,verifierId:h,signerHost:this.signerHost,network:this.network});case 19:return t.next=21,tt(e,o,h,1e3);case 21:if(t.t1=t.sent,t.t1){t.next=24;break}t.t1={};case 24:y=t.t1,l=y.keyResult,d=!0,t.next=34;break;case 29:if(!m){t.next=33;break}l=m,t.next=34;break;case 33:throw new Error("node results do not match at first lookup ".concat(JSON.stringify(m||{}),", ").concat(JSON.stringify(v||{})));case 34:if(V.debug("> torus.js/getPublicAddress",{finalKeyResult:l,isNewKey:d}),!l){t.next=76;break}if(_=l.keys[0],x=_.pub_key_X,k=_.pub_key_Y,!this.enableOneKey){t.next=64;break}return t.prev=38,t.next=42,this.getOrSetNonce(x,k,void 0,!d);case 42:T=t.sent,O=T.typeOfUser,A=T.nonce,S=T.pubNonce,C=T.upgraded,A=new E.a(A||"0",16),t.next=53;break;case 50:throw t.prev=50,t.t2=t.catch(38),new X;case 53:if("v1"!==O){t.next=57;break}j=this.ec.keyFromPublic({x:x.toString(16),y:k.toString(16)}).getPublic().add(this.ec.keyFromPrivate(A.toString(16)).getPublic()),t.next=62;break;case 57:if("v2"!==O){t.next=61;break}j=C?this.ec.keyFromPublic({x:x.toString(16),y:k.toString(16)}).getPublic():this.ec.keyFromPublic({x:x.toString(16),y:k.toString(16)}).getPublic().add(this.ec.keyFromPublic({x:S.x,y:S.y}).getPublic()),t.next=62;break;case 61:throw new Error("getOrSetNonce should always return typeOfUser.");case 62:t.next=69;break;case 64:return O="v1",t.next=67,this.getMetadata({pub_key_X:x,pub_key_Y:k});case 67:A=t.sent,j=this.ec.keyFromPublic({x:x.toString(16),y:k.toString(16)}).getPublic().add(this.ec.keyFromPrivate(A.toString(16)).getPublic());case 69:if(x=j.getX().toString(16),k=j.getY().toString(16),address=this.generateAddressFromPubKey(j.getX(),j.getY()),V.debug("> torus.js/getPublicAddress",{X:x,Y:k,address:address,typeOfUser:O,nonce:null===(w=A)||void 0===w?void 0:w.toString(16),pubNonce:S}),c){t.next=75;break}return t.abrupt("return",address);case 75:return t.abrupt("return",{typeOfUser:O,address:address,X:x,Y:k,metadataNonce:A,pubNonce:S});case 76:throw new Error("node results do not match at final lookup ".concat(JSON.stringify(m||{}),", ").concat(JSON.stringify(v||{})));case 77:case"end":return t.stop()}}),t,this,[[38,50]])}))),function(t,e,r){return o.apply(this,arguments)})},{key:"getOrSetNonce",value:(n=d()(M.a.mark((function t(e,r,n){var o,data,h,c=arguments;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>3&&void 0!==c[3]&&c[3],h=o?"getNonce":"getOrSetNonce",data=n?this.generateMetadataParams(h,n):{pub_key_X:e,pub_key_Y:r,set_data:{data:h}},t.abrupt("return",Object(x.d)("".concat(this.metadataHost,"/get_or_set_nonce"),data,void 0,{useAPIKey:!0}));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})},{key:"getNonce",value:(r=d()(M.a.mark((function t(e,r,n){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getOrSetNonce(e,r,n,!0));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)})},{key:"getPostboxKeyFrom1OutOf1",value:function(t,e){var r=new E.a(t,16),n=new E.a(e,16);return r.sub(n).umod(this.ec.curve.n).toString("hex")}}],[{key:"enableLogging",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?V.enableAll():V.disableAll()}},{key:"setAPIKey",value:function(t){Object(x.f)(t)}},{key:"setEmbedHost",value:function(t){Object(x.g)(t)}},{key:"isGetOrSetNonceError",value:function(t){return t instanceof X}}]),e}()}).call(this,r(16).Buffer)},792:function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function h(t,base,e){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==base&&"be"!==base||(e=base,base=10),this._init(t||0,base||10,e||"be"))}var c;"object"==typeof t?t.exports=h:e.BN=h,h.BN=h,h.wordSize=26;try{c="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(793).Buffer}catch(t){}function l(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function d(t,e,r){var n=l(t,r);return r-1>=e&&(n|=l(t,r-1)<<4),n}function f(t,e,r,o){for(var h=0,b=0,c=Math.min(t.length,r),i=e;i<c;i++){var l=t.charCodeAt(i)-48;h*=o,b=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&b<o,"Invalid character"),h+=b}return h}function m(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,e){return t.cmp(e)>0?t:e},h.min=function(t,e){return t.cmp(e)<0?t:e},h.prototype._init=function(t,base,e){if("number"==typeof t)return this._initNumber(t,base,e);if("object"==typeof t)return this._initArray(t,base,e);"hex"===base&&(base=16),n(base===(0|base)&&base>=2&&base<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===base?this._parseHex(t,r,e):(this._parseBase(t,base,r),"le"===e&&this._initArray(this.toArray(),base,e)))},h.prototype._initNumber=function(t,base,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this._initArray(this.toArray(),base,e)},h.prototype._initArray=function(t,base,e){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,o,h=0;if("be"===e)for(i=t.length-1,r=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[r]|=o<<h&67108863,this.words[r+1]=o>>>26-h&67108863,(h+=24)>=26&&(h-=26,r++);else if("le"===e)for(i=0,r=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[r]|=o<<h&67108863,this.words[r+1]=o>>>26-h&67108863,(h+=24)>=26&&(h-=26,r++);return this._strip()},h.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,h=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=d(t,e,i)<<o,this.words[h]|=67108863&n,o>=18?(o-=18,h+=1,this.words[h]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=d(t,e,i)<<o,this.words[h]|=67108863&n,o>=18?(o-=18,h+=1,this.words[h]|=n>>>26):o+=8;this._strip()},h.prototype._parseBase=function(t,base,e){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=base)r++;r--,n=n/base|0;for(var o=t.length-e,h=o%r,c=Math.min(o,o-h)+e,l=0,i=e;i<c;i+=r)l=f(t,i,i+r,base),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==h){var d=1;for(l=f(t,i,t.length,base),i=0;i<h;i++)d*=base;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype._move=function(t){m(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},h.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch(t){h.prototype.inspect=v}else h.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(base,t){var e;if(t=0|t||1,16===(base=base||10)||"hex"===base){e="";for(var r=0,o=0,i=0;i<this.length;i++){var h=this.words[i],c=(16777215&(h<<r|o)).toString(16);e=0!==(o=h>>>24-r&16777215)||i!==this.length-1?y[6-c.length]+c+e:c+e,(r+=2)>=26&&(r-=26,i--)}for(0!==o&&(e=o.toString(16)+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(base===(0|base)&&base>=2&&base<=36){var l=w[base],d=M[base];e="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modrn(d).toString(base);e=(f=f.idivn(d)).isZero()?m+e:y[l-m.length]+m+e}for(this.isZero()&&(e="0"+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}n(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},c&&(h.prototype.toBuffer=function(t,e){return this.toArrayLike(c,t,e)}),h.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function _(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var a=0|t.words[0],b=0|e.words[0],o=a*b,h=67108863&o,c=o/67108864|0;r.words[0]=h;for(var l=1;l<n;l++){for(var d=c>>>26,f=67108863&c,m=Math.min(l,e.length-1),v=Math.max(0,l-t.length+1);v<=m;v++){var i=l-v|0;d+=(o=(a=0|t.words[i])*(b=0|e.words[v])+f)/67108864|0,f=67108863&o}r.words[l]=0|f,c=0|d}return 0!==c?r.words[l]=0|c:r.length--,r._strip()}h.prototype.toArrayLike=function(t,e,r){this._strip();var o=this.byteLength(),h=r||Math.max(1,o);n(o<=h,"byte array longer than desired length"),n(h>0,"Requested array length <= 0");var c=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,h);return this["_toArrayLike"+("le"===e?"LE":"BE")](c,o),c},h.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var h=this.words[i]<<o|n;t[r++]=255&h,r<t.length&&(t[r++]=h>>8&255),r<t.length&&(t[r++]=h>>16&255),6===o?(r<t.length&&(t[r++]=h>>24&255),n=0,o=0):(n=h>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},h.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var h=this.words[i]<<o|n;t[r--]=255&h,r>=0&&(t[r--]=h>>8&255),r>=0&&(t[r--]=h>>16&255),6===o?(r>=0&&(t[r--]=h>>24&255),n=0,o=0):(n=h>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?h.prototype._countBits=function(t){return 32-Math.clz32(t)}:h.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},h.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},h.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(t+=b,26!==b)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this._strip()},h.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var b;b=this.length>t.length?t:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=b.length,this._strip()},h.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var a,b;this.length>t.length?(a=this,b=t):(a=t,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this._strip()},h.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,o=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<o:this.words[r]&~(1<<o),this._strip()},h.prototype.iadd=function(t){var e,a,b;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(a=this,b=t):(a=t,b=this);for(var r=0,i=0;i<b.length;i++)e=(0|a.words[i])+(0|b.words[i])+r,this.words[i]=67108863&e,r=e>>>26;for(;0!==r&&i<a.length;i++)e=(0|a.words[i])+r,this.words[i]=67108863&e,r=e>>>26;if(this.length=a.length,0!==r)this.words[this.length]=r,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},h.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var a,b,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(a=this,b=t):(a=t,b=this);for(var n=0,i=0;i<b.length;i++)n=(e=(0|a.words[i])-(0|b.words[i])+n)>>26,this.words[i]=67108863&e;for(;0!==n&&i<a.length;i++)n=(e=(0|a.words[i])+n)>>26,this.words[i]=67108863&e;if(0===n&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this._strip()},h.prototype.sub=function(t){return this.clone().isub(t)};var x=function(t,e,r){var n,o,h,a=t.words,b=e.words,c=r.words,l=0,d=0|a[0],f=8191&d,m=d>>>13,v=0|a[1],y=8191&v,w=v>>>13,M=0|a[2],_=8191&M,x=M>>>13,k=0|a[3],E=8191&k,O=k>>>13,A=0|a[4],S=8191&A,j=A>>>13,C=0|a[5],T=8191&C,P=C>>>13,N=0|a[6],I=8191&N,R=N>>>13,B=0|a[7],L=8191&B,F=B>>>13,D=0|a[8],H=8191&D,U=D>>>13,V=0|a[9],z=8191&V,W=V>>>13,G=0|b[0],Z=8191&G,K=G>>>13,J=0|b[1],X=8191&J,$=J>>>13,Y=0|b[2],Q=8191&Y,tt=Y>>>13,et=0|b[3],nt=8191&et,it=et>>>13,ot=0|b[4],st=8191&ot,at=ot>>>13,ut=0|b[5],ht=8191&ut,ct=ut>>>13,lt=0|b[6],ft=8191&lt,pt=lt>>>13,mt=0|b[7],gt=8191&mt,vt=mt>>>13,yt=0|b[8],bt=8191&yt,wt=yt>>>13,Mt=0|b[9],_t=8191&Mt,xt=Mt>>>13;r.negative=t.negative^e.negative,r.length=19;var kt=(l+(n=Math.imul(f,Z))|0)+((8191&(o=(o=Math.imul(f,K))+Math.imul(m,Z)|0))<<13)|0;l=((h=Math.imul(m,K))+(o>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(y,Z),o=(o=Math.imul(y,K))+Math.imul(w,Z)|0,h=Math.imul(w,K);var Et=(l+(n=n+Math.imul(f,X)|0)|0)+((8191&(o=(o=o+Math.imul(f,$)|0)+Math.imul(m,X)|0))<<13)|0;l=((h=h+Math.imul(m,$)|0)+(o>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(_,Z),o=(o=Math.imul(_,K))+Math.imul(x,Z)|0,h=Math.imul(x,K),n=n+Math.imul(y,X)|0,o=(o=o+Math.imul(y,$)|0)+Math.imul(w,X)|0,h=h+Math.imul(w,$)|0;var Ot=(l+(n=n+Math.imul(f,Q)|0)|0)+((8191&(o=(o=o+Math.imul(f,tt)|0)+Math.imul(m,Q)|0))<<13)|0;l=((h=h+Math.imul(m,tt)|0)+(o>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(E,Z),o=(o=Math.imul(E,K))+Math.imul(O,Z)|0,h=Math.imul(O,K),n=n+Math.imul(_,X)|0,o=(o=o+Math.imul(_,$)|0)+Math.imul(x,X)|0,h=h+Math.imul(x,$)|0,n=n+Math.imul(y,Q)|0,o=(o=o+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,h=h+Math.imul(w,tt)|0;var At=(l+(n=n+Math.imul(f,nt)|0)|0)+((8191&(o=(o=o+Math.imul(f,it)|0)+Math.imul(m,nt)|0))<<13)|0;l=((h=h+Math.imul(m,it)|0)+(o>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(S,Z),o=(o=Math.imul(S,K))+Math.imul(j,Z)|0,h=Math.imul(j,K),n=n+Math.imul(E,X)|0,o=(o=o+Math.imul(E,$)|0)+Math.imul(O,X)|0,h=h+Math.imul(O,$)|0,n=n+Math.imul(_,Q)|0,o=(o=o+Math.imul(_,tt)|0)+Math.imul(x,Q)|0,h=h+Math.imul(x,tt)|0,n=n+Math.imul(y,nt)|0,o=(o=o+Math.imul(y,it)|0)+Math.imul(w,nt)|0,h=h+Math.imul(w,it)|0;var St=(l+(n=n+Math.imul(f,st)|0)|0)+((8191&(o=(o=o+Math.imul(f,at)|0)+Math.imul(m,st)|0))<<13)|0;l=((h=h+Math.imul(m,at)|0)+(o>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(T,Z),o=(o=Math.imul(T,K))+Math.imul(P,Z)|0,h=Math.imul(P,K),n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,$)|0)+Math.imul(j,X)|0,h=h+Math.imul(j,$)|0,n=n+Math.imul(E,Q)|0,o=(o=o+Math.imul(E,tt)|0)+Math.imul(O,Q)|0,h=h+Math.imul(O,tt)|0,n=n+Math.imul(_,nt)|0,o=(o=o+Math.imul(_,it)|0)+Math.imul(x,nt)|0,h=h+Math.imul(x,it)|0,n=n+Math.imul(y,st)|0,o=(o=o+Math.imul(y,at)|0)+Math.imul(w,st)|0,h=h+Math.imul(w,at)|0;var jt=(l+(n=n+Math.imul(f,ht)|0)|0)+((8191&(o=(o=o+Math.imul(f,ct)|0)+Math.imul(m,ht)|0))<<13)|0;l=((h=h+Math.imul(m,ct)|0)+(o>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(I,Z),o=(o=Math.imul(I,K))+Math.imul(R,Z)|0,h=Math.imul(R,K),n=n+Math.imul(T,X)|0,o=(o=o+Math.imul(T,$)|0)+Math.imul(P,X)|0,h=h+Math.imul(P,$)|0,n=n+Math.imul(S,Q)|0,o=(o=o+Math.imul(S,tt)|0)+Math.imul(j,Q)|0,h=h+Math.imul(j,tt)|0,n=n+Math.imul(E,nt)|0,o=(o=o+Math.imul(E,it)|0)+Math.imul(O,nt)|0,h=h+Math.imul(O,it)|0,n=n+Math.imul(_,st)|0,o=(o=o+Math.imul(_,at)|0)+Math.imul(x,st)|0,h=h+Math.imul(x,at)|0,n=n+Math.imul(y,ht)|0,o=(o=o+Math.imul(y,ct)|0)+Math.imul(w,ht)|0,h=h+Math.imul(w,ct)|0;var Ct=(l+(n=n+Math.imul(f,ft)|0)|0)+((8191&(o=(o=o+Math.imul(f,pt)|0)+Math.imul(m,ft)|0))<<13)|0;l=((h=h+Math.imul(m,pt)|0)+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(L,Z),o=(o=Math.imul(L,K))+Math.imul(F,Z)|0,h=Math.imul(F,K),n=n+Math.imul(I,X)|0,o=(o=o+Math.imul(I,$)|0)+Math.imul(R,X)|0,h=h+Math.imul(R,$)|0,n=n+Math.imul(T,Q)|0,o=(o=o+Math.imul(T,tt)|0)+Math.imul(P,Q)|0,h=h+Math.imul(P,tt)|0,n=n+Math.imul(S,nt)|0,o=(o=o+Math.imul(S,it)|0)+Math.imul(j,nt)|0,h=h+Math.imul(j,it)|0,n=n+Math.imul(E,st)|0,o=(o=o+Math.imul(E,at)|0)+Math.imul(O,st)|0,h=h+Math.imul(O,at)|0,n=n+Math.imul(_,ht)|0,o=(o=o+Math.imul(_,ct)|0)+Math.imul(x,ht)|0,h=h+Math.imul(x,ct)|0,n=n+Math.imul(y,ft)|0,o=(o=o+Math.imul(y,pt)|0)+Math.imul(w,ft)|0,h=h+Math.imul(w,pt)|0;var Tt=(l+(n=n+Math.imul(f,gt)|0)|0)+((8191&(o=(o=o+Math.imul(f,vt)|0)+Math.imul(m,gt)|0))<<13)|0;l=((h=h+Math.imul(m,vt)|0)+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(H,Z),o=(o=Math.imul(H,K))+Math.imul(U,Z)|0,h=Math.imul(U,K),n=n+Math.imul(L,X)|0,o=(o=o+Math.imul(L,$)|0)+Math.imul(F,X)|0,h=h+Math.imul(F,$)|0,n=n+Math.imul(I,Q)|0,o=(o=o+Math.imul(I,tt)|0)+Math.imul(R,Q)|0,h=h+Math.imul(R,tt)|0,n=n+Math.imul(T,nt)|0,o=(o=o+Math.imul(T,it)|0)+Math.imul(P,nt)|0,h=h+Math.imul(P,it)|0,n=n+Math.imul(S,st)|0,o=(o=o+Math.imul(S,at)|0)+Math.imul(j,st)|0,h=h+Math.imul(j,at)|0,n=n+Math.imul(E,ht)|0,o=(o=o+Math.imul(E,ct)|0)+Math.imul(O,ht)|0,h=h+Math.imul(O,ct)|0,n=n+Math.imul(_,ft)|0,o=(o=o+Math.imul(_,pt)|0)+Math.imul(x,ft)|0,h=h+Math.imul(x,pt)|0,n=n+Math.imul(y,gt)|0,o=(o=o+Math.imul(y,vt)|0)+Math.imul(w,gt)|0,h=h+Math.imul(w,vt)|0;var Pt=(l+(n=n+Math.imul(f,bt)|0)|0)+((8191&(o=(o=o+Math.imul(f,wt)|0)+Math.imul(m,bt)|0))<<13)|0;l=((h=h+Math.imul(m,wt)|0)+(o>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,Z),o=(o=Math.imul(z,K))+Math.imul(W,Z)|0,h=Math.imul(W,K),n=n+Math.imul(H,X)|0,o=(o=o+Math.imul(H,$)|0)+Math.imul(U,X)|0,h=h+Math.imul(U,$)|0,n=n+Math.imul(L,Q)|0,o=(o=o+Math.imul(L,tt)|0)+Math.imul(F,Q)|0,h=h+Math.imul(F,tt)|0,n=n+Math.imul(I,nt)|0,o=(o=o+Math.imul(I,it)|0)+Math.imul(R,nt)|0,h=h+Math.imul(R,it)|0,n=n+Math.imul(T,st)|0,o=(o=o+Math.imul(T,at)|0)+Math.imul(P,st)|0,h=h+Math.imul(P,at)|0,n=n+Math.imul(S,ht)|0,o=(o=o+Math.imul(S,ct)|0)+Math.imul(j,ht)|0,h=h+Math.imul(j,ct)|0,n=n+Math.imul(E,ft)|0,o=(o=o+Math.imul(E,pt)|0)+Math.imul(O,ft)|0,h=h+Math.imul(O,pt)|0,n=n+Math.imul(_,gt)|0,o=(o=o+Math.imul(_,vt)|0)+Math.imul(x,gt)|0,h=h+Math.imul(x,vt)|0,n=n+Math.imul(y,bt)|0,o=(o=o+Math.imul(y,wt)|0)+Math.imul(w,bt)|0,h=h+Math.imul(w,wt)|0;var Nt=(l+(n=n+Math.imul(f,_t)|0)|0)+((8191&(o=(o=o+Math.imul(f,xt)|0)+Math.imul(m,_t)|0))<<13)|0;l=((h=h+Math.imul(m,xt)|0)+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(z,X),o=(o=Math.imul(z,$))+Math.imul(W,X)|0,h=Math.imul(W,$),n=n+Math.imul(H,Q)|0,o=(o=o+Math.imul(H,tt)|0)+Math.imul(U,Q)|0,h=h+Math.imul(U,tt)|0,n=n+Math.imul(L,nt)|0,o=(o=o+Math.imul(L,it)|0)+Math.imul(F,nt)|0,h=h+Math.imul(F,it)|0,n=n+Math.imul(I,st)|0,o=(o=o+Math.imul(I,at)|0)+Math.imul(R,st)|0,h=h+Math.imul(R,at)|0,n=n+Math.imul(T,ht)|0,o=(o=o+Math.imul(T,ct)|0)+Math.imul(P,ht)|0,h=h+Math.imul(P,ct)|0,n=n+Math.imul(S,ft)|0,o=(o=o+Math.imul(S,pt)|0)+Math.imul(j,ft)|0,h=h+Math.imul(j,pt)|0,n=n+Math.imul(E,gt)|0,o=(o=o+Math.imul(E,vt)|0)+Math.imul(O,gt)|0,h=h+Math.imul(O,vt)|0,n=n+Math.imul(_,bt)|0,o=(o=o+Math.imul(_,wt)|0)+Math.imul(x,bt)|0,h=h+Math.imul(x,wt)|0;var It=(l+(n=n+Math.imul(y,_t)|0)|0)+((8191&(o=(o=o+Math.imul(y,xt)|0)+Math.imul(w,_t)|0))<<13)|0;l=((h=h+Math.imul(w,xt)|0)+(o>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,Q),o=(o=Math.imul(z,tt))+Math.imul(W,Q)|0,h=Math.imul(W,tt),n=n+Math.imul(H,nt)|0,o=(o=o+Math.imul(H,it)|0)+Math.imul(U,nt)|0,h=h+Math.imul(U,it)|0,n=n+Math.imul(L,st)|0,o=(o=o+Math.imul(L,at)|0)+Math.imul(F,st)|0,h=h+Math.imul(F,at)|0,n=n+Math.imul(I,ht)|0,o=(o=o+Math.imul(I,ct)|0)+Math.imul(R,ht)|0,h=h+Math.imul(R,ct)|0,n=n+Math.imul(T,ft)|0,o=(o=o+Math.imul(T,pt)|0)+Math.imul(P,ft)|0,h=h+Math.imul(P,pt)|0,n=n+Math.imul(S,gt)|0,o=(o=o+Math.imul(S,vt)|0)+Math.imul(j,gt)|0,h=h+Math.imul(j,vt)|0,n=n+Math.imul(E,bt)|0,o=(o=o+Math.imul(E,wt)|0)+Math.imul(O,bt)|0,h=h+Math.imul(O,wt)|0;var Rt=(l+(n=n+Math.imul(_,_t)|0)|0)+((8191&(o=(o=o+Math.imul(_,xt)|0)+Math.imul(x,_t)|0))<<13)|0;l=((h=h+Math.imul(x,xt)|0)+(o>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,nt),o=(o=Math.imul(z,it))+Math.imul(W,nt)|0,h=Math.imul(W,it),n=n+Math.imul(H,st)|0,o=(o=o+Math.imul(H,at)|0)+Math.imul(U,st)|0,h=h+Math.imul(U,at)|0,n=n+Math.imul(L,ht)|0,o=(o=o+Math.imul(L,ct)|0)+Math.imul(F,ht)|0,h=h+Math.imul(F,ct)|0,n=n+Math.imul(I,ft)|0,o=(o=o+Math.imul(I,pt)|0)+Math.imul(R,ft)|0,h=h+Math.imul(R,pt)|0,n=n+Math.imul(T,gt)|0,o=(o=o+Math.imul(T,vt)|0)+Math.imul(P,gt)|0,h=h+Math.imul(P,vt)|0,n=n+Math.imul(S,bt)|0,o=(o=o+Math.imul(S,wt)|0)+Math.imul(j,bt)|0,h=h+Math.imul(j,wt)|0;var Bt=(l+(n=n+Math.imul(E,_t)|0)|0)+((8191&(o=(o=o+Math.imul(E,xt)|0)+Math.imul(O,_t)|0))<<13)|0;l=((h=h+Math.imul(O,xt)|0)+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,st),o=(o=Math.imul(z,at))+Math.imul(W,st)|0,h=Math.imul(W,at),n=n+Math.imul(H,ht)|0,o=(o=o+Math.imul(H,ct)|0)+Math.imul(U,ht)|0,h=h+Math.imul(U,ct)|0,n=n+Math.imul(L,ft)|0,o=(o=o+Math.imul(L,pt)|0)+Math.imul(F,ft)|0,h=h+Math.imul(F,pt)|0,n=n+Math.imul(I,gt)|0,o=(o=o+Math.imul(I,vt)|0)+Math.imul(R,gt)|0,h=h+Math.imul(R,vt)|0,n=n+Math.imul(T,bt)|0,o=(o=o+Math.imul(T,wt)|0)+Math.imul(P,bt)|0,h=h+Math.imul(P,wt)|0;var Lt=(l+(n=n+Math.imul(S,_t)|0)|0)+((8191&(o=(o=o+Math.imul(S,xt)|0)+Math.imul(j,_t)|0))<<13)|0;l=((h=h+Math.imul(j,xt)|0)+(o>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,ht),o=(o=Math.imul(z,ct))+Math.imul(W,ht)|0,h=Math.imul(W,ct),n=n+Math.imul(H,ft)|0,o=(o=o+Math.imul(H,pt)|0)+Math.imul(U,ft)|0,h=h+Math.imul(U,pt)|0,n=n+Math.imul(L,gt)|0,o=(o=o+Math.imul(L,vt)|0)+Math.imul(F,gt)|0,h=h+Math.imul(F,vt)|0,n=n+Math.imul(I,bt)|0,o=(o=o+Math.imul(I,wt)|0)+Math.imul(R,bt)|0,h=h+Math.imul(R,wt)|0;var qt=(l+(n=n+Math.imul(T,_t)|0)|0)+((8191&(o=(o=o+Math.imul(T,xt)|0)+Math.imul(P,_t)|0))<<13)|0;l=((h=h+Math.imul(P,xt)|0)+(o>>>13)|0)+(qt>>>26)|0,qt&=67108863,n=Math.imul(z,ft),o=(o=Math.imul(z,pt))+Math.imul(W,ft)|0,h=Math.imul(W,pt),n=n+Math.imul(H,gt)|0,o=(o=o+Math.imul(H,vt)|0)+Math.imul(U,gt)|0,h=h+Math.imul(U,vt)|0,n=n+Math.imul(L,bt)|0,o=(o=o+Math.imul(L,wt)|0)+Math.imul(F,bt)|0,h=h+Math.imul(F,wt)|0;var Ft=(l+(n=n+Math.imul(I,_t)|0)|0)+((8191&(o=(o=o+Math.imul(I,xt)|0)+Math.imul(R,_t)|0))<<13)|0;l=((h=h+Math.imul(R,xt)|0)+(o>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,n=Math.imul(z,gt),o=(o=Math.imul(z,vt))+Math.imul(W,gt)|0,h=Math.imul(W,vt),n=n+Math.imul(H,bt)|0,o=(o=o+Math.imul(H,wt)|0)+Math.imul(U,bt)|0,h=h+Math.imul(U,wt)|0;var Dt=(l+(n=n+Math.imul(L,_t)|0)|0)+((8191&(o=(o=o+Math.imul(L,xt)|0)+Math.imul(F,_t)|0))<<13)|0;l=((h=h+Math.imul(F,xt)|0)+(o>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,n=Math.imul(z,bt),o=(o=Math.imul(z,wt))+Math.imul(W,bt)|0,h=Math.imul(W,wt);var Ht=(l+(n=n+Math.imul(H,_t)|0)|0)+((8191&(o=(o=o+Math.imul(H,xt)|0)+Math.imul(U,_t)|0))<<13)|0;l=((h=h+Math.imul(U,xt)|0)+(o>>>13)|0)+(Ht>>>26)|0,Ht&=67108863;var Ut=(l+(n=Math.imul(z,_t))|0)+((8191&(o=(o=Math.imul(z,xt))+Math.imul(W,_t)|0))<<13)|0;return l=((h=Math.imul(W,xt))+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,c[0]=kt,c[1]=Et,c[2]=Ot,c[3]=At,c[4]=St,c[5]=jt,c[6]=Ct,c[7]=Tt,c[8]=Pt,c[9]=Nt,c[10]=It,c[11]=Rt,c[12]=Bt,c[13]=Lt,c[14]=qt,c[15]=Ft,c[16]=Dt,c[17]=Ht,c[18]=Ut,0!==l&&(c[19]=l,r.length++),r};function k(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,o=0,h=0;h<r.length-1;h++){var c=o;o=0;for(var l=67108863&n,d=Math.min(h,e.length-1),f=Math.max(0,h-t.length+1);f<=d;f++){var i=h-f,m=(0|t.words[i])*(0|e.words[f]),v=67108863&m;l=67108863&(v=v+l|0),o+=(c=(c=c+(m/67108864|0)|0)+(v>>>26)|0)>>>26,c&=67108863}r.words[h]=l,n=c,c=o}return 0!==n?r.words[h]=n:r.length--,r._strip()}function E(t,e,r){return k(t,e,r)}function O(t,e){this.x=t,this.y=e}Math.imul||(x=_),h.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?x(this,t,e):r<63?_(this,t,e):r<1024?k(this,t,e):E(this,t,e)},O.prototype.makeRBT=function(t){for(var e=new Array(t),r=h.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},O.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},O.prototype.permute=function(t,e,r,n,o,h){for(var i=0;i<h;i++)n[i]=e[t[i]],o[i]=r[t[i]]},O.prototype.transform=function(t,e,r,n,o,h){this.permute(h,t,e,r,n,o);for(var s=1;s<o;s<<=1)for(var c=s<<1,l=Math.cos(2*Math.PI/c),d=Math.sin(2*Math.PI/c),p=0;p<o;p+=c)for(var f=l,m=d,v=0;v<s;v++){var y=r[p+v],w=n[p+v],M=r[p+v+s],_=n[p+v+s],x=f*M-m*_;_=f*_+m*M,M=x,r[p+v]=y+M,n[p+v]=w+_,r[p+v+s]=y-M,n[p+v+s]=w-_,v!==c&&(x=l*f-d*m,m=l*m+d*f,f=x)}},O.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},O.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},O.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},O.prototype.convert13b=function(t,e,r,o){for(var h=0,i=0;i<e;i++)h+=0|t[i],r[2*i]=8191&h,h>>>=13,r[2*i+1]=8191&h,h>>>=13;for(i=2*e;i<o;++i)r[i]=0;n(0===h),n(0==(-8192&h))},O.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},O.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),o=this.makeRBT(n),h=this.stub(n),c=new Array(n),l=new Array(n),d=new Array(n),f=new Array(n),m=new Array(n),v=new Array(n),y=r.words;y.length=n,this.convert13b(t.words,t.length,c,n),this.convert13b(e.words,e.length,f,n),this.transform(c,h,l,d,n,o),this.transform(f,h,m,v,n,o);for(var i=0;i<n;i++){var w=l[i]*m[i]-d[i]*v[i];d[i]=l[i]*v[i]+d[i]*m[i],l[i]=w}return this.conjugate(l,d,n),this.transform(l,d,y,h,n,o),this.conjugate(y,h,n),this.normalize13b(y,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},h.prototype.mul=function(t){var e=new h(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},h.prototype.mulf=function(t){var e=new h(null);return e.words=new Array(this.length+t.length),E(this,t,e)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,h=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=h>>>26,this.words[i]=67108863&h}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,o=r%26;e[r]=t.words[n]>>>o&1}return e}(t);if(0===e.length)return new h(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var q=r.sqr();i<e.length;i++,q=q.sqr())0!==e[i]&&(r=r.mul(q));return r},h.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var i,e=t%26,s=(t-e)/26,r=67108863>>>26-e<<26-e;if(0!==e){var o=0;for(i=0;i<this.length;i++){var h=this.words[i]&r,c=(0|this.words[i])-h<<e;this.words[i]=c|o,o=h>>>26-e}o&&(this.words[i]=o,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this._strip()},h.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,e,r){var o;n("number"==typeof t&&t>=0),o=e?(e-e%26)/26:0;var h=t%26,s=Math.min((t-h)/26,this.length),mask=67108863^67108863>>>h<<h,c=r;if(o-=s,o=Math.max(0,o),c){for(var i=0;i<s;i++)c.words[i]=this.words[i];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var l=0;for(i=this.length-1;i>=0&&(0!==l||i>=o);i--){var d=0|this.words[i];this.words[i]=l<<26-h|d>>>h,l=d&mask}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},h.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26,q=1<<e;return!(this.length<=s)&&!!(this.words[s]&q)},h.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==e&&s++,this.length=Math.min(s,this.length),0!==e){var mask=67108863^67108863>>>e<<e;this.words[this.length-1]&=mask}return this._strip()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},h.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this._strip()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(t,e,r){var i,o,h=t.length+r;this._expand(h);var c=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+c;var l=(0|t.words[i])*e;c=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)c=(o=(0|this.words[i+r])+c)>>26,this.words[i+r]=67108863&o;if(0===c)return this._strip();for(n(-1===c),c=0,i=0;i<this.length;i++)c=(o=-(0|this.words[i])+c)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},h.prototype._wordDiv=function(t,e){var r=(this.length,t.length),a=this.clone(),b=t,n=0|b.words[b.length-1];0!==(r=26-this._countBits(n))&&(b=b.ushln(r),a.iushln(r),n=0|b.words[b.length-1]);var q,o=a.length-b.length;if("mod"!==e){(q=new h(null)).length=o+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var c=a.clone()._ishlnsubmul(b,1,o);0===c.negative&&(a=c,q&&(q.words[o]=1));for(var l=o-1;l>=0;l--){var d=67108864*(0|a.words[b.length+l])+(0|a.words[b.length+l-1]);for(d=Math.min(d/n|0,67108863),a._ishlnsubmul(b,d,l);0!==a.negative;)d--,a.negative=0,a._ishlnsubmul(b,1,l),a.isZero()||(a.negative^=1);q&&(q.words[l]=d)}return q&&q._strip(),a._strip(),"div"!==e&&0!==r&&a.iushrn(r),{div:q||null,mod:a}},h.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(c=this.neg().divmod(t,e),"mod"!==e&&(div=c.div.neg()),"div"!==e&&(o=c.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:div,mod:o}):0===this.negative&&0!==t.negative?(c=this.divmod(t.neg(),e),"mod"!==e&&(div=c.div.neg()),{div:div,mod:c.mod}):0!=(this.negative&t.negative)?(c=this.neg().divmod(t.neg(),e),"div"!==e&&(o=c.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:c.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this._wordDiv(t,e);var div,o,c},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),o=t.andln(1),h=r.cmp(n);return h<0||1===o&&0===h?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},h.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var p=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(p*r+(0|this.words[i]))%t;return e?-r:r},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(p){n(0===p.negative),n(!p.isZero());var t=this,e=p.clone();t=0!==t.negative?t.umod(p):t.clone();for(var r=new h(1),o=new h(0),c=new h(0),l=new h(1),g=0;t.isEven()&&e.isEven();)t.iushrn(1),e.iushrn(1),++g;for(var d=e.clone(),f=t.clone();!t.isZero();){for(var i=0,m=1;0==(t.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(t.iushrn(i);i-- >0;)(r.isOdd()||o.isOdd())&&(r.iadd(d),o.isub(f)),r.iushrn(1),o.iushrn(1);for(var v=0,y=1;0==(e.words[0]&y)&&v<26;++v,y<<=1);if(v>0)for(e.iushrn(v);v-- >0;)(c.isOdd()||l.isOdd())&&(c.iadd(d),l.isub(f)),c.iushrn(1),l.iushrn(1);t.cmp(e)>=0?(t.isub(e),r.isub(c),o.isub(l)):(e.isub(t),c.isub(r),l.isub(o))}return{a:c,b:l,gcd:e.iushln(g)}},h.prototype._invmp=function(p){n(0===p.negative),n(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var t,e=new h(1),r=new h(0),o=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,c=1;0==(a.words[0]&c)&&i<26;++i,c<<=1);if(i>0)for(a.iushrn(i);i-- >0;)e.isOdd()&&e.iadd(o),e.iushrn(1);for(var l=0,d=1;0==(b.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(b.iushrn(l);l-- >0;)r.isOdd()&&r.iadd(o),r.iushrn(1);a.cmp(b)>=0?(a.isub(b),e.isub(r)):(b.isub(a),r.isub(e))}return(t=0===a.cmpn(1)?e:r).cmpn(0)<0&&t.iadd(p),t},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var a=this.clone(),b=t.clone();a.negative=0,b.negative=0;for(var e=0;a.isEven()&&b.isEven();e++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(r<0){var n=a;a=b,b=n}else if(0===r||0===b.cmpn(1))break;a.isub(b)}return b.iushln(e)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,s=(t-e)/26,q=1<<e;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var r=q,i=s;0!==r&&i<this.length;i++){var o=0|this.words[i];r=(o+=r)>>>26,o&=67108863,this.words[i]=o}return 0!==r&&(this.words[i]=r,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var o=0|this.words[0];e=o===t?0:o<t?-1:1}return 0!==this.negative?0|-e:e},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|t.words[i];if(a!==b){a<b?e=-1:a>b&&(e=1);break}}return e},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new N(t)},h.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},h.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},h.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var A={k256:null,p224:null,p192:null,p25519:null};function S(t,p){this.name=t,this.p=new h(p,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function j(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function C(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(t){if("string"==typeof t){var e=h._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){N.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype._tmp=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},S.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},S.prototype.split=function(input,t){input.iushrn(this.n,0,t)},S.prototype.imulK=function(t){return t.imul(this.k)},o(j,S),j.prototype.split=function(input,output){for(var mask=4194303,t=Math.min(input.length,9),i=0;i<t;i++)output.words[i]=input.words[i];if(output.length=t,input.length<=9)return input.words[0]=0,void(input.length=1);var e=input.words[9];for(output.words[output.length++]=e&mask,i=10;i<input.length;i++){var r=0|input.words[i];input.words[i-10]=(r&mask)<<4|e>>>22,e=r}e>>>=22,input.words[i-10]=e,0===e&&input.length>10?input.length-=10:input.length-=9},j.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(C,S),o(T,S),o(P,S),P.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},h._prime=function(t){if(A[t])return A[t];var e;if("k256"===t)e=new j;else if("p224"===t)e=new C;else if("p192"===t)e=new T;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new P}return A[t]=e,e},N.prototype._verify1=function(a){n(0===a.negative,"red works only with positives"),n(a.red,"red works only with red numbers")},N.prototype._verify2=function(a,b){n(0==(a.negative|b.negative),"red works only with positives"),n(a.red&&a.red===b.red,"red works only with red numbers")},N.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(m(a,a.umod(this.m)._forceRed(this)),a)},N.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},N.prototype.add=function(a,b){this._verify2(a,b);var t=a.add(b);return t.cmp(this.m)>=0&&t.isub(this.m),t._forceRed(this)},N.prototype.iadd=function(a,b){this._verify2(a,b);var t=a.iadd(b);return t.cmp(this.m)>=0&&t.isub(this.m),t},N.prototype.sub=function(a,b){this._verify2(a,b);var t=a.sub(b);return t.cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},N.prototype.isub=function(a,b){this._verify2(a,b);var t=a.isub(b);return t.cmpn(0)<0&&t.iadd(this.m),t},N.prototype.shl=function(a,t){return this._verify1(a),this.imod(a.ushln(t))},N.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},N.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},N.prototype.isqr=function(a){return this.imul(a,a.clone())},N.prototype.sqr=function(a){return this.mul(a,a)},N.prototype.sqrt=function(a){if(a.isZero())return a.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var e=this.m.add(new h(1)).iushrn(2);return this.pow(a,e)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);n(!q.isZero());var r=new h(1).toRed(this),o=r.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new h(2*l*l).toRed(this);0!==this.pow(l,c).cmp(o);)l.redIAdd(o);for(var d=this.pow(l,q),f=this.pow(a,q.addn(1).iushrn(1)),m=this.pow(a,q),v=s;0!==m.cmp(r);){for(var y=m,i=0;0!==y.cmp(r);i++)y=y.redSqr();n(i<v);var b=this.pow(d,new h(1).iushln(v-i-1));f=f.redMul(b),d=b.redSqr(),m=m.redMul(d),v=i}return f},N.prototype.invm=function(a){var t=a._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},N.prototype.pow=function(a,t){if(t.isZero())return new h(1).toRed(this);if(0===t.cmpn(1))return a.clone();var e=new Array(16);e[0]=new h(1).toRed(this),e[1]=a;for(var i=2;i<e.length;i++)e[i]=this.mul(e[i-1],a);var r=e[0],n=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],d=c-1;d>=0;d--){var f=l>>d&1;r!==e[0]&&(r=this.sqr(r)),0!==f||0!==n?(n<<=1,n|=f,(4===++o||0===i&&0===d)&&(r=this.mul(r,e[n]),o=0,n=0)):o=0}c=26}return r},N.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},N.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},h.mont=function(t){return new I(t)},o(I,N),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),r=u;return u.cmp(this.m)>=0?r=u.isub(this.m):u.cmpn(0)<0&&(r=u.iadd(this.m)),r._forceRed(this)},I.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new h(0)._forceRed(this);var t=a.mul(b),e=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(e).iushrn(this.shift),r=u;return u.cmp(this.m)>=0?r=u.isub(this.m):u.cmpn(0)<0&&(r=u.iadd(this.m)),r._forceRed(this)},I.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(123)(t))},794:function(t,e,r){var n="undefined"!=typeof JSON?JSON:r(795);t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var r=e.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var c,l="boolean"==typeof e.cycles&&e.cycles,d=e.replacer||function(t,e){return e},f=e.cmp&&(c=e.cmp,function(t){return function(a,b){var e={key:a,value:t[a]},r={key:b,value:t[b]};return c(e,r)}}),m=[];return function t(e,c,v,y){var w=r?"\n"+new Array(y+1).join(r):"",M=r?": ":":";if(v&&v.toJSON&&"function"==typeof v.toJSON&&(v=v.toJSON()),void 0!==(v=d.call(e,c,v))){if("object"!=typeof v||null===v)return n.stringify(v);if(o(v)){for(var _=[],i=0;i<v.length;i++){var x=t(v,i,v[i],y+1)||n.stringify(null);_.push(w+r+x)}return"["+_.join(",")+w+"]"}if(-1!==m.indexOf(v)){if(l)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}m.push(v);var k=h(v).sort(f&&f(v));for(_=[],i=0;i<k.length;i++){var E=t(v,c=k[i],v[c],y+1);if(E){var O=n.stringify(c)+M+E;_.push(w+r+O)}}return m.splice(m.indexOf(v),1),"{"+_.join(",")+w+"}"}}({"":t},"",t,0)};var o=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},h=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in t)e.call(t,n)&&r.push(n);return r}},795:function(t,e,r){e.parse=r(796),e.stringify=r(797)},796:function(t,e){var r,n,text,o,h={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(t){throw{name:"SyntaxError",message:t,at:r,text:text}},l=function(t){return t&&t!==n&&c("Expected '"+t+"' instead of '"+n+"'"),n=text.charAt(r),r+=1,n},d=function(){var t,e="";for("-"===n&&(e="-",l("-"));n>="0"&&n<="9";)e+=n,l();if("."===n)for(e+=".";l()&&n>="0"&&n<="9";)e+=n;if("e"===n||"E"===n)for(e+=n,l(),"-"!==n&&"+"!==n||(e+=n,l());n>="0"&&n<="9";)e+=n,l();if(t=+e,isFinite(t))return t;c("Bad number")},f=function(){var t,i,e,r="";if('"'===n)for(;l();){if('"'===n)return l(),r;if("\\"===n)if(l(),"u"===n){for(e=0,i=0;i<4&&(t=parseInt(l(),16),isFinite(t));i+=1)e=16*e+t;r+=String.fromCharCode(e)}else{if("string"!=typeof h[n])break;r+=h[n]}else r+=n}c("Bad string")},m=function(){for(;n&&n<=" ";)l()};o=function(){switch(m(),n){case"{":return function(){var t,object={};if("{"===n){if(l("{"),m(),"}"===n)return l("}"),object;for(;n;){if(t=f(),m(),l(":"),Object.hasOwnProperty.call(object,t)&&c('Duplicate key "'+t+'"'),object[t]=o(),m(),"}"===n)return l("}"),object;l(","),m()}}c("Bad object")}();case"[":return function(){var t=[];if("["===n){if(l("["),m(),"]"===n)return l("]"),t;for(;n;){if(t.push(o()),m(),"]"===n)return l("]"),t;l(","),m()}}c("Bad array")}();case'"':return f();case"-":return d();default:return n>="0"&&n<="9"?d():function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}c("Unexpected '"+n+"'")}()}},t.exports=function(source,t){var e;return text=source,r=0,n=" ",e=o(),m(),n&&c("Syntax error"),"function"==typeof t?function e(r,n){var o,h,c=r[n];if(c&&"object"==typeof c)for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(void 0!==(h=e(c,o))?c[o]=h:delete c[o]);return t.call(r,n,c)}({"":e},""):e}},797:function(t,e){var r,n,o,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function c(t){return h.lastIndex=0,h.test(t)?'"'+t.replace(h,(function(a){var t=meta[a];return"string"==typeof t?t:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function l(t,e){var i,h,d,f,m,v=r,y=e[t];switch(y&&"object"==typeof y&&"function"==typeof y.toJSON&&(y=y.toJSON(t)),"function"==typeof o&&(y=o.call(e,t,y)),typeof y){case"string":return c(y);case"number":return isFinite(y)?String(y):"null";case"boolean":case"null":return String(y);case"object":if(!y)return"null";if(r+=n,m=[],"[object Array]"===Object.prototype.toString.apply(y)){for(f=y.length,i=0;i<f;i+=1)m[i]=l(i,y)||"null";return d=0===m.length?"[]":r?"[\n"+r+m.join(",\n"+r)+"\n"+v+"]":"["+m.join(",")+"]",r=v,d}if(o&&"object"==typeof o)for(f=o.length,i=0;i<f;i+=1)"string"==typeof(h=o[i])&&(d=l(h,y))&&m.push(c(h)+(r?": ":":")+d);else for(h in y)Object.prototype.hasOwnProperty.call(y,h)&&(d=l(h,y))&&m.push(c(h)+(r?": ":":")+d);return d=0===m.length?"{}":r?"{\n"+r+m.join(",\n"+r)+"\n"+v+"}":"{"+m.join(",")+"}",r=v,d}}t.exports=function(t,e,h){var i;if(r="",n="","number"==typeof h)for(i=0;i<h;i+=1)n+=" ";else"string"==typeof h&&(n=h);if(o=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return l("",{"":t})}},798:function(t,e,r){var n=r(604),o=r(616),h=r(799),c=r(800);function l(e){var r="function"==typeof Map?new Map:void 0;return t.exports=l=function(t){if(null===t||!h(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return c(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,l(e)}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},799:function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},800:function(t,e,r){var n=r(616),o=r(801);function h(e,r,c){return o()?(t.exports=h=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=h=function(t,e,r){var a=[null];a.push.apply(a,e);var o=new(Function.bind.apply(t,a));return r&&n(o,r.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),h.apply(null,arguments)}t.exports=h,t.exports.__esModule=!0,t.exports.default=t.exports},801:function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},802:function(t,e,r){var n=r(803),o=r(804),h=r(805),c=r(806);t.exports=function(t){return n(t)||o(t)||h(t)||c()},t.exports.__esModule=!0,t.exports.default=t.exports},803:function(t,e,r){var n=r(704);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.__esModule=!0,t.exports.default=t.exports},804:function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},805:function(t,e,r){var n=r(704);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},806:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},807:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var p in t)"default"===p||Object.prototype.hasOwnProperty.call(e,p)||n(e,t,p)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(808),e),o(r(809),e),o(r(811),e),o(r(675),e),o(r(812),e)},808:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.storeAsStream=void 0;const n=r(387);class o extends n.Duplex{constructor(t){super({objectMode:!0}),this.resume(),this.handler=t=>this.push(t),this.obsStore=t,this.obsStore.subscribe(this.handler)}pipe(t,e){const r=super.pipe(t,e);return t.write(this.obsStore.getState()),r}_write(t,e,r){this.obsStore.putState(t),r()}_read(t){}_destroy(t,e){this.obsStore.unsubscribe(this.handler),super._destroy(t,e)}}e.storeAsStream=function(t){return new o(t)}},809:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComposedStore=void 0;const n=r(675);class o extends n.ObservableStore{constructor(t){super({}),this._children=t||{},Object.keys(this._children).forEach((t=>{const e=this._children[t];this._addChild(t,e)}))}_addChild(t,e){const r=e=>{const r=this.getState();r[t]=e,this.putState(r)};e.subscribe(r),r(e.getState())}}e.ComposedStore=o},810:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(42);function o(t,e,r){try{Reflect.apply(t,e,r)}catch(t){setTimeout((()=>{throw t}))}}class h extends n.EventEmitter{emit(t,...e){let r="error"===t;const n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){let t;if(e.length>0&&([t]=e),t instanceof Error)throw t;const r=new Error("Unhandled error."+(t?` (${t.message})`:""));throw r.context=t,r}const h=n[t];if(void 0===h)return!1;if("function"==typeof h)o(h,this,e);else{const t=h.length,r=function(t){const e=t.length,r=new Array(e);for(let i=0;i<e;i+=1)r[i]=t[i];return r}(h);for(let i=0;i<t;i+=1)o(r[i],this,e)}return!0}}e.default=h},811:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergedStore=void 0;const n=r(675);class o extends n.ObservableStore{constructor(t=[]){super({}),this._children=t,t.forEach((t=>this._addChild(t))),this._updateWholeState()}_addChild(t){t.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const t=this._children.map((t=>t.getState())),e=Object.assign({},...t);this.putState(e)}}e.MergedStore=o},812:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.storeTransformStream=void 0;const n=r(813);e.storeTransformStream=function(t){return n.obj(((e,r,n)=>{try{return void n(null,t(e))}catch(t){return void n(t)}}))}},813:function(t,e,r){(function(e){var n=r(190).Transform,o=r(667).inherits,h=r(699);function c(t){n.call(this,t),this._destroyed=!1}function l(t,e,r){r(null,t)}function d(t){return function(e,r,n){return"function"==typeof e&&(n=r,r=e,e={}),"function"!=typeof r&&(r=l),"function"!=typeof n&&(n=null),t(e,r,n)}}o(c,n),c.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var r=this;e.nextTick((function(){t&&r.emit("error",t),r.emit("close")}))}},t.exports=d((function(t,e,r){var n=new c(t);return n._transform=e,r&&(n._flush=r),n})),t.exports.ctor=d((function(t,e,r){function n(e){if(!(this instanceof n))return new n(e);this.options=h(t,e),c.call(this,this.options)}return o(n,c),n.prototype._transform=e,r&&(n.prototype._flush=r),n})),t.exports.obj=d((function(t,e,r){var n=new c(h({objectMode:!0,highWaterMark:16},t));return n._transform=e,r&&(n._flush=r),n}))}).call(this,r(17))},973:function(t,e,r){"use strict";r.r(e),r.d(e,"TorusWalletAdapter",(function(){return f}));var n=r(5),o=r.n(n),h=r(734),c=r(3);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){o()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}class f extends c.e{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),o()(this,"name",c.i.TORUS_EVM),o()(this,"adapterNamespace",c.c.EIP155),o()(this,"currentChainNamespace",c.f.EIP155),o()(this,"type",c.a.EXTERNAL),o()(this,"status",c.d.NOT_READY),o()(this,"torusInstance",null),o()(this,"torusWalletOptions",void 0),o()(this,"initParams",void 0),o()(this,"loginSettings",{}),o()(this,"rehydrated",!1),this.torusWalletOptions=t.adapterSettings||{},this.initParams=t.initParams||{},this.loginSettings=t.loginSettings||{},this.chainConfig=t.chainConfig||null}get provider(){return this.status===c.d.CONNECTED&&this.torusInstance?this.torusInstance.provider:null}set provider(t){throw new Error("Not implemented")}async init(t){let e;if(super.checkInitializationRequirements(),this.chainConfig){const{chainId:t,blockExplorer:r,displayName:n,rpcTarget:o}=this.chainConfig;e={chainId:parseInt(t,16),host:o,blockExplorer:r,networkName:n}}else{this.chainConfig=Object(c.m)(c.f.EIP155,1);const{blockExplorer:t,displayName:r}=this.chainConfig;e={chainId:1,host:"mainnet",blockExplorer:t,networkName:r}}this.torusInstance=new h.a(this.torusWalletOptions),await this.torusInstance.init(d(d({showTorusButton:!1},this.initParams),{},{network:e})),this.status=c.d.READY,this.emit(c.b.READY,c.i.TORUS_EVM);try{t.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(t){c.o.error("Failed to connect with torus evm provider",t),this.emit(c.b.ERRORED,t)}}async connect(){if(super.checkConnectionRequirements(),!this.torusInstance)throw c.j.notReady("Torus wallet is not initialized");this.status=c.d.CONNECTING,this.emit(c.b.CONNECTING,{adapter:c.i.TORUS_EVM});try{await this.torusInstance.login(this.loginSettings);const{chainId:t}=this.torusInstance.provider;if(t&&parseInt(t)!==parseInt(this.chainConfig.chainId,16))throw c.j.fromCode(5e3,"Not connected to correct chainId. Expected: ".concat(this.chainConfig.chainId,", Current: ").concat(t));return this.status=c.d.CONNECTED,this.torusInstance.showTorusButton(),this.emit(c.d.CONNECTED,{adapter:c.i.TORUS_EVM,reconnected:this.rehydrated}),this.provider}catch(t){throw this.status=c.d.READY,this.rehydrated=!1,this.emit(c.d.ERRORED,t),t instanceof c.l?t:c.k.connectionError("Failed to login with torus wallet")}}async disconnect(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(this.status!==c.d.CONNECTED)throw c.k.notConnectedError("Not connected with wallet");if(!this.torusInstance)throw c.j.notReady("Torus wallet is not initialized");await this.torusInstance.logout(),this.torusInstance.hideTorusButton(),t.cleanup?(this.status=c.d.NOT_READY,this.torusInstance=null):this.status=c.d.READY,this.rehydrated=!1,this.emit(c.b.DISCONNECTED)}async getUserInfo(){if(this.status!==c.d.CONNECTED)throw c.k.notConnectedError("Not connected with wallet");if(!this.torusInstance)throw c.j.notReady("Torus wallet is not initialized");return await this.torusInstance.getUserInfo("")}setAdapterSettings(t){}}}}]);